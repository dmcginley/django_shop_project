{
  "version": 3,
  "sources": ["../../../../node_modules/lodash.get/index.js", "../../../../node_modules/lodash.set/index.js", "../../../../node_modules/lodash._reinterpolate/index.js", "../../../../node_modules/lodash.templatesettings/index.js", "../../../../node_modules/lodash.template/index.js", "../../../../client/django-formset/DjangoFormset.ts", "../../../../node_modules/sortablejs/modular/sortable.esm.js", "../../../../client/django-formset/FileUploadWidget.ts", "../../../../client/django-formset/tag-attributes.ts", "../../../../node_modules/tom-select/src/contrib/microevent.ts", "../../../../node_modules/tom-select/src/contrib/microplugin.ts", "../../../../node_modules/@orchidjs/sifter/lib/diacritics.ts", "../../../../node_modules/@orchidjs/sifter/lib/utils.ts", "../../../../node_modules/@orchidjs/sifter/lib/sifter.ts", "../../../../node_modules/tom-select/src/vanilla.ts", "../../../../node_modules/tom-select/src/contrib/highlight.ts", "../../../../node_modules/tom-select/src/constants.ts", "../../../../node_modules/tom-select/src/defaults.ts", "../../../../node_modules/tom-select/src/utils.ts", "../../../../node_modules/tom-select/src/getSettings.ts", "../../../../node_modules/tom-select/src/tom-select.ts", "../../../../node_modules/tom-select/src/plugins/remove_button/plugin.ts", "../../../../client/django-formset/IncompleteSelect.ts", "../../../../client/django-formset/DjangoSelectize.ts", "../../../../client/django-formset/helpers.ts", "../../../../client/django-formset/SortableSelect.ts", "../../../../client/django-formset/DualSelector.ts", "../../../../client/django-formset.ts"],
  "sourcesContent": ["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n * it's created. Arrays are created for missing index properties while objects\n * are created for all other missing properties. Use `_.setWith` to customize\n * `path` creation.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.set(object, 'a[0].b.c', 4);\n * console.log(object.a[0].b.c);\n * // => 4\n *\n * _.set(object, ['x', '0', 'y', 'z'], 5);\n * console.log(object.x[0].y.z);\n * // => 5\n */\nfunction set(object, path, value) {\n  return object == null ? object : baseSet(object, path, value);\n}\n\nmodule.exports = set;\n", "/**\n * lodash 3.0.0 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.7.0 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** Used to match template delimiters. */\nvar reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\nmodule.exports = reInterpolate;\n", "/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\nvar reInterpolate = require('lodash._reinterpolate');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]';\n\n/** Used to match HTML entities and HTML characters. */\nvar reUnescapedHtml = /[&<>\"']/g,\n    reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n/** Used to match template delimiters. */\nvar reEscape = /<%-([\\s\\S]+?)%>/g,\n    reEvaluate = /<%([\\s\\S]+?)%>/g;\n\n/** Used to map characters to HTML entities. */\nvar htmlEscapes = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Used by `_.escape` to convert characters to HTML entities.\n *\n * @private\n * @param {string} chr The matched character to escape.\n * @returns {string} Returns the escaped character.\n */\nvar escapeHtmlChar = basePropertyOf(htmlEscapes);\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * By default, the template delimiters used by lodash are like those in\n * embedded Ruby (ERB) as well as ES2015 template strings. Change the\n * following template settings to use alternative delimiters.\n *\n * @static\n * @memberOf _\n * @type {Object}\n */\nvar templateSettings = {\n\n  /**\n   * Used to detect `data` property values to be HTML-escaped.\n   *\n   * @memberOf _.templateSettings\n   * @type {RegExp}\n   */\n  'escape': reEscape,\n\n  /**\n   * Used to detect code to be evaluated.\n   *\n   * @memberOf _.templateSettings\n   * @type {RegExp}\n   */\n  'evaluate': reEvaluate,\n\n  /**\n   * Used to detect `data` property values to inject.\n   *\n   * @memberOf _.templateSettings\n   * @type {RegExp}\n   */\n  'interpolate': reInterpolate,\n\n  /**\n   * Used to reference the data object in the template text.\n   *\n   * @memberOf _.templateSettings\n   * @type {string}\n   */\n  'variable': '',\n\n  /**\n   * Used to import variables into the compiled template.\n   *\n   * @memberOf _.templateSettings\n   * @type {Object}\n   */\n  'imports': {\n\n    /**\n     * A reference to the `lodash` function.\n     *\n     * @memberOf _.templateSettings.imports\n     * @type {Function}\n     */\n    '_': { 'escape': escape }\n  }\n};\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * corresponding HTML entities.\n *\n * **Note:** No other characters are escaped. To escape additional\n * characters use a third-party library like [_he_](https://mths.be/he).\n *\n * Though the \">\" character is escaped for symmetry, characters like\n * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n * unless they're part of a tag or unquoted attribute value. See\n * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n * (under \"semi-related fun fact\") for more details.\n *\n * When working with HTML you should always\n * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n * XSS vectors.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escape('fred, barney, & pebbles');\n * // => 'fred, barney, &amp; pebbles'\n */\nfunction escape(string) {\n  string = toString(string);\n  return (string && reHasUnescapedHtml.test(string))\n    ? string.replace(reUnescapedHtml, escapeHtmlChar)\n    : string;\n}\n\nmodule.exports = templateSettings;\n", "/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\nvar reInterpolate = require('lodash._reinterpolate'),\n    templateSettings = require('lodash.templatesettings');\n\n/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    domExcTag = '[object DOMException]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to match empty string literals in compiled template source. */\nvar reEmptyStringLeading = /\\b__p \\+= '';/g,\n    reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n    reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/**\n * Used to match\n * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).\n */\nvar reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to ensure capturing order of template delimiters. */\nvar reNoMatch = /($^)/;\n\n/** Used to match unescaped characters in compiled string literals. */\nvar reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Used to escape characters for inclusion in compiled string literals. */\nvar stringEscapes = {\n  '\\\\': '\\\\',\n  \"'\": \"'\",\n  '\\n': 'n',\n  '\\r': 'r',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\n/**\n * Used by `_.template` to escape characters for inclusion in compiled string literals.\n *\n * @private\n * @param {string} chr The matched character to escape.\n * @returns {string} Returns the escaped character.\n */\nfunction escapeStringChar(chr) {\n  return '\\\\' + stringEscapes[chr];\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object),\n    nativeMax = Math.max,\n    nativeNow = Date.now;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Used by `_.defaults` to customize its `_.assignIn` use to assign properties\n * of source objects to the destination object for all destination properties\n * that resolve to `undefined`.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to assign.\n * @param {Object} object The parent object of `objValue`.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsAssignIn(objValue, srcValue, key, object) {\n  if (objValue === undefined ||\n      (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n    return srcValue;\n  }\n  return objValue;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n * `SyntaxError`, `TypeError`, or `URIError` object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n * @example\n *\n * _.isError(new Error);\n * // => true\n *\n * _.isError(Error);\n * // => false\n */\nfunction isError(value) {\n  if (!isObjectLike(value)) {\n    return false;\n  }\n  var tag = baseGetTag(value);\n  return tag == errorTag || tag == domExcTag ||\n    (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * This method is like `_.assignIn` except that it accepts `customizer`\n * which is invoked to produce the assigned values. If `customizer` returns\n * `undefined`, assignment is handled by the method instead. The `customizer`\n * is invoked with five arguments: (objValue, srcValue, key, object, source).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extendWith\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} [customizer] The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @see _.assignWith\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   return _.isUndefined(objValue) ? srcValue : objValue;\n * }\n *\n * var defaults = _.partialRight(_.assignInWith, customizer);\n *\n * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n  copyObject(source, keysIn(source), object, customizer);\n});\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * Creates a compiled template function that can interpolate data properties\n * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n * properties may be accessed as free variables in the template. If a setting\n * object is given, it takes precedence over `_.templateSettings` values.\n *\n * **Note:** In the development build `_.template` utilizes\n * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n * for easier debugging.\n *\n * For more information on precompiling templates see\n * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n *\n * For more information on Chrome extension sandboxes see\n * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category String\n * @param {string} [string=''] The template string.\n * @param {Object} [options={}] The options object.\n * @param {RegExp} [options.escape=_.templateSettings.escape]\n *  The HTML \"escape\" delimiter.\n * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]\n *  The \"evaluate\" delimiter.\n * @param {Object} [options.imports=_.templateSettings.imports]\n *  An object to import into the template as free variables.\n * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]\n *  The \"interpolate\" delimiter.\n * @param {string} [options.sourceURL='templateSources[n]']\n *  The sourceURL of the compiled template.\n * @param {string} [options.variable='obj']\n *  The data object variable name.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Function} Returns the compiled template function.\n * @example\n *\n * // Use the \"interpolate\" delimiter to create a compiled template.\n * var compiled = _.template('hello <%= user %>!');\n * compiled({ 'user': 'fred' });\n * // => 'hello fred!'\n *\n * // Use the HTML \"escape\" delimiter to escape data property values.\n * var compiled = _.template('<b><%- value %></b>');\n * compiled({ 'value': '<script>' });\n * // => '<b>&lt;script&gt;</b>'\n *\n * // Use the \"evaluate\" delimiter to execute JavaScript and generate HTML.\n * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n * compiled({ 'users': ['fred', 'barney'] });\n * // => '<li>fred</li><li>barney</li>'\n *\n * // Use the internal `print` function in \"evaluate\" delimiters.\n * var compiled = _.template('<% print(\"hello \" + user); %>!');\n * compiled({ 'user': 'barney' });\n * // => 'hello barney!'\n *\n * // Use the ES template literal delimiter as an \"interpolate\" delimiter.\n * // Disable support by replacing the \"interpolate\" delimiter.\n * var compiled = _.template('hello ${ user }!');\n * compiled({ 'user': 'pebbles' });\n * // => 'hello pebbles!'\n *\n * // Use backslashes to treat delimiters as plain text.\n * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n * compiled({ 'value': 'ignored' });\n * // => '<%- value %>'\n *\n * // Use the `imports` option to import `jQuery` as `jq`.\n * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n * compiled({ 'users': ['fred', 'barney'] });\n * // => '<li>fred</li><li>barney</li>'\n *\n * // Use the `sourceURL` option to specify a custom sourceURL for the template.\n * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n * compiled(data);\n * // => Find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector.\n *\n * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.\n * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n * compiled.source;\n * // => function(data) {\n * //   var __t, __p = '';\n * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n * //   return __p;\n * // }\n *\n * // Use custom template delimiters.\n * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n * var compiled = _.template('hello {{ user }}!');\n * compiled({ 'user': 'mustache' });\n * // => 'hello mustache!'\n *\n * // Use the `source` property to inline compiled templates for meaningful\n * // line numbers in error messages and stack traces.\n * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\\\n *   var JST = {\\\n *     \"main\": ' + _.template(mainText).source + '\\\n *   };\\\n * ');\n */\nfunction template(string, options, guard) {\n  // Based on John Resig's `tmpl` implementation\n  // (http://ejohn.org/blog/javascript-micro-templating/)\n  // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n  var settings = templateSettings.imports._.templateSettings || templateSettings;\n\n  if (guard && isIterateeCall(string, options, guard)) {\n    options = undefined;\n  }\n  string = toString(string);\n  options = assignInWith({}, options, settings, customDefaultsAssignIn);\n\n  var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),\n      importsKeys = keys(imports),\n      importsValues = baseValues(imports, importsKeys);\n\n  var isEscaping,\n      isEvaluating,\n      index = 0,\n      interpolate = options.interpolate || reNoMatch,\n      source = \"__p += '\";\n\n  // Compile the regexp to match each delimiter.\n  var reDelimiters = RegExp(\n    (options.escape || reNoMatch).source + '|' +\n    interpolate.source + '|' +\n    (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n    (options.evaluate || reNoMatch).source + '|$'\n  , 'g');\n\n  // Use a sourceURL for easier debugging.\n  // The sourceURL gets injected into the source that's eval-ed, so be careful\n  // with lookup (in case of e.g. prototype pollution), and strip newlines if any.\n  // A newline wouldn't be a valid sourceURL anyway, and it'd enable code injection.\n  var sourceURL = hasOwnProperty.call(options, 'sourceURL')\n    ? ('//# sourceURL=' +\n       (options.sourceURL + '').replace(/[\\r\\n]/g, ' ') +\n       '\\n')\n    : '';\n\n  string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n    interpolateValue || (interpolateValue = esTemplateValue);\n\n    // Escape characters that can't be included in string literals.\n    source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n    // Replace delimiters with snippets.\n    if (escapeValue) {\n      isEscaping = true;\n      source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n    }\n    if (evaluateValue) {\n      isEvaluating = true;\n      source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n    }\n    if (interpolateValue) {\n      source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n    }\n    index = offset + match.length;\n\n    // The JS engine embedded in Adobe products needs `match` returned in\n    // order to produce the correct `offset` value.\n    return match;\n  });\n\n  source += \"';\\n\";\n\n  // If `variable` is not specified wrap a with-statement around the generated\n  // code to add the data object to the top of the scope chain.\n  // Like with sourceURL, we take care to not check the option's prototype,\n  // as this configuration is a code injection vector.\n  var variable = hasOwnProperty.call(options, 'variable') && options.variable;\n  if (!variable) {\n    source = 'with (obj) {\\n' + source + '\\n}\\n';\n  }\n  // Cleanup code by stripping empty strings.\n  source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n    .replace(reEmptyStringMiddle, '$1')\n    .replace(reEmptyStringTrailing, '$1;');\n\n  // Frame code as the function body.\n  source = 'function(' + (variable || 'obj') + ') {\\n' +\n    (variable\n      ? ''\n      : 'obj || (obj = {});\\n'\n    ) +\n    \"var __t, __p = ''\" +\n    (isEscaping\n       ? ', __e = _.escape'\n       : ''\n    ) +\n    (isEvaluating\n      ? ', __j = Array.prototype.join;\\n' +\n        \"function print() { __p += __j.call(arguments, '') }\\n\"\n      : ';\\n'\n    ) +\n    source +\n    'return __p\\n}';\n\n  var result = attempt(function() {\n    return Function(importsKeys, sourceURL + 'return ' + source)\n      .apply(undefined, importsValues);\n  });\n\n  // Provide the compiled function's source by its `toString` method or\n  // the `source` property as a convenience for inlining compiled templates.\n  result.source = source;\n  if (isError(result)) {\n    throw result;\n  }\n  return result;\n}\n\n/**\n * Attempts to invoke `func`, returning either the result or the caught error\n * object. Any additional arguments are provided to `func` when it's invoked.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Util\n * @param {Function} func The function to attempt.\n * @param {...*} [args] The arguments to invoke `func` with.\n * @returns {*} Returns the `func` result or error object.\n * @example\n *\n * // Avoid throwing errors for invalid selectors.\n * var elements = _.attempt(function(selector) {\n *   return document.querySelectorAll(selector);\n * }, '>_>');\n *\n * if (_.isError(elements)) {\n *   elements = [];\n * }\n */\nvar attempt = baseRest(function(func, args) {\n  try {\n    return apply(func, undefined, args);\n  } catch (e) {\n    return isError(e) ? e : new Error(e);\n  }\n});\n\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = template;\n", "import getDataValue from 'lodash.get';\nimport setDataValue from 'lodash.set';\nimport template from 'lodash.template';\nimport Sortable, { SortableEvent } from 'sortablejs';\nimport { FileUploadWidget } from './FileUploadWidget';\nimport { parse } from './tag-attributes';\nimport styles from 'sass:./DjangoFormset.scss';\nimport spinnerIcon from './spinner.svg';\nimport okayIcon from './okay.svg';\nimport bummerIcon from './bummer.svg';\n\ntype FieldElement = HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement;\ntype FieldValue = string | Array<string | Object>;\ntype ErrorKey = keyof ValidityState;\n\nconst NON_FIELD_ERRORS = '__all__';\nconst COLLECTION_ERRORS = '_collection_errors_';\nconst MARKED_FOR_REMOVAL = '_marked_for_removal_';\n\nconst style = document.createElement('style');\nstyle.innerText = styles;\ndocument.head.appendChild(style);\n\n\nfunction assert(condition: any, message?: string) {\n\tif (!condition) {\n\t\tmessage = message ? `Assertion failed: ${message}` : \"Assertion failed\";\n\t\tthrow new Error(message);\n\t}\n}\n\n\nclass BoundValue {\n\tpublic readonly value: FieldValue;\n\n\tconstructor(value: FieldValue) {\n\t\tthis.value = value;\n\t}\n\n\tequals(other: FieldValue) {\n\t\tif (typeof this.value === 'string') {\n\t\t\treturn this.value === other;\n\t\t} else {\n\t\t\treturn this.value.length === other.length && this.value.every((val, index) => val === other[index]);\n\t\t}\n\t}\n}\n\n\nclass FieldErrorMessages extends Map<ErrorKey, string>{\n\tconstructor(fieldGroup: FieldGroup) {\n\t\tsuper();\n\t\tconst element = fieldGroup.element.querySelector('django-error-messages');\n\t\tif (!element)\n\t\t\tthrow new Error(`<django-field-group> for '${fieldGroup.name}' requires one <django-error-messages> tag.`);\n\t\tfor (const attr of element.getAttributeNames()) {\n\t\t\tconst clientKey = attr.replace(/([_][a-z])/g, (group) => group.toUpperCase().replace('_', ''));\n\t\t\tconst clientValue = element.getAttribute(attr);\n\t\t\tif (clientValue) {\n\t\t\t\tthis.set(clientKey as ErrorKey, clientValue);\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nclass FieldGroup {\n\tpublic readonly form: DjangoForm;\n\tpublic readonly name: string;\n\tpublic readonly element: HTMLElement;\n\tprivate readonly pristineValue: BoundValue;\n\tprivate readonly fieldElements: Array<FieldElement>;\n\tprivate readonly initialDisabled: Array<boolean>;\n\tpublic readonly errorPlaceholder: Element | null;\n\tprivate readonly errorMessages: FieldErrorMessages;\n\tprivate readonly fileUploader?: FileUploadWidget;\n\tprivate readonly updateVisibility: Function;\n\tprivate readonly updateDisabled: Function;\n\n\tconstructor(form: DjangoForm, element: HTMLElement) {\n\t\tthis.form = form;\n\t\tthis.element = element;\n\t\tthis.errorPlaceholder = element.querySelector('.dj-errorlist > .dj-placeholder');\n\t\tthis.errorMessages = new FieldErrorMessages(this);\n\t\tconst requiredAny = element.classList.contains('dj-required-any');\n\t\tconst inputElements = (Array.from(element.getElementsByTagName('INPUT')) as Array<HTMLInputElement>).filter(e => e.name && e.type !== 'hidden');\n\t\tfor (const element of inputElements) {\n\t\t\tswitch (element.type) {\n\t\t\t\tcase 'checkbox':\n\t\t\t\tcase 'radio':\n\t\t\t\t\telement.addEventListener('input', () => {\n\t\t\t\t\t\tthis.touch();\n\t\t\t\t\t\tthis.inputted()\n\t\t\t\t\t});\n\t\t\t\t\telement.addEventListener('change', () => {\n\t\t\t\t\t\trequiredAny ? this.validateCheckboxSelectMultiple() : this.validate()\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'file':\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tthis.fileUploader = new FileUploadWidget(this, element);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\telement.addEventListener('focus', () => this.touch());\n\t\t\t\t\telement.addEventListener('input', () => this.inputted());\n\t\t\t\t\telement.addEventListener('blur', () => this.validate());\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.fieldElements = Array<FieldElement>(0).concat(inputElements);\n\n\t\t// <django-field-group> can contain at most one <select> element\n\t\tconst selectElement = (Array.from(element.getElementsByTagName('SELECT')) as Array<HTMLSelectElement>).filter(e => e.name).at(0);\n\t\tif (selectElement) {\n\t\t\tselectElement.addEventListener('focus', () => this.touch());\n\t\t\tselectElement.addEventListener('change', () => {\n\t\t\t\tthis.setDirty();\n\t\t\t\tthis.clearCustomError();\n\t\t\t\tthis.validate();\n\t\t\t});\n\t\t\tthis.fieldElements.push(selectElement);\n\t\t}\n\n\t\t// <django-field-group> can contain at most one <textarea> element\n\t\tconst textAreaElement = element.getElementsByTagName('TEXTAREA').item(0);\n\t\tif (textAreaElement instanceof HTMLTextAreaElement) {\n\t\t\ttextAreaElement.addEventListener('focus', () => this.touch());\n\t\t\ttextAreaElement.addEventListener('input', () => this.inputted());\n\t\t\ttextAreaElement.addEventListener('blur', () => this.validate());\n\t\t\tthis.fieldElements.push(textAreaElement);\n\t\t}\n\n\t\tthis.name = this.assertUniqueName();\n\t\tthis.initialDisabled = this.fieldElements.map(element => element.disabled);\n\t\tif (requiredAny) {\n\t\t\tthis.validateCheckboxSelectMultiple();\n\t\t} else {\n\t\t\tthis.validateBoundField();\n\t\t}\n\t\tthis.pristineValue = new BoundValue(this.aggregateValue());\n\t\tthis.updateVisibility = this.evalVisibility('show-if', true) ?? this.evalVisibility('hide-if', false) ?? function() {};\n\t\tthis.updateDisabled = this.evalDisable();\n\t\tthis.untouch();\n\t\tthis.setPristine();\n\t}\n\n\tpublic aggregateValue(): FieldValue {\n\t\tif (this.fieldElements.length === 1) {\n\t\t\tconst element = this.fieldElements[0];\n\t\t\tif (element.type === 'checkbox') {\n\t\t\t\treturn (element as HTMLInputElement).checked ? element.value : '';\n\t\t\t}\n\t\t\tif (element.type === 'select-multiple') {\n\t\t\t\tconst value = [];\n\t\t\t\tconst select = element as HTMLSelectElement;\n\t\t\t\tfor (const key in select.options) {\n\t\t\t\t\tif (select.options[key].selected) {\n\t\t\t\t\t\tvalue.push(select.options[key].value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (element.type === 'file') {\n\t\t\t\tif (!this.fileUploader)\n\t\t\t\t\tthrow new Error(\"fileUploader expected\");\n\t\t\t\treturn this.fileUploader.uploadedFiles;\n\t\t\t}\n\t\t\t// all other input types just return their value\n\t\t\treturn element.value;\n\t\t} else {\n\t\t\tconst value = [];\n\t\t\tfor (let element of this.fieldElements) {\n\t\t\t\tif (element.type === 'checkbox') {\n\t\t\t\t\tif ((element as HTMLInputElement).checked) {\n\t\t\t\t\t\tvalue.push(element.value);\n\t\t\t\t\t}\n\t\t\t\t} else if (element.type === 'radio') {\n\t\t\t\t\tif ((element as HTMLInputElement).checked)\n\t\t\t\t\t\treturn element.value;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\tpublic updateOperability() {\n\t\tthis.updateVisibility();\n\t\tthis.updateDisabled();\n\t}\n\n\tprivate assertUniqueName() : string {\n\t\tlet name = '__undefined__';\n\t\tfor (const element of this.fieldElements) {\n\t\t\tif (name === '__undefined__') {\n\t\t\t\tname = element.name;\n\t\t\t} else {\n\t\t\t\tif (name !== element.name)\n\t\t\t\t\tthrow new Error(`Name '${name}' mismatch on multiple input fields on '${element.name}'`);\n\t\t\t}\n\t\t}\n\t\treturn name;\n\t}\n\n\tprivate evalVisibility(attribute: string, visible: boolean): Function | null {\n\t\tconst attrValue = this.fieldElements[0]?.getAttribute(attribute);\n\t\tif (typeof attrValue !== 'string')\n\t\t\treturn null;\n\t\ttry {\n\t\t\tconst evalExpression = new Function('return ' + parse(attrValue, {startRule: 'Expression'}));\n\t\t\treturn () => {\n\t\t\t\tconst isHidden = visible != Boolean(evalExpression.call(this));\n\t\t\t\tif (this.element.hasAttribute('hidden') !== isHidden) {\n\t\t\t\t\tthis.fieldElements.forEach((elem, index) => elem.disabled = isHidden || this.initialDisabled[index]);\n\t\t\t\t\tthis.element.toggleAttribute('hidden', isHidden);\n\t\t\t\t}\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tthrow new Error(`Error while parsing <... show-if/hide-if=\"${attrValue}\">: ${error}.`);\n\t\t}\n\t}\n\n\tprivate evalDisable(): Function {\n\t\tconst attrValue = this.fieldElements[0]?.getAttribute('disable-if');\n\t\tif (typeof attrValue !== 'string')\n\t\t\treturn () => {};\n\t\ttry {\n\t\t\tconst evalExpression = new Function('return ' + parse(attrValue, {startRule: 'Expression'}));\n\t\t\treturn () => {\n\t\t\t\tconst disable = evalExpression.call(this);\n\t\t\t\tthis.fieldElements.forEach((elem, index) => elem.disabled = disable || this.initialDisabled[index]);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthrow new Error(`Error while parsing <... disable-if=\"${attrValue}\">: ${error}.`);\n\t\t}\n\t}\n\n\tprivate getDataValue(path: Array<string>) {\n\t\treturn this.form.getDataValue(path);\n\t}\n\n\tpublic inputted() {\n\t\tif (this.pristineValue.equals(this.aggregateValue())) {\n\t\t\tthis.setPristine();\n\t\t} else {\n\t\t\tthis.setDirty();\n\t\t}\n\t\tthis.clearCustomError();\n\t}\n\n\tprivate clearCustomError() {\n\t\tthis.form.clearCustomErrors();\n\t\tif (this.errorPlaceholder) {\n\t\t\tthis.errorPlaceholder.innerHTML = '';\n\t\t}\n\t\tfor (const element of this.fieldElements) {\n\t\t\tif (element.validity.customError)\n\t\t\t\telement.setCustomValidity('');\n\t\t}\n\t}\n\n\tpublic resetToInitial() {\n\t\tif (this.fileUploader) {\n\t\t\tthis.fileUploader.resetToInitial();\n\t\t}\n\t\tthis.untouch();\n\t\tthis.setPristine();\n\t\tthis.clearCustomError();\n\t}\n\n\tpublic disableAllFields() {\n\t\tthis.fieldElements.forEach(elem => elem.disabled = true);\n\t}\n\n\tpublic reenableAllFields() {\n\t\tthis.fieldElements.forEach((elem, index) => elem.disabled = this.initialDisabled[index]);\n\t}\n\n\tpublic touch() {\n\t\tthis.element.classList.remove('dj-untouched');\n\t\tthis.element.classList.remove('dj-validated');\n\t\tthis.element.classList.add('dj-touched');\n\t}\n\n\tprivate untouch() {\n\t\tthis.element.classList.remove('dj-touched');\n\t\tthis.element.classList.add('dj-untouched');\n\t}\n\n\tprivate setDirty() {\n\t\tthis.element.classList.remove('dj-submitted');\n\t\tthis.element.classList.remove('dj-pristine');\n\t\tthis.element.classList.add('dj-dirty');\n\t}\n\n\tprivate setPristine() {\n\t\tthis.element.classList.remove('dj-dirty');\n\t\tthis.element.classList.add('dj-pristine');\n\t}\n\n\tpublic setSubmitted() {\n\t\tthis.element.classList.add('dj-submitted');\n\t}\n\n\tpublic validate() {\n\t\tlet element: FieldElement | null = null;\n\t\tfor (element of this.fieldElements) {\n\t\t\tif (!element.validity.valid)\n\t\t\t\tbreak;\n\t\t}\n\t\tif (element && !element.validity.valid) {\n\t\t\tfor (const [key, message] of this.errorMessages) {\n\t\t\t\tif (element.validity[key as keyof ValidityState]) {\n\t\t\t\t\tif (this.form.formset.showFeedbackMessages && this.errorPlaceholder) {\n\t\t\t\t\t\tthis.errorPlaceholder.innerHTML = message;\n\t\t\t\t\t}\n\t\t\t\t\telement = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.form.formset.showFeedbackMessages && element instanceof HTMLInputElement) {\n\t\t\t\tthis.validateInput(element);\n\t\t\t}\n\t\t}\n\t\tthis.form.validate();\n\t}\n\n\tprivate validateCheckboxSelectMultiple() {\n\t\tlet validity = false;\n\t\tfor (const inputElement of this.fieldElements) {\n\t\t\tif (inputElement.type !== 'checkbox')\n\t\t\t\tthrow new Error(\"Expected input element of type 'checkbox'.\");\n\t\t\tif ((inputElement as HTMLInputElement).checked) {\n\t\t\t\tvalidity = true;\n\t\t\t} else {\n\t\t\t\tinputElement.setCustomValidity(this.errorMessages.get('customError') ?? '');\n\t\t\t}\n\t\t}\n\t\tif (validity) {\n\t\t\tfor (const inputElement of this.fieldElements) {\n\t\t\t\tinputElement.setCustomValidity('');\n\t\t\t}\n\t\t} else if (this.pristineValue !== undefined && this.errorPlaceholder && this.form.formset.showFeedbackMessages) {\n\t\t\tthis.errorPlaceholder.innerHTML = this.errorMessages.get('customError') ?? '';\n\t\t}\n\t\tthis.form.validate();\n\t\treturn validity;\n\t}\n\n\tprivate validateInput(inputElement: HTMLInputElement) {\n\t\t// By default, HTML input fields do not validate their bound value regarding their\n\t\t// min- and max-length. Therefore this validation must be performed by the client.\n\t\tif (inputElement.type === 'text' && inputElement.value) {\n\t\t\tif (inputElement.minLength > 0 && inputElement.value.length < inputElement.minLength) {\n\t\t\t\tif (this.errorPlaceholder) {\n\t\t\t\t\tthis.errorPlaceholder.innerHTML = this.errorMessages.get('tooShort') ?? '';\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (inputElement.maxLength > 0 && inputElement.value.length > inputElement.maxLength) {\n\t\t\t\tif (this.errorPlaceholder) {\n\t\t\t\t\tthis.errorPlaceholder.innerHTML = this.errorMessages.get('tooLong') ?? '';\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif (inputElement.type === 'file' && this.fileUploader) {\n\t\t\tif (this.fileUploader.inProgress()) {\n\t\t\t\t// seems that file upload is still in progress => field shall not be valid\n\t\t\t\tif (this.errorPlaceholder) {\n\t\t\t\t\tthis.errorPlaceholder.innerHTML = this.errorMessages.get('typeMismatch') ?? '';\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate validateBoundField() {\n\t\t// By default, HTML input fields do not validate their bound value regarding their min-\n\t\t// and max-length. Therefore this validation must be performed separately.\n\t\tif (this.fieldElements.length !== 1 || !(this.fieldElements[0] instanceof HTMLInputElement))\n\t\t\treturn;\n\t\tconst inputElement = this.fieldElements[0];\n\t\tif (!inputElement.value)\n\t\t\treturn;\n\t\tif (inputElement.type === 'text') {\n\t\t\tif (inputElement.minLength > 0 && inputElement.value.length < inputElement.minLength)\n\t\t\t\treturn inputElement.setCustomValidity(this.errorMessages.get('tooShort') ?? '');\n\t\t\tif (inputElement.maxLength > 0 && inputElement.value.length > inputElement.maxLength)\n\t\t\t\treturn inputElement.setCustomValidity(this.errorMessages.get('tooLong') ?? '');\n\t\t}\n\t}\n\n\tpublic setValidationError(): boolean {\n\t\tlet element: FieldElement | undefined;\n\t\tfor (element of this.fieldElements) {\n\t\t\tif (!element.validity.valid)\n\t\t\t\tbreak;\n\t\t}\n\t\tfor (const [key, message] of this.errorMessages) {\n\t\t\tif (element && element.validity[key as ErrorKey]) {\n\t\t\t\tif (this.errorPlaceholder) {\n\t\t\t\t\tthis.errorPlaceholder.innerHTML = message;\n\t\t\t\t\telement.setCustomValidity(message);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif (element instanceof HTMLInputElement)\n\t\t\treturn this.validateInput(element);\n\t\treturn true;\n\t}\n\n\tpublic reportCustomError(message: string) {\n\t\tif (this.errorPlaceholder) {\n\t\t\tthis.errorPlaceholder.innerHTML = message;\n\t\t}\n\t\tthis.fieldElements[0].setCustomValidity(message);\n\t}\n\n\tpublic reportFailedUpload() {\n\t\tif (this.errorPlaceholder) {\n\t\t\tthis.errorPlaceholder.innerHTML = this.errorMessages.get('badInput') ?? \"File upload failed\";\n\t\t}\n\t}\n}\n\n\nclass ButtonAction {\n\tconstructor(func: Function, args: Array<any>) {\n\t\tthis.func = func;\n\t\tthis.args = args;\n\t}\n\n\tpublic readonly func: Function;\n\tpublic readonly args: Array<any>;\n}\n\n\nclass DjangoButton {\n\tprivate readonly formset: DjangoFormset;\n\tprivate readonly element: HTMLButtonElement;\n\tprivate readonly initialClass: string;\n\tprivate readonly isAutoDisabled: boolean;\n\tprivate readonly successActions = Array<ButtonAction>(0);\n\tprivate readonly rejectActions = Array<ButtonAction>(0);\n\tprivate readonly decoratorElement: HTMLElement | null;\n\tprivate readonly spinnerElement: HTMLElement;\n\tprivate readonly okayElement: HTMLElement;\n\tprivate readonly bummerElement: HTMLElement;\n\tprivate originalDecorator?: Node;\n\tprivate timeoutHandler?: number;\n\n\tconstructor(formset: DjangoFormset, element: HTMLButtonElement) {\n\t\tthis.formset = formset;\n\t\tthis.element = element;\n\t\tthis.initialClass = element.getAttribute('class') ?? '';\n\t\tthis.isAutoDisabled = !!JSON.parse((element.getAttribute('auto-disable') ?? 'false').toLowerCase());\n\t\tthis.decoratorElement = element.querySelector('.dj-button-decorator');\n\t\tthis.originalDecorator = this.decoratorElement?.cloneNode(true);\n\t\tthis.spinnerElement = document.createElement('i');\n\t\tthis.spinnerElement.classList.add('dj-icon', 'dj-spinner');\n\t\tthis.spinnerElement.innerHTML = spinnerIcon;\n\t\tthis.okayElement = document.createElement('i');\n\t\tthis.okayElement.classList.add('dj-icon', 'dj-okay');\n\t\tthis.okayElement.innerHTML = okayIcon;\n\t\tthis.bummerElement = document.createElement('i');\n\t\tthis.bummerElement.classList.add('dj-icon', 'dj-bummer');\n\t\tthis.bummerElement.innerHTML = bummerIcon;\n\t\tthis.parseActionsQueue(element.getAttribute('click'));\n\t\telement.addEventListener('click', () => this.clicked());\n\t}\n\n\t/**\n\t * Event handler to be called when someone clicks on the button.\n\t */\n\t// @ts-ignore\n\tprivate clicked() {\n\t\tlet promise: Promise<Response> | undefined;\n\t\tfor (const [index, action] of this.successActions.entries()) {\n\t\t\tif (!promise) {\n\t\t\t\tpromise = action.func.apply(this, action.args)();\n\t\t\t} else {\n\t\t\t\tpromise = promise.then(action.func.apply(this, action.args));\n\t\t\t}\n\t\t}\n\t\tif (promise) {\n\t\t\tfor (const [index, action] of this.rejectActions.entries()) {\n\t\t\t\tif (index === 0) {\n\t\t\t\t\tpromise = promise.catch(action.func.apply(this, action.args));\n\t\t\t\t} else {\n\t\t\t\t\tpromise = promise.then(action.func.apply(this, action.args));\n\t\t\t\t}\n\t\t\t}\n\t\t\tpromise.finally(this.restore.apply(this));\n\t\t}\n\t}\n\n\tpublic autoDisable(formValidity: Boolean) {\n\t\tif (this.isAutoDisabled) {\n\t\t\tthis.element.disabled = !formValidity;\n\t\t}\n\t}\n\n\t/**\n\t * Disable the button for further submission.\n\t */\n\t// @ts-ignore\n\tprivate disable() {\n\t\treturn (response: Response) => {\n\t\t\tthis.element.disabled = true;\n\t\t\treturn Promise.resolve(response);\n\t\t};\n\t}\n\n\t/**\n\t * Re-enable the button for further submission.\n\t */\n\t// @ts-ignore\n\tprivate enable() {\n\t\treturn (response: Response) => {\n\t\t\tthis.element.disabled = false;\n\t\t\treturn Promise.resolve(response);\n\t\t};\n\t}\n\n\t/**\n\t * Validate form content and submit to the endpoint given in element `<django-formset>`.\n\t */\n\t// @ts-ignore\n\tsubmit(data: Object | undefined) {\n\t\treturn () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.formset.submit(data).then(response =>\n\t\t\t\t\tresponse instanceof Response && response.status === 200 ? resolve(response) : reject(response)\n\t\t\t\t);\n\t\t\t});\n\t\t};\n\t}\n\n\t/**\n\t * Reset form content to their initial values.\n\t */\n\t// @ts-ignore\n\treset() {\n\t\treturn (response: Response) => {\n\t\t\tthis.formset.resetToInitial();\n\t\t\treturn Promise.resolve(response);\n\t\t};\n\t}\n\n\t// @ts-ignore\n\tprivate reload() {\n\t\treturn (response: Response) => {\n\t\t\tlocation.reload();\n\t\t\treturn Promise.resolve(response);\n\t\t};\n\t}\n\n\t/**\n\t * Proceed to a given URL, if the response object returns status code 200.\n\t * If the response object contains attribute `success_url`, proceed to that URL,\n\t * otherwise proceed to the given fallback URL.\n\t *\n\t * @param proceedUrl (optional): If set, proceed to that URL regardless of the\n\t * response status.\n\t */\n\t// @ts-ignore\n\tprivate proceed(proceedUrl: string | undefined) {\n\t\treturn (response: Response) => {\n\t\t\tif (typeof proceedUrl === 'string' && proceedUrl.length > 0) {\n\t\t\t\tlocation.href = proceedUrl;\n\t\t\t} else if (response instanceof Response && response.status === 200) {\n\t\t\t\tresponse.json().then(body => {\n\t\t\t\t\tif (body.success_url) {\n\t\t\t\t\t\tlocation.href = body.success_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Neither a success-, nor a proceed-URL are given.\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn Promise.resolve(response);\n\t\t}\n\t}\n\n\t/**\n\t * Delay execution of the next task.\n\t *\n\t * @param ms: Time to wait in milliseconds.\n\t */\n\t// @ts-ignore\n\tprivate delay(ms: number) {\n\t\treturn (response: Response) => new Promise(resolve => this.timeoutHandler = window.setTimeout(() => {\n\t\t\tthis.timeoutHandler = undefined;\n\t\t\tresolve(response);\n\t\t}, ms));\n\t}\n\n\t/**\n\t * Replace the button's decorator against a spinner icon.\n\t */\n\t// @ts-ignore\n\tprivate spinner() {\n\t\treturn (response: Response) => {\n\t\t\tthis.decoratorElement?.replaceChildren(this.spinnerElement);\n\t\t\treturn Promise.resolve(response);\n\t\t};\n\t}\n\n\t/**\n\t * Replace the button's decorator against an okay animation.\n\t */\n\t// @ts-ignore\n\tprivate okay(ms: number | undefined) {\n\t\treturn this.decorate(this.okayElement, ms);\n\t}\n\n\t/**\n\t * Replace the button's decorator against a bummer animation.\n\t */\n\t// @ts-ignore\n\tprivate bummer(ms: number | undefined) {\n\t\treturn this.decorate(this.bummerElement, ms);\n\t}\n\n\t/**\n\t * Add a CSS class to the button element.\n\t *\n\t * @param cssClass: The CSS class.\n\t */\n\t// @ts-ignore\n\tprivate addClass(cssClass: string) {\n\t\treturn (response: Response) => {\n\t\t\tthis.element.classList.add(cssClass);\n\t\t\treturn Promise.resolve(response);\n\t\t};\n\t}\n\n\t/**\n\t * Remove a CSS class from the button element.\n\t *\n\t * @param cssClass: The CSS class.\n\t */\n\t// @ts-ignore\n\tprivate removeClass(cssClass: string) {\n\t\treturn (response: Response) => {\n\t\t\tthis.element.classList.remove(cssClass);\n\t\t\treturn Promise.resolve(response);\n\t\t};\n\t}\n\n\t/**\n\t * Add a CSS class to the button element or remove it if it is already set.\n\t *\n\t * @param cssClass: The CSS class.\n\t */\n\t// @ts-ignore\n\tprivate toggleClass(cssClass: string) {\n\t\treturn (response: Response) => {\n\t\t\tthis.element.classList.toggle(cssClass);\n\t\t\treturn Promise.resolve(response);\n\t\t};\n\t}\n\n\t/**\n\t * Emit an event to the DOM.\n\t *\n\t * @param event: The named event.\n\t */\n\t// @ts-ignore\n\tprivate emit(namedEvent: string, detail: Object | undefined) {\n\t\treturn (response: Response) => {\n\t\t\tconst options = {bubbles: true, cancelable: true};\n\t\t\tif (detail !== undefined) {\n\t\t\t\tObject.assign(options, {detail: detail});\n\t\t\t\tthis.element.dispatchEvent(new CustomEvent(namedEvent, options));\n\t\t\t} else {\n\t\t\t\tthis.element.dispatchEvent(new Event(namedEvent, options));\n\t\t\t}\n\t\t\treturn Promise.resolve(response);\n\t\t};\n\t}\n\n\t/**\n\t * For debugging purpose only: Intercept, log and forward the response object to the next handler.\n \t */\n\t// @ts-ignore\n\tprivate intercept() {\n\t\treturn (response: Response) => {\n\t\t\tconsole.info(response);\n\t\t\treturn Promise.resolve(response);\n\t\t}\n\t}\n\n\t/**\n\t * Clear all errors in the current django-formset.\n \t */\n\t// @ts-ignore\n\tprivate clearErrors() {\n\t\treturn (response: Response) => {\n\t\t\tthis.formset.clearErrors();\n\t\t\treturn Promise.resolve(response);\n\t\t}\n\t}\n\n\t/**\n\t * Scroll to first element reporting an error.\n \t */\n\t// @ts-ignore\n\tprivate scrollToError() {\n\t\treturn (response: Response) => {\n\t\t\tconst errorReportElement = this.formset.findFirstErrorReport();\n\t\t\tif (errorReportElement) {\n\t\t\t\terrorReportElement.scrollIntoView({behavior: 'smooth'});\n\t\t\t}\n\t\t\treturn Promise.resolve(response);\n\t\t}\n\t}\n\n\t/**\n\t * Dummy action to be called in case of empty actionsQueue.\n \t */\n\tprivate noop() {\n\t\treturn (response: Response) => {\n\t\t\treturn Promise.resolve(response);\n\t\t}\n\t}\n\n\t// @ts-ignore\n\tprivate restore() {\n\t\treturn () => {\n\t\t\tthis.element.disabled = false;\n\t\t\tthis.element.setAttribute('class', this.initialClass);\n\t\t\tif (this.originalDecorator) {\n\t\t\t\tthis.decoratorElement?.replaceChildren(...this.originalDecorator.cloneNode(true).childNodes);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate decorate(decorator: HTMLElement, ms: number | undefined) {\n\t\treturn (response: Response) => {\n\t\t\tthis.decoratorElement?.replaceChildren(decorator);\n\t\t\tif (typeof ms !== 'number')\n\t\t\t\treturn Promise.resolve(response);\n\t\t\treturn new Promise(resolve => this.timeoutHandler = window.setTimeout(() => {\n\t\t\t\tthis.timeoutHandler = undefined;\n\t\t\t\tresolve(response);\n\t\t\t}, ms));\n\t\t}\n\t}\n\n\tprivate parseActionsQueue(actionsQueue: string | null) {\n\t\tif (!actionsQueue)\n\t\t\treturn;\n\n\t\tlet self = this;\n\t\tfunction createActions(actions: Array<ButtonAction>, chain: Array<any>) {\n\t\t\tfor (let action of chain) {\n\t\t\t\tconst func = self[action.funcname as keyof DjangoButton];\n\t\t\t\tif (typeof func !== 'function')\n\t\t\t\t\tthrow new Error(`Unknown function '${action.funcname}'.`);\n\t\t\t\tactions.push(new ButtonAction(func, action.args));\n\t\t\t}\n\t\t\tif (actions.length === 0) {\n\t\t\t\t// the actionsQueue must resolve at least once\n\t\t\t\tactions.push(new ButtonAction(self.noop, []));\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tconst ast = parse(actionsQueue, {startRule: 'Actions'});\n\t\t\tcreateActions(this.successActions, ast.successChain);\n\t\t\tcreateActions(this.rejectActions, ast.rejectChain);\n\t\t} catch (error) {\n\t\t\tthrow new Error(`Error while parsing <button click=\"${actionsQueue}\">: ${error}.`);\n\t\t}\n\t}\n\n\tpublic abortAction() {\n\t\tif (this.timeoutHandler) {\n\t\t\tclearTimeout(this.timeoutHandler);\n\t\t\tthis.timeoutHandler = undefined;\n\t\t}\n\t}\n}\n\n\nclass DjangoFieldset {\n\tpublic readonly form: DjangoForm;\n\tprivate readonly element: HTMLFieldSetElement;\n\tprivate readonly updateVisibility: Function;\n\tprivate readonly updateDisabled: Function;\n\n\tconstructor(form: DjangoForm, element: HTMLFieldSetElement) {\n\t\tthis.form = form;\n\t\tthis.element = element;\n\t\tthis.updateVisibility = this.evalVisibility('show-if', true) ?? this.evalVisibility('hide-if', false) ?? function() {};\n\t\tthis.updateDisabled = this.evalDisable();\n\t}\n\n\tprivate evalVisibility(attribute: string, visible: boolean): Function | null {\n\t\tconst attrValue = this.element.getAttribute(attribute);\n\t\tif (typeof attrValue !== 'string')\n\t\t\treturn null;\n\t\ttry {\n\t\t\tconst evalExpression = new Function('return ' + parse(attrValue, {startRule: 'Expression'}));\n\t\t\treturn () => {\n\t\t\t\tconst isHidden = visible != Boolean(evalExpression.call(this));\n\t\t\t\tif (this.element.hasAttribute('hidden') !== isHidden) {\n\t\t\t\t\tthis.element.toggleAttribute('hidden', isHidden);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthrow new Error(`Error while parsing <fieldset show-if/hide-if=\"${attrValue}\">: ${error}.`);\n\t\t}\n\t}\n\n\tprivate evalDisable(): Function {\n\t\tconst attrValue = this.element.getAttribute('disable-if');\n\t\tif (typeof attrValue !== 'string')\n\t\t\treturn () => {};\n\t\ttry {\n\t\t\tconst evalExpression = new Function('return ' + parse(attrValue, {startRule: 'Expression'}));\n\t\t\treturn () => this.element.disabled = evalExpression.call(this);\n\t\t} catch (error) {\n\t\t\tthrow new Error(`Error while parsing <fieldset disable-if=\"${attrValue}\">: ${error}.`);\n\t\t}\n\t}\n\n\tprivate getDataValue(path: Array<string>) {\n\t\treturn this.form.getDataValue(path);\n\t}\n\n\tpublic updateOperability() {\n\t\tthis.updateVisibility();\n\t\tthis.updateDisabled();\n\t}\n}\n\n\nclass DjangoForm {\n\tpublic readonly formset: DjangoFormset;\n\tpublic readonly element: HTMLFormElement;\n\tpublic readonly path: Array<string>;\n\tpublic readonly fieldset: DjangoFieldset | null;\n\tprivate readonly errorList: Element | null = null;\n\tprivate readonly errorPlaceholder: Element | null = null;\n\tpublic readonly fieldGroups = Array<FieldGroup>(0);\n\tpublic readonly hiddenInputFields = Array<HTMLInputElement>(0);\n\tpublic markedForRemoval = false;\n\n\tconstructor(formset: DjangoFormset, element: HTMLFormElement) {\n\t\tthis.formset = formset;\n\t\tthis.element = element;\n\t\tthis.path = this.name?.split('.') ?? [];\n\t\tconst fieldsetElement = element.querySelector('fieldset');\n\t\tthis.fieldset = fieldsetElement ? new DjangoFieldset(this, fieldsetElement) : null;\n\t\tconst placeholder = element.querySelector('.dj-form-errors > .dj-errorlist > .dj-placeholder');\n\t\tif (placeholder) {\n\t\t\tthis.errorList = placeholder.parentElement;\n\t\t\tthis.errorPlaceholder = this.errorList!.removeChild(placeholder);\n\t\t}\n\t}\n\n\taggregateValues(): Map<string, FieldValue> {\n\t\tconst data = new Map<string, FieldValue>();\n\t\tfor (const fieldGroup of this.fieldGroups) {\n\t\t\tdata.set(fieldGroup.name, fieldGroup.aggregateValue());\n\t\t}\n\t\t// hidden fields are not handled by a django-field-group\n\t\tfor (const element of this.hiddenInputFields.filter(e => e.type === 'hidden')) {\n\t\t\tdata.set(element.name, element.value);\n\t\t}\n\t\treturn data;\n\t}\n\n\tpublic get name() : string | null {\n\t\treturn this.element.getAttribute('name');\n\t}\n\n\tpublic get formId() : string | null {\n\t\treturn this.element.getAttribute('id');\n\t}\n\n\tpublic getAbsPath() : Array<string> {\n\t\treturn ['formset_data', ...this.path];\n\t}\n\n\tpublic getDataValue(path: Array<string>) {\n\t\tif (path[0] !== '')\n\t\t\treturn this.formset.getDataValue(path);\n\n\t\t// path is relative, so concatenate it to the form's path\n\t\tconst absPath = [...this.path];\n\t\tconst relPath = path.filter(part => part !== '');\n\t\tconst delta = path.length - relPath.length;\n\t\tabsPath.splice(absPath.length - delta + 1);\n\t\tabsPath.push(...relPath);\n\t\treturn this.formset.getDataValue(absPath);\n\t}\n\n\tpublic updateOperability() {\n\t\tthis.fieldset?.updateOperability();\n\t\tfor (const fieldGroup of this.fieldGroups) {\n\t\t\tfieldGroup.updateOperability();\n\t\t}\n\t}\n\n\tsetSubmitted() {\n\t\tfor (const fieldGroup of this.fieldGroups) {\n\t\t\tfieldGroup.setSubmitted();\n\t\t}\n\t}\n\n\tvalidate() {\n\t\tthis.formset.validate();\n\t}\n\n\tisValid() {\n\t\tlet isValid = true;\n\t\tfor (const fieldGroup of this.fieldGroups) {\n\t\t\tisValid = fieldGroup.setValidationError() && isValid;\n\t\t}\n\t\treturn isValid;\n\t}\n\n\tcheckValidity() {\n\t\treturn this.element.checkValidity();\n\t}\n\n\treportValidity() {\n\t\tthis.element.reportValidity();\n\t}\n\n\tclearCustomErrors() {\n\t\twhile (this.errorList && this.errorList.lastChild) {\n\t\t\tthis.errorList.removeChild(this.errorList.lastChild);\n\t\t}\n\t}\n\n\tresetToInitial() {\n\t\tthis.element.reset();\n\t\tfor (const fieldGroup of this.fieldGroups) {\n\t\t\tfieldGroup.resetToInitial();\n\t\t}\n\t}\n\n\ttoggleForRemoval(remove: boolean) {\n\t\tthis.markedForRemoval = remove;\n\t\tfor (const fieldGroup of this.fieldGroups) {\n\t\t\tif (remove) {\n\t\t\t\tfieldGroup.resetToInitial();\n\t\t\t\tfieldGroup.disableAllFields();\n\t\t\t} else {\n\t\t\t\tfieldGroup.reenableAllFields();\n\t\t\t}\n\t\t}\n\t}\n\n\treportCustomErrors(errors: Map<string, Array<string>>) {\n\t\tthis.clearCustomErrors();\n\t\tconst nonFieldErrors = errors.get(NON_FIELD_ERRORS);\n\t\tif (this.errorList && nonFieldErrors instanceof Array && this.errorPlaceholder) {\n\t\t\tfor (const message of nonFieldErrors) {\n\t\t\t\tconst item = this.errorPlaceholder.cloneNode() as Element;\n\t\t\t\titem.innerHTML = message;\n\t\t\t\tthis.errorList.appendChild(item);\n\t\t\t}\n\t\t}\n\t\tfor (const fieldGroup of this.fieldGroups) {\n\t\t\tconst fieldErrors = errors.get(fieldGroup.name);\n\t\t\tif (fieldErrors instanceof Array && fieldErrors.length > 0) {\n\t\t\t\tfieldGroup.reportCustomError(fieldErrors[0]);\n\t\t\t}\n\t\t}\n\t}\n\n\tfindFirstErrorReport() : Element | null {\n\t\tif (this.errorList?.textContent)\n\t\t\treturn this.element;  // report a non-field error\n\t\tfor (const fieldGroup of this.fieldGroups) {\n\t\t\tif (fieldGroup.errorPlaceholder?.textContent)\n\t\t\t\treturn fieldGroup.element;\n\t\t}\n\t\treturn null;\n\t}\n}\n\n\nclass DjangoFormCollection {\n\tprotected readonly formset: DjangoFormset;\n\tprotected readonly element: HTMLElement;\n\tprotected readonly parent?: DjangoFormCollection;\n\tprotected forms = Array<DjangoForm>(0);\n\tpublic formCollectionTemplate?: DjangoFormCollectionTemplate;\n\tpublic readonly children = Array<DjangoFormCollection>(0);\n\tpublic markedForRemoval = false;\n\n\tconstructor(formset: DjangoFormset, element: HTMLElement, parent?: DjangoFormCollection, justAdded?: boolean) {\n\t\tthis.formset = formset;\n\t\tthis.element = element;\n\t\tthis.parent = parent;\n\t\tthis.findFormCollections();\n\t}\n\n\tprivate findFormCollections() {\n\t\t// find all immediate elements <django-form-collection ...> belonging to the current <django-form-collection>\n\t\tfor (const childElement of DjangoFormCollection.getChildCollections(this.element)) {\n\t\t\tthis.children.push(childElement.hasAttribute('sibling-position')\n\t\t\t\t? new DjangoFormCollectionSibling(this.formset, childElement, this)\n\t\t\t\t: new DjangoFormCollection(this.formset, childElement, this)\n\t\t\t);\n\t\t}\n\t\tfor (const sibling of this.children) {\n\t\t\tsibling.updateRemoveButtonAttrs();\n\t\t}\n\t\tthis.formCollectionTemplate = DjangoFormCollectionTemplate.findFormCollectionTemplate(this.formset, this.element, this);\n\t}\n\n\tpublic assignForms(forms: Array<DjangoForm>) {\n\t\tthis.forms = forms.filter(form => form.element.parentElement?.isEqualNode(this.element));\n\t\tfor (const formCollection of this.children) {\n\t\t\tformCollection.assignForms(forms);\n\t\t}\n\t}\n\n\tpublic updateRemoveButtonAttrs() {}\n\n\tprotected disconnect() {\n\t\tthis.forms.forEach(form => this.formset.removeForm(form));\n\t\tthis.children.forEach(child => child.disconnect());\n\t\tthis.formCollectionTemplate?.disconnect();\n\t\tthis.element.remove();\n\t}\n\n\tprotected toggleForRemoval(remove: boolean) {\n\t\tthis.markedForRemoval = remove;\n\t\tfor (const form of this.forms) {\n\t\t\tform.toggleForRemoval(remove);\n\t\t}\n\t\tfor (const formCollection of this.children) {\n\t\t\tformCollection.toggleForRemoval(remove);\n\t\t}\n\t\tif (this.formCollectionTemplate) {\n\t\t\tthis.formCollectionTemplate.markedForRemoval = remove;\n\t\t\tthis.formCollectionTemplate.updateAddButtonAttrs();\n\t\t}\n\t\tthis.element.classList.toggle('dj-marked-for-removal', this.markedForRemoval);\n\t}\n\n\tprotected resetToInitial() : boolean {\n\t\tthis.toggleForRemoval(false);\n\t\tDjangoFormCollection.resetCollectionsToInitial(this.children);\n\t\tif (this.formCollectionTemplate) {\n\t\t\tconst prefix = this.formCollectionTemplate.prefix;\n\t\t\tconst pathIndex = prefix === '0' ? 0 : prefix.split('.').length;\n\t\t\tthis.children.forEach((sibling, position) => sibling.repositionForms(pathIndex, position));\n\t\t\tthis.formCollectionTemplate.updateAddButtonAttrs();\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic repositionSiblings() {}\n\n\tpublic repositionForms(pathIndex: number, pathPart: number) {\n\t\tthis.forms.forEach(form => {\n\t\t\tform.path[pathIndex] = String(pathPart);\n\t\t\tform.element.setAttribute('name', form.path.join('.'));\n\t\t});\n\t\tthis.children.forEach(child => child.repositionForms(pathIndex, pathPart));\n\t}\n\n\tstatic getChildCollections(element: Element) : NodeListOf<HTMLElement> | [] {\n\t\t// traverse tree to find first occurrence of a <django-form-collection> and if so, return it with its siblings\n\t\tconst wrapper = element.querySelector('django-form-collection')?.parentElement;\n\t\treturn wrapper ? wrapper.querySelectorAll(':scope > django-form-collection') : [];\n\t}\n\n\tstatic resetCollectionsToInitial(formCollections: Array<DjangoFormCollection>) {\n\t\tconst removeCollections = Array<DjangoFormCollection>(0);\n\t\tfor (const collection of formCollections) {\n\t\t\tif (collection.resetToInitial()) {\n\t\t\t\tremoveCollections.push(collection);\n\t\t\t}\n\t\t}\n\t\tremoveCollections.forEach(collection => formCollections.splice(formCollections.indexOf(collection), 1));\n\t\tformCollections.sort((l, r) => {\n\t\t\treturn l instanceof DjangoFormCollectionSibling && r instanceof DjangoFormCollectionSibling ? l.initialPosition - r.initialPosition : 0;\n\t\t});\n\n\t\t// undo DOM sorting previously changed by SortableJS\n\t\tlet prevElement: HTMLElement | null = null;\n\t\tfor (const collection of formCollections) {\n\t\t\tif (collection instanceof DjangoFormCollectionSibling) {\n\t\t\t\tif (collection.initialPosition === 0) {\n\t\t\t\t\tcollection.element.parentElement?.insertAdjacentElement('afterbegin', collection.element);\n\t\t\t\t} else {\n\t\t\t\t\tprevElement?.insertAdjacentElement('afterend', collection.element);\n\t\t\t\t}\n\t\t\t\tprevElement = collection.element;\n\t\t\t}\n\t\t}\n\t\tformCollections.forEach(collection => collection.repositionSiblings());\n\t}\n}\n\n\nclass DjangoFormCollectionSibling extends DjangoFormCollection {\n\tpublic position: number;\n\tpublic readonly initialPosition: number;\n\tprivate readonly minSiblings: number = 0;\n\tpublic readonly maxSiblings: number | null = null;\n\tprivate readonly removeButton: HTMLButtonElement;\n\tprivate justAdded = false;\n\n\tconstructor(formset: DjangoFormset, element: HTMLElement, parent?: DjangoFormCollection, justAdded?: boolean) {\n\t\tsuper(formset, element, parent);\n\t\tthis.justAdded = justAdded ?? false;\n\t\tconst position = element.getAttribute('sibling-position');\n\t\tif (!position)\n\t\t\tthrow new Error(\"Missing argument 'sibling-position' in <django-form-collection>\")\n\t\tthis.position = this.initialPosition = parseInt(position);\n\t\tconst minSiblings = element.getAttribute('min-siblings');\n\t\tif (!minSiblings)\n\t\t\tthrow new Error(\"Missing argument 'min-siblings' in <django-form-collection>\")\n\t\tthis.minSiblings = parseInt(minSiblings);\n\t\tconst maxSiblings = element.getAttribute('max-siblings');\n\t\tif (maxSiblings) {\n\t\t\tthis.maxSiblings = parseInt(maxSiblings);\n\t\t}\n\t\tconst removeButton = element.querySelector(':scope > button.remove-collection');\n\t\tif (!removeButton)\n\t\t\tthrow new Error('<django-form-collection> with siblings requires child element <button class=\"remove-collection\">');\n\t\tthis.removeButton = removeButton as HTMLButtonElement;\n\t\tthis.removeButton.addEventListener('click', this.removeCollection);\n\t}\n\n\tprivate removeCollection = () => {\n\t\tconst siblings = this.parent?.children ?? this.formset.formCollections;\n\t\tif (this.justAdded) {\n\t\t\tthis.disconnect();\n\t\t\tsiblings.splice(siblings.indexOf(this), 1);\n\t\t\tthis.repositionSiblings();\n\t\t} else {\n\t\t\tthis.toggleForRemoval(!this.markedForRemoval);\n\t\t\tthis.removeButton.disabled = !this.markedForRemoval;\n\t\t}\n\t\tsiblings.forEach(sibling => sibling.updateRemoveButtonAttrs());\n\t\tconst formCollectionTemplate = this.parent?.formCollectionTemplate ?? this.formset.formCollectionTemplate;\n\t\tformCollectionTemplate!.updateAddButtonAttrs();\n\t}\n\n\tprotected disconnect() {\n\t\tthis.removeButton!.removeEventListener('click', this.removeCollection);\n\t\tsuper.disconnect();\n\t}\n\n\tpublic repositionSiblings() {\n\t\tconst siblings = this.parent?.children ?? this.formset.formCollections;\n\t\tsiblings.forEach((sibling, position) => {\n\t\t\tif (sibling instanceof DjangoFormCollectionSibling) {\n\t\t\t\tsibling.position = position;\n\t\t\t\tsibling.element.setAttribute('sibling-position', String(position));\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic updateRemoveButtonAttrs() {\n\t\tif (!this.removeButton)\n\t\t\treturn;\n\t\tconst siblings = this.parent?.children ?? this.formset.formCollections;\n\t\tconst numActiveSiblings = siblings.filter(s => !s.markedForRemoval).length;\n\t\tif (this.markedForRemoval) {\n\t\t\tif (this.maxSiblings) {\n\t\t\t\tthis.removeButton.disabled = numActiveSiblings >= this.maxSiblings;\n\t\t\t} else {\n\t\t\t\tthis.removeButton.disabled = false;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.removeButton.disabled = numActiveSiblings <= this.minSiblings;\n\t\t}\n\t}\n\n\tprotected resetToInitial() : boolean {\n\t\tif (this.justAdded) {\n\t\t\tthis.disconnect();\n\t\t\treturn true;\n\t\t} else {\n\t\t\tsuper.resetToInitial();\n\t\t\treturn false;\n\t\t}\n\t}\n}\n\n\nclass DjangoFormCollectionTemplate {\n\tprivate readonly formset: DjangoFormset;\n\tprivate readonly element: HTMLTemplateElement;\n\tprivate readonly parent?: DjangoFormCollection;\n\tprivate readonly renderEmptyCollection: Function;\n\tprivate readonly addButton?: HTMLButtonElement;\n\tprivate readonly maxSiblings: number | null = null;\n\tprivate readonly baseContext = new Map<string, string>();\n\tpublic readonly prefix: string;\n\tpublic markedForRemoval = false;\n\n\tconstructor(formset: DjangoFormset, element: HTMLTemplateElement, parent?: DjangoFormCollection) {\n\t\tthis.formset = formset;\n\t\tthis.element = element;\n\t\tthis.parent = parent;\n\t\tconst matches = element.innerHTML.matchAll(/\\$\\{([^} ]+)\\}/g);\n\t\tfor (const match of matches) {\n\t\t\tthis.baseContext.set(match[1], match[0]);\n\t\t}\n\t\tconst prefix = element.getAttribute('prefix');\n\t\tif (!prefix)\n\t\t\tthrow new Error('<template class=\"empty-collection\" ...> requires attribute \"prefix\"');\n\t\tthis.prefix = prefix;\n\t\tformset.pushTemplatePrefix(this.prefix);\n\t\tthis.renderEmptyCollection = template(element.innerHTML);\n\t\tif (element.nextElementSibling?.matches('button.add-collection')) {\n\t\t\tthis.addButton = element.nextElementSibling as HTMLButtonElement;\n\t\t\tthis.addButton.addEventListener('click', this.appendFormCollectionSibling);\n\t\t}\n\t\tconst innerCollection = this.element.content.querySelector('django-form-collection');\n\t\tconst maxSiblings = innerCollection?.getAttribute('max-siblings');\n\t\tif (maxSiblings) {\n\t\t\tthis.maxSiblings = parseInt(maxSiblings);\n\t\t}\n\t\tif (element.hasAttribute('sortable')) {\n\t\t\tnew Sortable(element.parentElement!, {\n\t\t\t\tanimation: 150,\n\t\t\t\thandle: 'django-form-collection[sibling-position]:not(.dj-marked-for-removal) > .collection-drag-handle',\n\t\t\t\tdraggable: 'django-form-collection[sibling-position]',\n\t\t\t\tselectedClass: 'selected',\n\t\t\t\tghostClass: 'dj-ghost-collection',\n\t\t\t\tonEnd: this.resortSiblings,\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate resortSiblings = (event: SortableEvent) => {\n\t\tconst oldIndex = event.oldDraggableIndex ?? NaN;\n\t\tconst newIndex = event.newDraggableIndex ?? NaN;\n\t\tif (!isFinite(oldIndex) || !isFinite(newIndex) || oldIndex === newIndex)\n\t\t\treturn;\n\t\tconst siblings = this.parent?.children ?? this.formset.formCollections;\n\t\tif (siblings.at(oldIndex) instanceof DjangoFormCollectionSibling) {\n\t\t\tconst extracted = siblings.splice(oldIndex, 1);\n\t\t\tsiblings.splice(newIndex, 0, ...extracted);\n\t\t\textracted.at(0)!.repositionSiblings();\n\t\t\tconst pathIndex = this.prefix === '0' ? 0 : this.prefix.split('.').length;\n\t\t\tsiblings.forEach((sibling, position) => sibling.repositionForms(pathIndex, position));\n\t\t\tthis.formset.validate();\n\t\t}\n\t}\n\n\tprivate appendFormCollectionSibling = () => {\n\t\tconst context = Object.fromEntries(this.baseContext);\n\t\tcontext['position'] = (this.getHighestPosition() + 1).toString();\n\t\t// this context rewriting is necessary to render nested templates properly.\n\t\t// the hard-coded limit of 10 nested levels should be more than anybody ever will need\n\t\tcontext['position_1'] = '${position}'\n\t\tfor (let k = 1; k < 10; ++k) {\n\t\t\tcontext[`position_${k + 1}`] = `$\\{position_${k}\\}`;\n\t\t}\n\t\tconst renderedHTML = this.renderEmptyCollection(context);\n\t\tthis.element.insertAdjacentHTML('beforebegin', renderedHTML);\n\t\tconst newCollectionElement = this.element.previousElementSibling;\n\t\tif (!(newCollectionElement instanceof HTMLElement))\n\t\t\tthrow new Error(\"Unable to insert empty <django-form-collection> element.\");\n\t\tconst siblings = this.parent?.children ?? this.formset.formCollections;\n\t\tsiblings.push(new DjangoFormCollectionSibling(this.formset, newCollectionElement, this.parent, true));\n\t\tthis.formset.findForms(newCollectionElement);\n\t\tthis.formset.assignFieldsToForms(newCollectionElement);\n\t\tthis.formset.assignFormsToCollections();\n\t\tthis.formset.validate();\n\t\tsiblings.forEach(sibling => sibling.updateRemoveButtonAttrs());\n\t\tthis.updateAddButtonAttrs();\n\t}\n\n\tprivate getHighestPosition() : number {\n\t\t// look for the highest position number inside interconnected DjangoFormCollectionSiblings\n\t\tlet position = -1;\n\t\tconst children = this.parent ? this.parent.children : this.formset.formCollections;\n\t\tfor (const sibling of children.filter(s => s instanceof DjangoFormCollectionSibling)) {\n\t\t\tposition = Math.max(position, (sibling as DjangoFormCollectionSibling).position);\n\t\t}\n\t\treturn position;\n\t}\n\n\tpublic disconnect() {\n\t\tthis.formset.popTemplatePrefix(this.prefix);\n\t\tthis.addButton?.removeEventListener('click', this.appendFormCollectionSibling);\n\t}\n\n\tpublic updateAddButtonAttrs() {\n\t\tif (!this.addButton)\n\t\t\treturn;\n\t\tif (this.markedForRemoval) {\n\t\t\tthis.addButton.disabled = true;\n\t\t\treturn;\n\t\t}\n\t\tconst siblings = this.parent?.children ?? this.formset.formCollections;\n\t\tconst numActiveSiblings = siblings.filter(s => !s.markedForRemoval).length;\n\t\tthis.addButton.disabled = this.maxSiblings === null ? false : numActiveSiblings >= this.maxSiblings;\n\t}\n\n\tstatic findFormCollectionTemplate(formset: DjangoFormset, element: Element, formCollection?: DjangoFormCollection) : DjangoFormCollectionTemplate | undefined {\n\t\tconst templateElement = element.querySelector(':scope > .collection-siblings > template.empty-collection') as HTMLTemplateElement;\n\t\tif (templateElement) {\n\t\t\tconst formCollectionTemplate = new DjangoFormCollectionTemplate(formset, templateElement as HTMLTemplateElement, formCollection);\n\t\t\tformCollectionTemplate.updateAddButtonAttrs();\n\t\t\treturn formCollectionTemplate;\n\t\t}\n\t}\n}\n\n\nexport class DjangoFormset {\n\tprivate readonly element: DjangoFormsetElement;\n\tprivate readonly buttons = Array<DjangoButton>(0);\n\tprivate readonly forms = Array<DjangoForm>(0);\n\tprivate readonly CSRFToken: string | null;\n\tpublic readonly formCollections = Array<DjangoFormCollection>(0);\n\tpublic readonly collectionErrorsList = new Map<string, HTMLUListElement>();\n\tpublic formCollectionTemplate?: DjangoFormCollectionTemplate;\n\tpublic readonly showFeedbackMessages: boolean;\n\tprivate readonly abortController = new AbortController;\n\tprivate readonly emptyCollectionPrefixes = Array<string>(0);\n\tprivate data = {};\n\n\tconstructor(formset: DjangoFormsetElement) {\n\t\tthis.element = formset;\n\t\tthis.showFeedbackMessages = this.parseWithholdFeedback();\n\t\tthis.CSRFToken = this.element.getAttribute('csrf-token');\n\t}\n\n\tconnectedCallback() {\n\t\tthis.findButtons();\n\t\tthis.findForms();\n\t\tthis.findFormCollections();\n\t\tthis.findCollectionErrorsList();\n\t\tthis.assignFieldsToForms();\n\t\tthis.assignFormsToCollections();\n\t\twindow.setTimeout(() => this.validate(), 0);\n\t}\n\n\tget endpoint(): string {\n\t\treturn this.element.getAttribute('endpoint') ?? '';\n\t}\n\n\tget forceSubmission(): Boolean {\n\t\treturn this.element.hasAttribute('force-submission');\n\t}\n\n\tprivate parseWithholdFeedback(): boolean {\n\t\tlet showFeedbackMessages = true;\n\t\tconst withholdFeedback = this.element.getAttribute('withhold-feedback')?.split(' ') ?? [];\n\t\tconst feedbackClasses = new Set(['dj-feedback-errors', 'dj-feedback-warnings', 'dj-feedback-success']);\n\t\tfor (const wf of withholdFeedback) {\n\t\t\tswitch (wf.toLowerCase()) {\n\t\t\t\tcase 'messages':\n\t\t\t\t\tshowFeedbackMessages = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'errors':\n\t\t\t\t\tfeedbackClasses.delete('dj-feedback-errors');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'warnings':\n\t\t\t\t\tfeedbackClasses.delete('dj-feedback-warnings');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'success':\n\t\t\t\t\tfeedbackClasses.delete('dj-feedback-success');\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(`Unknown value in <django-formset withhold-feedback=\"${wf}\">.`);\n\t\t\t}\n\t\t}\n\t\tfeedbackClasses.forEach(feedbackClass => this.element.classList.add(feedbackClass));\n\t\treturn showFeedbackMessages;\n\t}\n\n\tpublic pushTemplatePrefix(prefix: string) {\n\t\tthis.emptyCollectionPrefixes.push(prefix);\n\t}\n\n\tpublic popTemplatePrefix(prefix: string) {\n\t\tconst index = this.emptyCollectionPrefixes.indexOf(prefix);\n\t\tif (index >= 0) {\n\t\t\tthis.emptyCollectionPrefixes.splice(index, 1);\n\t\t}\n\t}\n\n\tpublic assignFieldsToForms(parentElement?: Element) {\n\t\tparentElement = parentElement ?? this.element;\n\t\tfor (const element of parentElement.querySelectorAll('INPUT, SELECT, TEXTAREA')) {\n\t\t\tconst formId = element.getAttribute('form');\n\t\t\tlet djangoForm: DjangoForm;\n\t\t\tif (formId) {\n\t\t\t\tconst djangoForms = this.forms.filter(form => form.formId && form.formId === formId);\n\t\t\t\tif (djangoForms.length > 1)\n\t\t\t\t\tthrow new Error(`More than one form has id=\"${formId}\"`);\n\t\t\t\tif (djangoForms.length !== 1)\n\t\t\t\t\tcontinue;\n\t\t\t\tdjangoForm = djangoForms[0];\n\t\t\t} else {\n\t\t\t\tconst formElement = element.closest('form');\n\t\t\t\tif (!formElement)\n\t\t\t\t\tcontinue;\n\t\t\t\tconst djangoForms = this.forms.filter(form => form.element === formElement);\n\t\t\t\tif (djangoForms.length !== 1)\n\t\t\t\t\tcontinue;\n\t\t\t\tdjangoForm = djangoForms[0];\n\t\t\t}\n\t\t\tconst fieldGroupElement = element.closest('django-field-group');\n\t\t\tif (fieldGroupElement) {\n\t\t\t\tif (djangoForm.fieldGroups.filter(fg => fg.element === fieldGroupElement).length === 0) {\n\t\t\t\t\tdjangoForm.fieldGroups.push(new FieldGroup(djangoForm, fieldGroupElement as HTMLElement));\n\t\t\t\t}\n\t\t\t} else if (element.nodeName === 'INPUT' && (element as HTMLInputElement).type === 'hidden') {\n\t\t\t\tconst hiddenInputElement = element as HTMLInputElement;\n\t\t\t\tif (!djangoForm.hiddenInputFields.includes(hiddenInputElement)) {\n\t\t\t\t\tdjangoForm.hiddenInputFields.push(hiddenInputElement);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic findForms(parentElement?: Element) {\n\t\tparentElement = parentElement ?? this.element;\n\t\tfor (const element of parentElement.getElementsByTagName('FORM')) {\n\t\t\tconst form = new DjangoForm(this, element as HTMLFormElement);\n\t\t\tthis.forms.push(form);\n\t\t}\n\t\tthis.checkForUniqueness();\n\t}\n\n\tprivate checkForUniqueness() {\n\t\tconst formNames = Array<string>(0);\n\t\tif (this.forms.length > 1) {\n\t\t\tfor (const form of this.forms) {\n\t\t\t\tif (!form.name)\n\t\t\t\t\tthrow new Error(\"Multiple <form>-elements in a <django-formset> require a unique name each.\");\n\t\t\t\tif (form.name in formNames)\n\t\t\t\t\tthrow new Error(`Detected more than one <form name=\"${form.name}\"> in <django-formset>.`);\n\t\t\t\tformNames.push(form.name);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate findFormCollections() {\n\t\t// find all immediate elements <django-form-collection ...> belonging to the current <django-formset>\n\t\tfor (const element of DjangoFormCollection.getChildCollections(this.element)) {\n\t\t\tthis.formCollections.push(element.hasAttribute('sibling-position')\n\t\t\t\t? new DjangoFormCollectionSibling(this, element)\n\t\t\t\t: new DjangoFormCollection(this, element)\n\t\t\t);\n\t\t}\n\t\tthis.formCollections.forEach(collection => collection.updateRemoveButtonAttrs());\n\t\tthis.formCollectionTemplate = DjangoFormCollectionTemplate.findFormCollectionTemplate(this, this.element);\n\t}\n\n\tprivate findCollectionErrorsList() {\n\t\t// find all elements <any class=\"dj-collection-errors\"> belonging to the current <django-formset>\n\t\tfor (const element of this.element.getElementsByClassName('dj-collection-errors')) {\n\t\t\tconst prefix = element.getAttribute('prefix') ?? '';\n\t\t\tconst ulElement = element.querySelector('ul.dj-errorlist') as HTMLUListElement;\n\t\t\tthis.collectionErrorsList.set(prefix, ulElement);\n\t\t}\n\t}\n\n\tprivate findButtons() {\n\t\tthis.buttons.length = 0;\n\t\tfor (const element of this.element.getElementsByTagName('BUTTON')) {\n\t\t\tif (element.hasAttribute('click')) {\n\t\t\t\tthis.buttons.push(new DjangoButton(this, element as HTMLButtonElement));\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic assignFormsToCollections() {\n\t\tfor (const collection of this.formCollections) {\n\t\t\tcollection.assignForms(this.forms);\n\t\t}\n\t}\n\n\tpublic removeForm(form: DjangoForm) {\n\t\tthis.forms.splice(this.forms.indexOf(form), 1);\n\t}\n\n\tprivate aggregateValues() {\n\t\tthis.data = {};\n\t\tfor (const form of this.forms) {\n\t\t\tsetDataValue(this.data, form.getAbsPath(), Object.fromEntries(form.aggregateValues()));\n\t\t}\n\t\tfor (const form of this.forms) {\n\t\t\tif (!form.markedForRemoval) {\n\t\t\t\tform.updateOperability();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic validate() {\n\t\tlet isValid = true;\n\t\tfor (const form of this.forms) {\n\t\t\tisValid = (form.markedForRemoval || form.checkValidity()) && isValid;\n\t\t}\n\t\tfor (const button of this.buttons) {\n\t\t\tbutton.autoDisable(isValid);\n\t\t}\n\t\tthis.aggregateValues();\n\t\treturn isValid;\n\t}\n\n\tprivate buildBody(extraData?: Object) : Object {\n\t\tlet dataValue: any;\n\t\t// Build `body`-Object recursively.\n\t\t// Deliberately ignore type-checking, because `body` must be build as POJO to be JSON serializable.\n\t\tfunction extendBody(entry: any, relPath: Array<string>) {\n\t\t\tif (relPath.length === 1) {\n\t\t\t\t// the leaf object\n\t\t\t\tif (Array.isArray(entry)) {\n\t\t\t\t\tif (entry.indexOf(dataValue) < 0) {\n\t\t\t\t\t\tentry.push(dataValue);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tentry[relPath[0]] = dataValue;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isNaN(parseInt(relPath[1]))) {\n\t\t\t\tconst innerObject = entry[relPath[0]] ?? {};\n\t\t\t\textendBody(innerObject, relPath.slice(1));\n\t\t\t\tconst index = parseInt(relPath[0]);\n\t\t\t\tif (isNaN(index)) {\n\t\t\t\t\tentry[relPath[0]] = innerObject;\n\t\t\t\t} else {\n\t\t\t\t\tentry[index] = {...entry[index], ...innerObject};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (Array.isArray(entry))\n\t\t\t\t\tthrow new Error(\"Invalid form structure: Contains nested arrays.\");\n\t\t\t\tconst innerArray = entry[relPath[0]] ?? [];\n\t\t\t\tif (!Array.isArray(innerArray))\n\t\t\t\t\tthrow new Error(\"Invalid form structure: Inner array is missing.\");\n\t\t\t\textendBody(innerArray, relPath.slice(1));\n\t\t\t\tentry[relPath[0]] = innerArray;\n\t\t\t}\n\t\t}\n\n\t\t// Build a nested data structure (body) reflecting the shape of collections and forms\n\t\tconst body = {};\n\n\t\t// 1. extend body with empty arrays from Form Collections with siblings\n\t\tfor (const prefix of this.emptyCollectionPrefixes) {\n\t\t\tconst absPath = ['formset_data', ...prefix.split('.')];\n\t\t\tdataValue = getDataValue(body, absPath) ?? [];\n\t\t\textendBody(body, absPath);\n\t\t}\n\n\t\t// 2. iterate over all forms and fill the data structure with content\n\t\tfor (const form of this.forms) {\n\t\t\tif (!form.name)  // only a single form doesn't have a name\n\t\t\t\treturn Object.assign({}, this.data, {_extra: extraData});\n\n\t\t\tconst absPath = form.getAbsPath();\n\t\t\tdataValue = getDataValue(this.data, absPath);\n\t\t\tif (form.markedForRemoval) {\n\t\t\t\tdataValue[MARKED_FOR_REMOVAL] = MARKED_FOR_REMOVAL;\n\t\t\t}\n\t\t\textendBody(body, absPath);\n\t\t}\n\n\t\t// Extend data structure with extra data, for instance from buttons\n\t\treturn Object.assign({}, body, {_extra: extraData});\n\t}\n\n\tasync submit(extraData?: Object): Promise<Response | undefined> {\n\t\tlet formsAreValid = true;\n\t\tthis.setSubmitted();\n\t\tif (!this.forceSubmission) {\n\t\t\tfor (const form of this.forms) {\n\t\t\t\tformsAreValid = (form.markedForRemoval || form.isValid()) && formsAreValid;\n\t\t\t}\n\t\t}\n\t\tif (formsAreValid) {\n\t\t\tif (!this.endpoint)\n\t\t\t\tthrow new Error(\"<django-formset> requires attribute 'endpoint=\\\"server endpoint\\\"' for submission\");\n\t\t\tconst headers = new Headers();\n\t\t\theaders.append('Accept', 'application/json');\n\t\t\theaders.append('Content-Type', 'application/json');\n\t\t\tif (this.CSRFToken) {\n\t\t\t\theaders.append('X-CSRFToken', this.CSRFToken);\n\t\t\t}\n\t\t\tconst response = await fetch(this.endpoint, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: headers,\n\t\t\t\tbody: JSON.stringify(this.buildBody(extraData)),\n\t\t\t\tsignal: this.abortController.signal,\n\t\t\t});\n\t\t\tswitch (response.status) {\n\t\t\t\tcase 200:\n\t\t\t\t\tthis.clearErrors();\n\t\t\t\t\tfor (const form of this.forms) {\n\t\t\t\t\t\tform.element.dispatchEvent(new Event('submitted'));\n\t\t\t\t\t}\n\t\t\t\t\treturn response;\n\t\t\t\tcase 422:\n\t\t\t\t\tthis.clearErrors();\n\t\t\t\t\tconst body = await response.json();\n\t\t\t\t\tthis.reportErrors(body);\n\t\t\t\t\treturn response;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn(`Unknown response status: ${response.status}`);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.clearErrors();\n\t\t\tfor (const form of this.forms) {\n\t\t\t\tform.reportValidity();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate reportErrors(body: any) {\n\t\tfor (const form of this.forms) {\n\t\t\tconst errors = form.name ? getDataValue(body, form.name.split('.'), null) : body;\n\t\t\tif (errors) {\n\t\t\t\tform.reportCustomErrors(new Map(Object.entries(errors)));\n\t\t\t\tform.reportValidity();\n\t\t\t} else {\n\t\t\t\tform.clearCustomErrors();\n\t\t\t}\n\t\t}\n\t\tfor (const [prefix, ulElement] of this.collectionErrorsList) {\n\t\t\tlet path = prefix ? prefix.split('.') : [];\n\t\t\tpath = [...path, '0', COLLECTION_ERRORS];\n\t\t\tfor (const errorText of getDataValue(body, path, [])) {\n\t\t\t\tconst placeholder = document.createElement('li');\n\t\t\t\tplaceholder.classList.add('dj-placeholder');\n\t\t\t\tplaceholder.innerText = errorText;\n\t\t\t\tulElement.appendChild(placeholder);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic resetToInitial() {\n\t\tDjangoFormCollection.resetCollectionsToInitial(this.formCollections);\n\t\tthis.formCollectionTemplate?.updateAddButtonAttrs();\n\t\tthis.forms.forEach(form => form.resetToInitial());\n\t}\n\n\t/**\n\t * Abort the current actions.\n\t */\n\tpublic abort() {\n\t\tfor (const button of this.buttons) {\n\t\t\tbutton.abortAction();\n\t\t}\n\t\tthis.abortController.abort();\n\t}\n\n\tprivate setSubmitted() {\n\t\tfor (const form of this.forms) {\n\t\t\tform.setSubmitted();\n\t\t}\n\t}\n\n\tpublic getDataValue(path: Array<string>) : string | null {\n\t\tconst absPath = ['formset_data', ...path];\n\t\treturn getDataValue(this.data, absPath, null);\n\t}\n\n\tfindFirstErrorReport() : Element | null {\n\t\tfor (const form of this.forms) {\n\t\t\tconst errorReportElement = form.findFirstErrorReport();\n\t\t\tif (errorReportElement)\n\t\t\t\treturn errorReportElement;\n\t\t}\n\t\treturn null;\n\t}\n\n\tclearErrors() {\n\t\tfor (const form of this.forms) {\n\t\t\tform.clearCustomErrors();\n\t\t}\n\t\tfor (const ulElement of this.collectionErrorsList.values()) {\n\t\t\twhile (ulElement.firstElementChild) {\n\t\t\t\tulElement.removeChild(ulElement.firstElementChild);\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nconst FS = Symbol('DjangoFormset');\n\nexport class DjangoFormsetElement extends HTMLElement {\n\tprivate readonly [FS]: DjangoFormset;  // hides internal implementation\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis[FS] = new DjangoFormset(this);\n\t}\n\n\tprivate static get observedAttributes() {\n\t\treturn ['endpoint', 'withhold-messages', 'force-submission'];\n\t}\n\n\tprivate connectedCallback() {\n\t\tthis[FS].connectedCallback();\n\t}\n\n\tpublic async submit(data: Object | undefined): Promise<Response | undefined> {\n\t\treturn this[FS].submit(data);\n\t}\n\n\tpublic async abort() {\n\t\treturn this[FS].abort();\n\t}\n\n\tpublic async reset() {\n\t\treturn this[FS].resetToInitial();\n\t}\n}\n", "/**!\n * Sortable 1.15.0\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.15.0\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\n\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\n\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction matches(\n/**HTMLElement*/\nel,\n/**String*/\nselector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n\n  return false;\n}\n\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\n\nfunction closest(\n/**HTMLElement*/\nel,\n/**String*/\nselector,\n/**HTMLElement*/\nctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n\n  return null;\n}\n\nvar R_SPACE = /\\s+/g;\n\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\n\nfunction css(el, prop, val) {\n  var style = el && el.style;\n\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\n\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n\n    } while (!selfOnly && (el = el.parentNode));\n  }\n\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n\n  return matrixFn && new matrixFn(appliedTransforms);\n}\n\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n        i = 0,\n        n = list.length;\n\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n\n    return list;\n  }\n\n  return [];\n}\n\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n/**\n * Returns the \"bounding client rect\" of given element\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\n * @param  {[HTMLElement]} container              The parent the element will be placed in\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\n */\n\n\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode; // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect(); // Set relative to edges of padding box of container\n\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n\n      } while (container = container.parentNode);\n    }\n  }\n\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n        scaleX = elMatrix && elMatrix.a,\n        scaleY = elMatrix && elMatrix.d;\n\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n/**\n * Checks if a side of an element is scrolled past a side of its parents\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\n */\n\n\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n      elSideVal = getRect(el)[elSide];\n  /* jshint boss:true */\n\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n        visible = void 0;\n\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n\n  return false;\n}\n/**\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n * and non-draggable elements\n * @param  {HTMLElement} el       The parent element\n * @param  {Number} childNum      The index of the child\n * @param  {Object} options       Parent Sortable's options\n * @return {HTMLElement}          The child at index childNum, or null if not found\n */\n\n\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n      i = 0,\n      children = el.children;\n\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n\n      currentChild++;\n    }\n\n    i++;\n  }\n\n  return null;\n}\n/**\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n * @param  {HTMLElement} el       Parent element\n * @param  {selector} selector    Any other elements that should be ignored\n * @return {HTMLElement}          The last child, ignoring ghostEl\n */\n\n\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n\n  return last || null;\n}\n/**\n * Returns the index of an element within its parent for a selected set of\n * elements\n * @param  {HTMLElement} el\n * @param  {selector} selector\n * @return {number}\n */\n\n\nfunction index(el, selector) {\n  var index = 0;\n\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n  /* jshint boss:true */\n\n\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n\n  return index;\n}\n/**\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\n * The value is returned in real pixels.\n * @param  {HTMLElement} el\n * @return {Array}             Offsets in the format of [left, top]\n */\n\n\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n      offsetTop = 0,\n      winScroller = getWindowScrollingElement();\n\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n          scaleX = elMatrix.a,\n          scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n\n  return [offsetLeft, offsetTop];\n}\n/**\n * Returns the index of the object within the given array\n * @param  {Array} arr   Array that may or may not hold the object\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\n * @return {Number}      The index of the object in the array, or -1\n */\n\n\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n\n  return -1;\n}\n\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n\n  } while (elem = elem.parentNode);\n\n  return getWindowScrollingElement();\n}\n\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\n\nvar _throttleTimeout;\n\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n          _this = this;\n\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\n\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\n\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\n\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\n\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\n\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\n\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n      animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect); // If animating: compensate for current animation\n\n\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n\n      var animating = false,\n          animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n            target = state.target,\n            fromRect = target.fromRect,\n            toRect = getRect(target),\n            prevFromRect = target.prevFromRect,\n            prevToRect = target.prevToRect,\n            animatingRect = state.rect,\n            targetMatrix = matrix(target, true);\n\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n\n        target.toRect = toRect;\n\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) && // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        } // if fromRect != toRect: animate\n\n\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n\n          if (!time) {\n            time = _this.options.animation;\n          }\n\n          _this.animate(target, animatingRect, toRect, time);\n        }\n\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n            scaleX = elMatrix && elMatrix.a,\n            scaleY = elMatrix && elMatrix.d,\n            translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n            translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\n\nfunction repaint(target) {\n  return target.offsetWidth;\n}\n\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n\n    this.eventCanceled = false;\n\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return; // Fire global events if it exists in this sortable\n\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      } // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n\n\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized; // Add default options from plugin\n\n      _extends(defaults, initialized.defaults);\n    });\n\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return; // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n      rootEl = _ref.rootEl,\n      name = _ref.name,\n      targetEl = _ref.targetEl,\n      cloneEl = _ref.cloneEl,\n      toEl = _ref.toEl,\n      fromEl = _ref.fromEl,\n      oldIndex = _ref.oldIndex,\n      newIndex = _ref.newIndex,\n      oldDraggableIndex = _ref.oldDraggableIndex,\n      newDraggableIndex = _ref.newDraggableIndex,\n      originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n      options = sortable.options,\n      onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1); // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\n\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      originalEvent = _ref.evt,\n      data = _objectWithoutProperties(_ref, _excluded);\n\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\n\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\n\nvar dragEl,\n    parentEl,\n    ghostEl,\n    rootEl,\n    nextEl,\n    lastDownEl,\n    cloneEl,\n    cloneHidden,\n    oldIndex,\n    newIndex,\n    oldDraggableIndex,\n    newDraggableIndex,\n    activeGroup,\n    putSortable,\n    awaitingDragStarted = false,\n    ignoreNextClick = false,\n    sortables = [],\n    tapEvt,\n    touchEvt,\n    lastDx,\n    lastDy,\n    tapDistanceLeft,\n    tapDistanceTop,\n    moved,\n    lastTarget,\n    lastDirection,\n    pastFirstInvertThresh = false,\n    isCircumstantialInvert = false,\n    targetMoveDistance,\n    // For positioning ghost absolutely\nghostRelativeParent,\n    ghostRelativeParentInitialScroll = [],\n    // (left, top)\n_silent = false,\n    savedInputChecked = [];\n/** @const */\n\nvar documentExists = typeof document !== 'undefined',\n    PositionGhostAbsolutely = IOS,\n    CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n    // This will not pass for IE9, because IE9 DnD only works on anchors\nsupportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n    supportCssPointerEvents = function () {\n  if (!documentExists) return; // false when <= IE11\n\n  if (IE11OrLess) {\n    return false;\n  }\n\n  var el = document.createElement('x');\n  el.style.cssText = 'pointer-events:auto';\n  return el.style.pointerEvents === 'auto';\n}(),\n    _detectDirection = function _detectDirection(el, options) {\n  var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n\n  if (elCSS.display === 'flex') {\n    return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n  }\n\n  if (elCSS.display === 'grid') {\n    return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n  }\n\n  if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n    var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n    return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n  }\n\n  return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n},\n    _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n  var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n  return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n},\n\n/**\r\n * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n * @param  {Number} x      X position\r\n * @param  {Number} y      Y position\r\n * @return {HTMLElement}   Element of the first found nearest Sortable\r\n */\n_detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n  var ret;\n  sortables.some(function (sortable) {\n    var threshold = sortable[expando].options.emptyInsertThreshold;\n    if (!threshold || lastChild(sortable)) return;\n    var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n\n    if (insideHorizontally && insideVertically) {\n      return ret = sortable;\n    }\n  });\n  return ret;\n},\n    _prepareGroup = function _prepareGroup(options) {\n  function toFn(value, pull) {\n    return function (to, from, dragEl, evt) {\n      var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n\n      if (value == null && (pull || sameGroup)) {\n        // Default pull value\n        // Default pull and put value if same group\n        return true;\n      } else if (value == null || value === false) {\n        return false;\n      } else if (pull && value === 'clone') {\n        return value;\n      } else if (typeof value === 'function') {\n        return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n      } else {\n        var otherGroup = (pull ? to : from).options.group.name;\n        return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n      }\n    };\n  }\n\n  var group = {};\n  var originalGroup = options.group;\n\n  if (!originalGroup || _typeof(originalGroup) != 'object') {\n    originalGroup = {\n      name: originalGroup\n    };\n  }\n\n  group.name = originalGroup.name;\n  group.checkPull = toFn(originalGroup.pull, true);\n  group.checkPut = toFn(originalGroup.put);\n  group.revertClone = originalGroup.revertClone;\n  options.group = group;\n},\n    _hideGhostForTarget = function _hideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', 'none');\n  }\n},\n    _unhideGhostForTarget = function _unhideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', '');\n  }\n}; // #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\n\nif (documentExists && !ChromeForAndroid) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\n\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\n\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\n\n\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n\n  this.el = el; // root element\n\n  this.options = options = _extends({}, options); // Export instance\n\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && !Safari,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults); // Set default options\n\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n\n  _prepareGroup(options); // Bind all private methods\n\n\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  } // Setup drag mode\n\n\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  } // Bind events\n\n\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n\n  sortables.push(this.el); // Restore sorting\n\n  options.store && options.store.get && this.sort(options.store.get(this) || []); // Add animation state manager\n\n  _extends(this, AnimationStateManager());\n}\n\nSortable.prototype =\n/** @lends Sortable.prototype */\n{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart(\n  /** Event|TouchEvent */\n  evt) {\n    if (!evt.cancelable) return;\n\n    var _this = this,\n        el = this.el,\n        options = this.options,\n        preventOnFilter = options.preventOnFilter,\n        type = evt.type,\n        touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n        target = (touch || evt).target,\n        originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n        filter = options.filter;\n\n    _saveInputCheckedState(el); // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\n\n    if (dragEl) {\n      return;\n    }\n\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    } // cancel dnd if original target is content editable\n\n\n    if (originalTarget.isContentEditable) {\n      return;\n    } // Safari ignores further event handling after mousedown\n\n\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n\n    target = closest(target, options.draggable, el, false);\n\n    if (target && target.animated) {\n      return;\n    }\n\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    } // Get the index of the dragged element within its parent\n\n\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable); // Check filter\n\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n\n      if (filter) {\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    } // Prepare `dragstart`\n\n\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch,\n  /** HTMLElement */\n  target) {\n    var _this = this,\n        el = _this.el,\n        options = _this.options,\n        ownerDocument = el.ownerDocument,\n        dragStartFn;\n\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n\n          return;\n        } // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n\n\n        _this._disableDelayedDragEvents();\n\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        } // Bind the events: dragstart/dragend\n\n\n        _this._triggerDragStart(evt, touch); // Drag start event\n\n\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        }); // Chosen item\n\n\n        toggleClass(dragEl, options.chosenClass, true);\n      }; // Disable \"draggable\"\n\n\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mouseup', _this._onDrop);\n      on(ownerDocument, 'touchend', _this._onDrop);\n      on(ownerDocument, 'touchcancel', _this._onDrop); // Make dragEl draggable (must be before delay for FireFox)\n\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n\n      pluginEvent('delayStart', this, {\n        evt: evt\n      }); // Delay is impossible for native DnD in Edge or IE\n\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n\n          return;\n        } // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n\n\n        on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler(\n  /** TouchEvent|PointerEvent **/\n  e) {\n    var touch = e.touches ? e.touches[0] : e;\n\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n\n    awaitingDragStarted = false;\n\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n\n      var options = this.options; // Apply effect\n\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost(); // Drag start event\n\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n\n      _hideGhostForTarget();\n\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n\n          target = parent; // store last element\n        }\n        /* jshint boss:true */\n        while (parent = parent.parentNode);\n      }\n\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove(\n  /**TouchEvent*/\n  evt) {\n    if (tapEvt) {\n      var options = this.options,\n          fallbackTolerance = options.fallbackTolerance,\n          fallbackOffset = options.fallbackOffset,\n          touch = evt.touches ? evt.touches[0] : evt,\n          ghostMatrix = ghostEl && matrix(ghostEl, true),\n          scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n          scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n          relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n          dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n          dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1); // only set the status to dragging, when we are actually dragging\n\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n\n        this._onDragStart(evt, true);\n      }\n\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n          rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n          options = this.options; // Position absolutely\n\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl); // Set transform-origin\n\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart(\n  /**Event*/\n  evt,\n  /**boolean*/\n  fallback) {\n    var _this = this;\n\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n\n      return;\n    }\n\n    pluginEvent('setupClone', this);\n\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.removeAttribute(\"id\");\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n\n      this._hideClone();\n\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    } // #1143: IFrame support workaround\n\n\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n\n      _this._hideClone();\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true); // Set proper drop events\n\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n\n      on(document, 'drop', _this); // #1276 fix:\n\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        target = evt.target,\n        dragRect,\n        targetRect,\n        revert,\n        options = this.options,\n        group = options.group,\n        activeSortable = Sortable.active,\n        isOwner = activeGroup === group,\n        canSort = options.sort,\n        fromSortable = putSortable || activeSortable,\n        vertical,\n        _this = this,\n        completedFired = false;\n\n    if (_silent) return;\n\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    } // Capture animation state\n\n\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n\n      _this.captureAnimationState();\n\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    } // Return invocation when dragEl is inserted (or completed)\n\n\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        } // Animation\n\n\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      } // Null lastTarget if it is not inside a previously swapped element\n\n\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      } // no bubbling and not fallback\n\n\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target); // Do not detect for empty insert if already inserted\n\n\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    } // Call when dragEl has been inserted\n\n\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n\n    ignoreNextClick = false;\n\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n\n      if (revert) {\n        parentEl = rootEl; // actualization\n\n        capture();\n\n        this._hideClone();\n\n        dragOverEvent('revert');\n\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n\n        return completed(true);\n      }\n\n      var elLastChild = lastChild(el, options.draggable);\n\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        } // if there is a last element, it is the target\n\n\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n\n        if (target) {\n          targetRect = getRect(target);\n        }\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n\n          if (elLastChild && elLastChild.nextSibling) {\n            // the last draggable element is not the last node\n            el.insertBefore(dragEl, elLastChild.nextSibling);\n          } else {\n            el.appendChild(dragEl);\n          }\n\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n\n        target = firstChild;\n        targetRect = getRect(target);\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n            targetBeforeFirstSwap,\n            differentLevel = dragEl.parentNode !== el,\n            differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n            side1 = vertical ? 'top' : 'left',\n            scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n            scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        } // If dragEl is already beside target: Do not insert\n\n\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n            after = false;\n        after = direction === 1;\n\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          } // Undo chrome's scroll adjustment (has no effect on other browsers)\n\n\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n\n          parentEl = dragEl.parentNode; // actualization\n          // must be done before animation\n\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n\n          changed();\n          return completed(true);\n        }\n      }\n\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        options = this.options; // Get the index of the dragged element within its parent\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode; // Get again after plugin event\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n\n    if (Sortable.eventCanceled) {\n      this._nulling();\n\n      return;\n    }\n\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n\n    _cancelNextTick(this.cloneId);\n\n    _cancelNextTick(this._dragStartId); // Unbind events\n\n\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n\n    this._offMoveEvents();\n\n    this._offUpEvents();\n\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n\n    css(dragEl, 'transform', '');\n\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n\n        _disableDraggable(dragEl);\n\n        dragEl.style['will-change'] = ''; // Remove classes\n        // ghostClass is added in dragStarted\n\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n\n        toggleClass(dragEl, this.options.chosenClass, false); // Drag stop event\n\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            }); // Remove event\n\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            }); // drag from one list and drop into another\n\n\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          }); // Save sorting\n\n\n          this.save();\n        }\n      }\n    }\n\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent(\n  /**Event*/\n  evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n\n        break;\n\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n\n          _globalDragOver(evt);\n        }\n\n        break;\n\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n\n  /**\r\n   * Serializes the item into an array of string.\r\n   * @returns {String[]}\r\n   */\n  toArray: function toArray() {\n    var order = [],\n        el,\n        children = this.el.children,\n        i = 0,\n        n = children.length,\n        options = this.options;\n\n    for (; i < n; i++) {\n      el = children[i];\n\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n\n    return order;\n  },\n\n  /**\r\n   * Sorts the elements according to the array.\r\n   * @param  {String[]}  order  order of the items\r\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n        rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n\n  /**\r\n   * Save the current sorting\r\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n\n  /**\r\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n   * @param   {HTMLElement}  el\r\n   * @param   {String}       [selector]  default: `options.draggable`\r\n   * @returns {HTMLElement|null}\r\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n\n  /**\r\n   * Set/get option\r\n   * @param   {string} name\r\n   * @param   {*}      [value]\r\n   * @returns {*}\r\n   */\n  option: function option(name, value) {\n    var options = this.options;\n\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n\n  /**\r\n   * Destroy\r\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    } // Remove draggable attributes\n\n\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n\n    this._onDrop();\n\n    this._disableDelayedDragEvents();\n\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n\n      return;\n    }\n\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return; // show clone at dragEl or original position\n\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\n\nfunction _globalDragOver(\n/**Event*/\nevt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n\n  evt.cancelable && evt.preventDefault();\n}\n\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n      sortable = fromEl[expando],\n      onMoveFn = sortable.options.onMove,\n      retVal; // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n\n  return retVal;\n}\n\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\n\nfunction _unsilent() {\n  _silent = false;\n}\n\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var rect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var spacer = 10;\n  return vertical ? evt.clientX < rect.left - spacer || evt.clientY < rect.top && evt.clientX < rect.right : evt.clientY < rect.top - spacer || evt.clientY < rect.bottom && evt.clientX < rect.left;\n}\n\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var rect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var spacer = 10;\n  return vertical ? evt.clientX > rect.right + spacer || evt.clientX <= rect.right && evt.clientY > rect.bottom && evt.clientX >= rect.left : evt.clientX > rect.right && evt.clientY > rect.top || evt.clientX <= rect.right && evt.clientY > rect.bottom + spacer;\n}\n\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n      targetLength = vertical ? targetRect.height : targetRect.width,\n      targetS1 = vertical ? targetRect.top : targetRect.left,\n      targetS2 = vertical ? targetRect.bottom : targetRect.right,\n      invert = false;\n\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n\n  invert = invert || invertSwap;\n\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n\n  return 0;\n}\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\n\n\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\n\n\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n      i = str.length,\n      sum = 0;\n\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n\n  return sum.toString(36);\n}\n\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\n\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\n\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n} // Fixed #973:\n\n\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n} // Export utils\n\n\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild\n};\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\n\nSortable.get = function (element) {\n  return element[expando];\n};\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\n\n\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\n\n\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n}; // Export\n\n\nSortable.version = version;\n\nvar autoScrolls = [],\n    scrollEl,\n    scrollRootEl,\n    scrolling = false,\n    lastAutoScrollX,\n    lastAutoScrollY,\n    touchEvt$1,\n    pointerElemChangedInterval;\n\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    }; // Bind all private methods\n\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n          y = (evt.touches ? evt.touches[0] : evt).clientY,\n          elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt; // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback); // Listener for pointer element change\n\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval(); // Detect for pointer elem change, emulating native DnD behaviour\n\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\n\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\n\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\n\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n      y = (evt.touches ? evt.touches[0] : evt).clientY,\n      sens = options.scrollSensitivity,\n      speed = options.scrollSpeed,\n      winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n      scrollCustomFn; // New scroll root, set scrollEl\n\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n\n  var layersOut = 0;\n  var currentParent = scrollEl;\n\n  do {\n    var el = currentParent,\n        rect = getRect(el),\n        top = rect.top,\n        bottom = rect.bottom,\n        left = rect.left,\n        right = rect.right,\n        width = rect.width,\n        height = rect.height,\n        canScrollX = void 0,\n        canScrollY = void 0,\n        scrollWidth = el.scrollWidth,\n        scrollHeight = el.scrollHeight,\n        elCSS = css(el),\n        scrollPosX = el.scrollLeft,\n        scrollPosY = el.scrollTop;\n\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n\n          }\n\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      dragEl = _ref.dragEl,\n      activeSortable = _ref.activeSortable,\n      dispatchSortableEvent = _ref.dispatchSortableEvent,\n      hideGhostForTarget = _ref.hideGhostForTarget,\n      unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\n\nfunction Revert() {}\n\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n        putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n\n    this.sortable.animateAll();\n\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\n\nfunction Remove() {}\n\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n        putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\n\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n          target = _ref2.target,\n          onMove = _ref2.onMove,\n          activeSortable = _ref2.activeSortable,\n          changed = _ref2.changed,\n          cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n          options = this.options;\n\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n          putSortable = _ref3.putSortable,\n          dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\n\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n      p2 = n2.parentNode,\n      i1,\n      i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n    multiDragClones = [],\n    lastMultiDragSelect,\n    // for selection with modifier key down (SHIFT)\nmultiDragSortable,\n    initialFolding = false,\n    // Initial multi-drag fold when drag started\nfolding = false,\n    // Folding any other time\ndragStarted = false,\n    dragEl$1,\n    clonesFromRect,\n    clonesHidden;\n\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n\n    if (!sortable.options.avoidImplicitDeselect) {\n      if (sortable.options.supportPointer) {\n        on(document, 'pointerup', this._deselectMultiDrag);\n      } else {\n        on(document, 'mouseup', this._deselectMultiDrag);\n        on(document, 'touchend', this._deselectMultiDrag);\n      }\n    }\n\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      avoidImplicitDeselect: false,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n          cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n\n      sortable._hideClone();\n\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n          rootEl = _ref3.rootEl,\n          dispatchSortableEvent = _ref3.dispatchSortableEvent,\n          cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n          rootEl = _ref4.rootEl,\n          cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n\n      var sortable = _ref5.sortable,\n          cloneNowHidden = _ref5.cloneNowHidden,\n          cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      }); // Sort multi-drag elements\n\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n        sortable.captureAnimationState();\n\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        } // Remove all auxiliary multidrag items from el, if sorting enabled\n\n\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n          completed = _ref8.completed,\n          cancel = _ref8.cancel;\n\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n          rootEl = _ref9.rootEl,\n          sortable = _ref9.sortable,\n          dragRect = _ref9.dragRect;\n\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n          isOwner = _ref10.isOwner,\n          insertion = _ref10.insertion,\n          activeSortable = _ref10.activeSortable,\n          parentEl = _ref10.parentEl,\n          putSortable = _ref10.putSortable;\n      var options = this.options;\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n\n        initialFolding = false; // If leaving sort:false root, or already folding - Fold to new location\n\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute); // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        } // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n\n\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n\n            activeSortable._showClone(sortable); // Unfold animation for clones if showing from hidden\n\n\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n          isOwner = _ref11.isOwner,\n          activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n          rootEl = _ref12.rootEl,\n          parentEl = _ref12.parentEl,\n          sortable = _ref12.sortable,\n          dispatchSortableEvent = _ref12.dispatchSortableEvent,\n          oldIndex = _ref12.oldIndex,\n          putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n          children = parentEl.children; // Multi-drag selection\n\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          }); // Modifier activated, select from last to dragEl\n\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n                currentIndex = index(dragEl$1);\n\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n              // (but previous selection existed)\n              var n, i;\n\n              if (currentIndex > lastIndex) {\n                i = lastIndex;\n                n = currentIndex;\n              } else {\n                i = currentIndex;\n                n = lastIndex + 1;\n              }\n\n              for (; i < n; i++) {\n                if (~multiDragElements.indexOf(children[i])) continue;\n                toggleClass(children[i], options.selectedClass, true);\n                multiDragElements.push(children[i]);\n                dispatchEvent({\n                  sortable: sortable,\n                  rootEl: rootEl,\n                  name: 'select',\n                  targetEl: children[i],\n                  originalEvent: evt\n                });\n              }\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n        }\n      } // Multi-drag drop\n\n\n      if (dragStarted && this.isMultiDrag) {\n        folding = false; // Do not \"unfold\" after around dragEl if reverted\n\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n              multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect; // Prepare unfold animation\n\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            } // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n\n\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n\n              multiDragIndex++;\n            }); // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n\n              if (update) {\n                dispatchSortableEvent('update');\n              }\n            }\n          } // Must be done after capturing individual rects (scroll bar)\n\n\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n\n        multiDragSortable = toSortable;\n      } // Remove clones if necessary\n\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return; // Only deselect if selection is in this sortable\n\n      if (multiDragSortable !== this.sortable) return; // Only deselect if target is not item in this sortable\n\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return; // Only deselect if left click\n\n      if (evt && evt.button !== 0) return;\n\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvent: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n\n          multiDragSortable = sortable;\n        }\n\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n            index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n\n      var oldIndicies = [],\n          newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        }); // multiDragElements will already be sorted if folding\n\n        var newIndex;\n\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n\n        return key;\n      }\n    }\n  });\n}\n\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\n\n\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\n\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n", "import template from 'lodash.template';\n\n\nexport class FileUploadWidget {\n\tprivate readonly field: FieldGroup;\n\tprivate readonly inputElement: HTMLInputElement;\n\tprivate readonly dropbox: HTMLElement;\n\tprivate readonly chooseFileButton: HTMLButtonElement;\n\tprivate readonly progressBar: HTMLProgressElement | null = null;\n\tprivate readonly dropboxItemTemplate: Function;\n\tprivate readonly emptyDropboxItem: HTMLDivElement;\n\tprivate readonly observer: MutationObserver;\n\tprivate readonly initialData: Array<Object>;\n\tpublic uploadedFiles: Array<Object>;\n\n\tconstructor(fieldGroup: FieldGroup, inputElement: HTMLInputElement) {\n\t\tthis.field = fieldGroup;\n\t\tthis.inputElement = inputElement;\n\n\t\tthis.dropbox = this.field.element.querySelector('figure.dj-dropbox') as HTMLElement;\n\t\tif (!this.dropbox)\n\t\t\tthrow new Error('Element <input type=\"file\"> requires sibling element <figure class=\"dj-dropbox\"></figure>');\n\n\t\tthis.chooseFileButton = this.field.element.querySelector('button.dj-choose-file') as HTMLButtonElement;\n\t\tif (!this.chooseFileButton)\n\t\t\tthrow new Error('Element <input type=\"file\"> requires sibling element <button class=\"dj-choose-file\"></button>');\n\n\t\tthis.progressBar = this.field.element.querySelector('progress') as HTMLProgressElement;\n\t\tif (this.progressBar) {\n\t\t\tthis.progressBar.style.visibility = 'hidden';\n\t\t}\n\n\t\tthis.emptyDropboxItem = this.dropbox.querySelector('div.dj-empty-item') as HTMLDivElement;\n\t\tif (!this.emptyDropboxItem)\n\t\t\tthrow new Error('Element <input type=\"file\"> requires sibling element <figure><div class=\"dj-empty-item\"></div></figure>');\n\n\t\tconst dropboxItemTemplate = this.field.element.querySelector('.dj-dropbox-items');\n\t\tif (!dropboxItemTemplate)\n\t\t\tthrow new Error('Element <input type=\"file\"> requires sibling element <template class=\"dj-dropbox-items\"></template>');\n\t\tthis.dropboxItemTemplate = template(dropboxItemTemplate.innerHTML);\n\n\t\tthis.observer = new MutationObserver(mutationsList => this.attributesChanged(mutationsList));\n\t\tthis.observer.observe(this.inputElement, {attributes: true});\n\t\tthis.chooseFileButton.disabled = inputElement.disabled;\n\n\t\tconst initialData = document.getElementById(`initial_${inputElement.id}`);\n\t\tif (initialData?.textContent) {\n\t\t\tthis.uploadedFiles = this.initialData = [JSON.parse(initialData.textContent)];\n\t\t\tthis.renderDropbox();\n\t\t} else {\n\t\t\tthis.uploadedFiles = this.initialData = [];\n\t\t}\n\t\tthis.dropbox.addEventListener('dragenter', this.swallowEvent);\n\t\tthis.dropbox.addEventListener('dragover', this.swallowEvent);\n\t\tthis.dropbox.addEventListener('drop', this.fileDrop);\n\t\tthis.chooseFileButton.addEventListener('click', () => inputElement.click());\n\t\tinputElement.addEventListener('change', () => this.uploadFiles(this.inputElement.files).then(() => {\n\t\t\tthis.field.inputted();\n\t\t\tthis.field.validate();\n\t\t}).catch(() => {\n\t\t\tthis.field.reportFailedUpload();\n\t\t}).finally(() => this.field.touch()));\n\t}\n\n\tprivate fileDrop = (event: DragEvent) => {\n\t\tthis.swallowEvent(event);\n\t\tif (event.dataTransfer) {\n\t\t\tthis.field.touch();\n\t\t\tthis.inputElement.files = event.dataTransfer.files;\n\t\t\tthis.uploadFiles(this.inputElement.files).then(() => {\n\t\t\t\tthis.field.inputted();\n\t\t\t\tthis.field.validate();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate fileRemove = () => {\n\t\tthis.inputElement.value = '';  // used to clear readonly `this.inputElement.files`\n\t\tthis.uploadedFiles = this.initialData.length > 0 ? [{}] : [];\n\t\twhile (this.dropbox.firstChild) {\n\t\t\tthis.dropbox.removeChild(this.dropbox.firstChild);\n\t\t}\n\t\tthis.dropbox.appendChild(this.emptyDropboxItem);\n\t\tthis.field.touch();\n\t\tthis.field.inputted();\n\t\tthis.field.validate();\n\t}\n\n\tprivate swallowEvent = (event: Event) => {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t}\n\n\tprivate async uploadFiles(files: FileList | null) : Promise<void> {\n\t\tif (!files || files.length === 0)\n\t\t\treturn Promise.reject();\n\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t// Django currently can't handle multiple file uploads, restrict to first file\n\t\t\tconst file = files.item(0);\n\t\t\tif (file) {\n\t\t\t\tthis.uploadFile(file, this.dropbox.clientHeight).then(response => {\n\t\t\t\t\tthis.uploadedFiles = [response];\n\t\t\t\t\tthis.renderDropbox();\n\t\t\t\t\tthis.field.inputted();\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(() => {\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async uploadFile(file: File, imageHeight: number): Promise<Object> {\n\t\tlet self = this;\n\n\t\tfunction updateProgress(event: ProgressEvent) {\n\t\t\tconst complete = event.lengthComputable ? event.loaded / event.total : 0;\n\t\t\tif (self.progressBar) {\n\t\t\t\tself.progressBar.style.visibility = 'visible';\n\t\t\t\t// the remaining 5% of the progress bar are reserved for image transformation\n\t\t\t\tself.progressBar.value = 0.95 * complete;\n\t\t\t}\n\t\t}\n\n\t\tconst body = new FormData();\n\t\tbody.append('temp_file', file);\n\t\tbody.append('image_height', imageHeight.toString());\n\n\t\treturn new Promise<Response>((resolve, reject) => {\n\t\t\tfunction transferComplete() {\n\t\t\t\tif (self.progressBar) {\n\t\t\t\t\tself.progressBar.value = 1;\n\t\t\t\t\twindow.setTimeout(() => self.progressBar!.style.visibility = 'hidden', 333);\n\t\t\t\t}\n\t\t\t\tif (request.status === 200) {\n\t\t\t\t\tresolve(request.response);\n\t\t\t\t} else {\n\t\t\t\t\treject(request.response);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst request = new XMLHttpRequest();\n\t\t\tif (self.progressBar) {\n\t\t\t\trequest.addEventListener('loadstart', updateProgress);\n\t\t\t\trequest.upload.addEventListener('progress', updateProgress, false);\n\t\t\t}\n\t\t\trequest.addEventListener('loadend', transferComplete);\n\t\t\trequest.open('POST', this.field.form.formset.endpoint, true);\n\t\t\tconst csrfToken = this.field.form.formset.CSRFToken;\n\t\t\tif (csrfToken) {\n\t\t\t\trequest.setRequestHeader('X-CSRFToken', csrfToken);\n\t\t\t}\n\t\t\trequest.responseType = 'json';\n\t\t\trequest.send(body);\n\t\t});\n\t}\n\n\tprivate renderDropbox() {\n\t\tlet list = [];\n\t\tfor (const fileHandle of this.uploadedFiles) {\n\t\t\tlist.push(this.dropboxItemTemplate(fileHandle));\n\t\t}\n\t\tif (list.length > 0) {\n\t\t\tthis.dropbox.innerHTML = list.join('');\n\t\t} else {\n\t\t\tthis.dropbox.replaceChildren(this.emptyDropboxItem);\n\t\t}\n\t\tconst button = this.dropbox.querySelector('.dj-delete-file');\n\t\tif (button) {\n\t\t\tbutton.addEventListener('click', this.fileRemove, {once: true});\n\t\t}\n\t}\n\n\tprivate attributesChanged(mutationsList: Array<MutationRecord>) {\n\t\tfor (const mutation of mutationsList) {\n\t\t\tif (mutation.type === 'attributes' && mutation.attributeName === 'disabled'\n\t\t\t&& this.chooseFileButton.disabled != this.inputElement.disabled) {\n\t\t\t\tthis.chooseFileButton.disabled = this.inputElement.disabled;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic inProgress(): boolean {\n\t\treturn !!this.inputElement.files && this.inputElement.files.length > this.uploadedFiles.length;\n\t}\n\n\tpublic resetToInitial() {\n\t\tthis.uploadedFiles = this.initialData;\n\t\tthis.renderDropbox();\n\t}\n}\n", "// @ts-nocheck\n\n// Generated by peggy v. 1.2.0 (ts-pegjs plugin v. 1.2.2 )\n//\n// https://peggyjs.org/   https://github.com/metadevpro/ts-pegjs\n\n\"use strict\";\n\nexport interface IFilePosition {\n  offset: number;\n  line: number;\n  column: number;\n}\n\nexport interface IFileRange {\n  start: IFilePosition;\n  end: IFilePosition;\n  source: string;\n}\n\nexport interface ILiteralExpectation {\n  type: \"literal\";\n  text: string;\n  ignoreCase: boolean;\n}\n\nexport interface IClassParts extends Array<string | IClassParts> {}\n\nexport interface IClassExpectation {\n  type: \"class\";\n  parts: IClassParts;\n  inverted: boolean;\n  ignoreCase: boolean;\n}\n\nexport interface IAnyExpectation {\n  type: \"any\";\n}\n\nexport interface IEndExpectation {\n  type: \"end\";\n}\n\nexport interface IOtherExpectation {\n  type: \"other\";\n  description: string;\n}\n\nexport type Expectation = ILiteralExpectation | IClassExpectation | IAnyExpectation | IEndExpectation | IOtherExpectation;\n\nfunction peg$padEnd(str: string, targetLength: number, padString: string) {\n  padString = padString || ' ';\n  if (str.length > targetLength) {\n    return str;\n  }\n  targetLength -= str.length;\n  padString += padString.repeat(targetLength);\n  return str + padString.slice(0, targetLength);\n}\n\nexport class SyntaxError extends Error {\n  public static buildMessage(expected: Expectation[], found: string | null) {\n    function hex(ch: string): string {\n      return ch.charCodeAt(0).toString(16).toUpperCase();\n    }\n\n    function literalEscape(s: string): string {\n      return s\n        .replace(/\\\\/g, \"\\\\\\\\\")\n        .replace(/\"/g,  \"\\\\\\\"\")\n        .replace(/\\0/g, \"\\\\0\")\n        .replace(/\\t/g, \"\\\\t\")\n        .replace(/\\n/g, \"\\\\n\")\n        .replace(/\\r/g, \"\\\\r\")\n        .replace(/[\\x00-\\x0F]/g,            (ch) => \"\\\\x0\" + hex(ch) )\n        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, (ch) => \"\\\\x\"  + hex(ch) );\n    }\n\n    function classEscape(s: string): string {\n      return s\n        .replace(/\\\\/g, \"\\\\\\\\\")\n        .replace(/\\]/g, \"\\\\]\")\n        .replace(/\\^/g, \"\\\\^\")\n        .replace(/-/g,  \"\\\\-\")\n        .replace(/\\0/g, \"\\\\0\")\n        .replace(/\\t/g, \"\\\\t\")\n        .replace(/\\n/g, \"\\\\n\")\n        .replace(/\\r/g, \"\\\\r\")\n        .replace(/[\\x00-\\x0F]/g,            (ch) => \"\\\\x0\" + hex(ch) )\n        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, (ch) => \"\\\\x\"  + hex(ch) );\n    }\n\n    function describeExpectation(expectation: Expectation) {\n      switch (expectation.type) {\n        case \"literal\":\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        case \"class\":\n          const escapedParts = expectation.parts.map((part) => {\n            return Array.isArray(part)\n              ? classEscape(part[0] as string) + \"-\" + classEscape(part[1] as string)\n              : classEscape(part);\n          });\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        case \"any\":\n          return \"any character\";\n        case \"end\":\n          return \"end of input\";\n        case \"other\":\n          return expectation.description;\n      }\n    }\n\n    function describeExpected(expected1: Expectation[]) {\n      const descriptions = expected1.map(describeExpectation);\n      let i: number;\n      let j: number;\n\n      descriptions.sort();\n\n      if (descriptions.length > 0) {\n        for (i = 1, j = 1; i < descriptions.length; i++) {\n          if (descriptions[i - 1] !== descriptions[i]) {\n            descriptions[j] = descriptions[i];\n            j++;\n          }\n        }\n        descriptions.length = j;\n      }\n\n      switch (descriptions.length) {\n        case 1:\n          return descriptions[0];\n\n        case 2:\n          return descriptions[0] + \" or \" + descriptions[1];\n\n        default:\n          return descriptions.slice(0, -1).join(\", \")\n            + \", or \"\n            + descriptions[descriptions.length - 1];\n      }\n    }\n\n    function describeFound(found1: string | null) {\n      return found1 ? \"\\\"\" + literalEscape(found1) + \"\\\"\" : \"end of input\";\n    }\n\n    return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n  }\n\n  public message: string;\n  public expected: Expectation[];\n  public found: string | null;\n  public location: IFileRange;\n  public name: string;\n\n  constructor(message: string, expected: Expectation[], found: string | null, location: IFileRange) {\n    super();\n    this.message = message;\n    this.expected = expected;\n    this.found = found;\n    this.location = location;\n    this.name = \"SyntaxError\";\n\n    if (typeof (Object as any).setPrototypeOf === \"function\") {\n      (Object as any).setPrototypeOf(this, SyntaxError.prototype);\n    } else {\n      (this as any).__proto__ = SyntaxError.prototype;\n    }\n    if (typeof (Error as any).captureStackTrace === \"function\") {\n      (Error as any).captureStackTrace(this, SyntaxError);\n    }\n  }\n\n  format(sources: { source: string; text: string }[]): string {\n    let str = 'Error: ' + this.message;\n    if (this.location) {\n      let src: string[] | null = null;\n      let k;\n      for (k = 0; k < sources.length; k++) {\n        if (sources[k].source === this.location.source) {\n          src = sources[k].text.split(/\\r\\n|\\n|\\r/g);\n          break;\n        }\n      }\n      let s = this.location.start;\n      let loc = this.location.source + ':' + s.line + ':' + s.column;\n      if (src) {\n        let e = this.location.end;\n        let filler = peg$padEnd('', s.line.toString().length, ' ');\n        let line = src[s.line - 1];\n        let last = s.line === e.line ? e.column : line.length + 1;\n        str += '\\n --> ' + loc + '\\n' + filler + ' |\\n' + s.line + ' | ' + line + '\\n' + filler + ' | ' +\n          peg$padEnd('', s.column - 1, ' ') +\n          peg$padEnd('', last - s.column, '^');\n      } else {\n        str += '\\n at ' + loc;\n      }\n    }\n    return str;\n  }\n}\n\nfunction peg$parse(input: string, options?: IParseOptions) {\n  options = options !== undefined ? options : {};\n\n  const peg$FAILED: Readonly<any> = {};\n  const peg$source = options.grammarSource;\n\n  const peg$startRuleIndices: {[id: string]: number}  = { Actions: 5, Expression: 0 };\n  let peg$startRuleIndex = 5;\n\n  const peg$consts = [\n    function(head: any, tail: any): any {\n          return tail.reduce(function(result, element) {\n              return result + element[1] + element[3];\n          }, head);\n      },\n    function(): any { return 'false'; },\n    \"===\",\n    peg$literalExpectation(\"===\", false),\n    \"==\",\n    peg$literalExpectation(\"==\", false),\n    \"!==\",\n    peg$literalExpectation(\"!==\", false),\n    \"!=\",\n    peg$literalExpectation(\"!=\", false),\n    \"<=\",\n    peg$literalExpectation(\"<=\", false),\n    \">=\",\n    peg$literalExpectation(\">=\", false),\n    \"<\",\n    peg$literalExpectation(\"<\", false),\n    \">\",\n    peg$literalExpectation(\">\", false),\n    \"+\",\n    peg$literalExpectation(\"+\", false),\n    \"-\",\n    peg$literalExpectation(\"-\", false),\n    \"*\",\n    peg$literalExpectation(\"*\", false),\n    \"/\",\n    peg$literalExpectation(\"/\", false),\n    \"&&\",\n    peg$literalExpectation(\"&&\", false),\n    \"&\",\n    peg$literalExpectation(\"&\", false),\n    \"||\",\n    peg$literalExpectation(\"||\", false),\n    \"|\",\n    peg$literalExpectation(\"|\", false),\n    \"!\",\n    peg$literalExpectation(\"!\", false),\n    \"(\",\n    peg$literalExpectation(\"(\", false),\n    \")\",\n    peg$literalExpectation(\")\", false),\n    function(expr: any): any { return '(' + expr + ')'; },\n    function(s: any): any { return '\\'' + s + '\\''; },\n    function(path: any): any {\n          const parts = path.split('.').map(part => '\\'' + part + '\\'');\n          return 'this.getDataValue([' + parts.join(',') + '])';\n      },\n    \"!~\",\n    peg$literalExpectation(\"!~\", false),\n    function(successChain: any, rejectChain: any): any { return { successChain: successChain, rejectChain: rejectChain } },\n    function(successChain: any): any { return { successChain: successChain, rejectChain: [] } },\n    \"->\",\n    peg$literalExpectation(\"->\", false),\n    function(lhs: any, rhs: any): any { return [lhs].concat(rhs) },\n    function(func: any): any { return [func] },\n    function(funcname: any, args: any): any { return { funcname: funcname, args: args } },\n    \"()\",\n    peg$literalExpectation(\"()\", false),\n    function(funcname: any): any { return { funcname: funcname, args: [] } },\n    \",\",\n    peg$literalExpectation(\",\", false),\n    function(arg: any): any { return [arg] },\n    /^[ \\t\\n\\r]/,\n    peg$classExpectation([\" \", \"\\t\", \"\\n\", \"\\r\"], false, false),\n    \"[\",\n    peg$literalExpectation(\"[\", false),\n    \"{\",\n    peg$literalExpectation(\"{\", false),\n    \"]\",\n    peg$literalExpectation(\"]\", false),\n    \"}\",\n    peg$literalExpectation(\"}\", false),\n    \":\",\n    peg$literalExpectation(\":\", false),\n    function(head: any, m: any): any { return m; },\n    function(head: any, tail: any): any {\n            var result = {};\n\n            [head].concat(tail).forEach(function(element) {\n              result[element.name] = element.value;\n            });\n\n            return result;\n          },\n    function(members: any): any { return members !== null ? members: {}; },\n    function(name: any, value: any): any { return { name: name, value: value } },\n    /^[$A-Za-z_]/,\n    peg$classExpectation([\"$\", [\"A\", \"Z\"], [\"a\", \"z\"], \"_\"], false, false),\n    /^[$0-9A-Za-z_]/,\n    peg$classExpectation([\"$\", [\"0\", \"9\"], [\"A\", \"Z\"], [\"a\", \"z\"], \"_\"], false, false),\n    function(head: any, v: any): any { return v; },\n    function(head: any, tail: any): any { return [head].concat(tail); },\n    function(values: any): any { return values !== null ? values : []; },\n    peg$otherExpectation(\"number\"),\n    function(): any { return parseFloat(text()); },\n    \".\",\n    peg$literalExpectation(\".\", false),\n    /^[1-9]/,\n    peg$classExpectation([[\"1\", \"9\"]], false, false),\n    /^[eE]/,\n    peg$classExpectation([\"e\", \"E\"], false, false),\n    \"0\",\n    peg$literalExpectation(\"0\", false),\n    peg$otherExpectation(\"string\"),\n    \"\\\"\",\n    peg$literalExpectation(\"\\\"\", false),\n    function(chars: any): any { return chars },\n    \"'\",\n    peg$literalExpectation(\"'\", false),\n    /^[^\\0-\\x1F\"\\\\]/,\n    peg$classExpectation([[\"\\0\", \"\\x1F\"], \"\\\"\", \"\\\\\"], true, false),\n    \"\\\\\\\"\",\n    peg$literalExpectation(\"\\\\\\\"\", false),\n    function(): any { return '\"' },\n    /^[^\\0-\\x1F'\\\\]/,\n    peg$classExpectation([[\"\\0\", \"\\x1F\"], \"'\", \"\\\\\"], true, false),\n    \"\\\\'\",\n    peg$literalExpectation(\"\\\\'\", false),\n    function(): any { return \"'\" },\n    \"\\\\\\\\\",\n    peg$literalExpectation(\"\\\\\\\\\", false),\n    \"\\\\b\",\n    peg$literalExpectation(\"\\\\b\", false),\n    \"\\\\f\",\n    peg$literalExpectation(\"\\\\f\", false),\n    \"\\\\n\",\n    peg$literalExpectation(\"\\\\n\", false),\n    \"\\\\r\",\n    peg$literalExpectation(\"\\\\r\", false),\n    \"\\\\t\",\n    peg$literalExpectation(\"\\\\t\", false),\n    \"\\\\u\",\n    peg$literalExpectation(\"\\\\u\", false),\n    function(digits: any): any { return String.fromCharCode(parseInt(digits, 16)) },\n    peg$otherExpectation(\"boolean\"),\n    function(): any { return true; },\n    function(): any { return false; },\n    function(): any { return null; },\n    \"false\",\n    peg$literalExpectation(\"false\", false),\n    \"true\",\n    peg$literalExpectation(\"true\", false),\n    \"null\",\n    peg$literalExpectation(\"null\", false),\n    function(head: any, tail: any): any {\n          return tail.reduce(function(result, element) {\n              return result + '.' + element[1];\n          }, head);\n      },\n    \"...\",\n    peg$literalExpectation(\"...\", false),\n    \"..\",\n    peg$literalExpectation(\"..\", false),\n    function(prefix: any, variable: any): any {\n          return prefix + variable;\n      },\n    function(var_starter: any, var_remainder: any): any {\n       return var_starter + var_remainder;\n    },\n    /^[$a-zA-Z_]/,\n    peg$classExpectation([\"$\", [\"a\", \"z\"], [\"A\", \"Z\"], \"_\"], false, false),\n    /^[$a-zA-Z0-9_]/,\n    peg$classExpectation([\"$\", [\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \"_\"], false, false),\n    function(identifier: any): any {\n        return identifier instanceof Array ? identifier.join('') : identifier;\n      },\n    /^[0-9]/,\n    peg$classExpectation([[\"0\", \"9\"]], false, false),\n    /^[0-9a-f]/i,\n    peg$classExpectation([[\"0\", \"9\"], [\"a\", \"f\"]], false, true)\n  ];\n\n  const peg$bytecode = [\n    peg$decode(\"%;*/\\x9E#;#/\\x95$;*/\\x8C$$%;*/>#;!/5$;*/,$; /#$+$)($'#(#'#(\\\"'#&'#0H*%;*/>#;!/5$;*/,$; /#$+$)($'#(#'#(\\\"'#&'#&/2$;*/)$8%: %\\\"#!)(%'#($'#(#'#(\\\"'#&'#.. &%;*/& 8!:!! )\"),\n    peg$decode(\"2\\\"\\\"\\\"6\\\"7#.\\xD1 &2$\\\"\\\"6$7%.\\xC5 &2&\\\"\\\"6&7'.\\xB9 &2(\\\"\\\"6(7).\\xAD &2*\\\"\\\"6*7+.\\xA1 &2,\\\"\\\"6,7-.\\x95 &2.\\\"\\\"6.7/.\\x89 &20\\\"\\\"6071.} &22\\\"\\\"6273.q &24\\\"\\\"6475.e &26\\\"\\\"6677.Y &28\\\"\\\"6879.M &2:\\\"\\\"6:7;.A &2<\\\"\\\"6<7=.5 &2>\\\"\\\"6>7?.) &2@\\\"\\\"6@7A\"),\n    peg$decode(\"2B\\\"\\\"6B7C\"),\n    peg$decode(\"%2D\\\"\\\"6D7E/R#;*/I$; /@$;*/7$2F\\\"\\\"6F7G/($8%:H%!\\\")(%'#($'#(#'#(\\\"'#&'#.A &;6.; &;D.5 &;$./ &%;@/' 8!:I!! )\"),\n    peg$decode(\"%;H/' 8!:J!! )\"),\n    peg$decode(\"%;&/\\\\#;*/S$2K\\\"\\\"6K7L/D$;*/;$;&/2$;*/)$8&:M&\\\"%!)(&'#(%'#($'#(#'#(\\\"'#&'#./ &%;&/' 8!:N!! )\"),\n    peg$decode(\"%;'/\\\\#;*/S$2O\\\"\\\"6O7P/D$;*/;$;&/2$;*/)$8&:Q&\\\"%!)(&'#(%'#($'#(#'#(\\\"'#&'#./ &%;'/' 8!:R!! )\"),\n    peg$decode(\"%;*/i#%;4/\\\"!&,)/Y$2D\\\"\\\"6D7E/J$;(/A$2F\\\"\\\"6F7G/2$;*/)$8&:S&\\\"$\\\")(&'#(%'#($'#(#'#(\\\"'#&'#.a &%%;4/\\\"!&,)/7#2T\\\"\\\"6T7U/($8\\\":V\\\"!!)(\\\"'#&'#.6 &%%;4/\\\"!&,)/' 8!:V!! )\"),\n    peg$decode(\"%;)/S#;*/J$2W\\\"\\\"6W7X/;$;*/2$;(/)$8%:Q%\\\"$ )(%'#($'#(#'#(\\\"'#&'#./ &%;)/' 8!:Y!! )\"),\n    peg$decode(\";6./ &;@.) &;2.# &;5\"),\n    peg$decode(\"$4Z\\\"\\\"5!7[0)*4Z\\\"\\\"5!7[&\"),\n    peg$decode(\"%;*/;#2\\\\\\\"\\\"6\\\\7]/,$;*/#$+#)(#'#(\\\"'#&'#\"),\n    peg$decode(\"%;*/;#2^\\\"\\\"6^7_/,$;*/#$+#)(#'#(\\\"'#&'#\"),\n    peg$decode(\"%;*/;#2`\\\"\\\"6`7a/,$;*/#$+#)(#'#(\\\"'#&'#\"),\n    peg$decode(\"%;*/;#2b\\\"\\\"6b7c/,$;*/#$+#)(#'#(\\\"'#&'#\"),\n    peg$decode(\"%;*/;#2d\\\"\\\"6d7e/,$;*/#$+#)(#'#(\\\"'#&'#\"),\n    peg$decode(\"%;*/;#2W\\\"\\\"6W7X/,$;*/#$+#)(#'#(\\\"'#&'#\"),\n    peg$decode(\";D.5 &;2./ &;5.) &;6.# &;@\"),\n    peg$decode(\"%;,/\\x91#%;3/k#$%;0/2#;3/)$8\\\":f\\\"\\\"$ )(\\\"'#&'#0<*%;0/2#;3/)$8\\\":f\\\"\\\"$ )(\\\"'#&'#&/)$8\\\":g\\\"\\\"! )(\\\"'#&'#.\\\" &\\\"/1$;./($8#:h#!!)(#'#(\\\"'#&'#\"),\n    peg$decode(\"%;@/;#;//2$;1/)$8#:i#\\\"\\\" )(#'#(\\\"'#&'#.L &%%;4/\\\"!&,)/;#;//2$;1/)$8#:i#\\\"\\\" )(#'#(\\\"'#&'#\"),\n    peg$decode(\"%4j\\\"\\\"5!7k/?#$4l\\\"\\\"5!7m0)*4l\\\"\\\"5!7m&/#$+\\\")(\\\"'#&'#\"),\n    peg$decode(\"%;+/\\x91#%;1/k#$%;0/2#;1/)$8\\\":n\\\"\\\"$ )(\\\"'#&'#0<*%;0/2#;1/)$8\\\":n\\\"\\\"$ )(\\\"'#&'#&/)$8\\\":o\\\"\\\"! )(\\\"'#&'#.\\\" &\\\"/1$;-/($8#:p#!!)(#'#(\\\"'#&'#\"),\n    peg$decode(\"<%;=.\\\" &\\\"/L#;</C$;;.\\\" &\\\"/5$;:.\\\" &\\\"/'$8$:r$ )($'#(#'#(\\\"'#&'#=.\\\" 7q\"),\n    peg$decode(\"2s\\\"\\\"6s7t\"),\n    peg$decode(\"4u\\\"\\\"5!7v\"),\n    peg$decode(\"4w\\\"\\\"5!7x\"),\n    peg$decode(\"%;9/M#;=.# &;>.\\\" &\\\"/9$$;M/&#0#*;M&&&#/#$+#)(#'#(\\\"'#&'#\"),\n    peg$decode(\"%;7/9#$;M/&#0#*;M&&&#/#$+\\\")(\\\"'#&'#\"),\n    peg$decode(\";?.= &%;8/3#$;M0#*;M&/#$+\\\")(\\\"'#&'#\"),\n    peg$decode(\"24\\\"\\\"6475\"),\n    peg$decode(\"22\\\"\\\"6273\"),\n    peg$decode(\"2y\\\"\\\"6y7z\"),\n    peg$decode(\"<%2|\\\"\\\"6|7}/N#%$;A0#*;A&/\\\"!&,)/7$2|\\\"\\\"6|7}/($8#:~#!!)(#'#(\\\"'#&'#.^ &%2\\x7F\\\"\\\"6\\x7F7\\x80/N#%$;B0#*;B&/\\\"!&,)/7$2\\x7F\\\"\\\"6\\x7F7\\x80/($8#:~#!!)(#'#(\\\"'#&'#=.\\\" 7{\"),\n    peg$decode(\"4\\x81\\\"\\\"5!7\\x82.: &%2\\x83\\\"\\\"6\\x837\\x84/& 8!:\\x85! ).# &;C\"),\n    peg$decode(\"4\\x86\\\"\\\"5!7\\x87.: &%2\\x88\\\"\\\"6\\x887\\x89/& 8!:\\x8A! ).# &;C\"),\n    peg$decode(\"2\\x8B\\\"\\\"6\\x8B7\\x8C.\\xA9 &2\\x8D\\\"\\\"6\\x8D7\\x8E.\\x9D &2\\x8F\\\"\\\"6\\x8F7\\x90.\\x91 &2\\x91\\\"\\\"6\\x917\\x92.\\x85 &2\\x93\\\"\\\"6\\x937\\x94.y &2\\x95\\\"\\\"6\\x957\\x96.m &%2\\x97\\\"\\\"6\\x977\\x98/]#%%;N/>#;N/5$;N/,$;N/#$+$)($'#(#'#(\\\"'#&'#/\\\"!&,)/($8\\\":\\x99\\\"! )(\\\"'#&'#\"),\n    peg$decode(\"<%;F/& 8!:\\x9B! ).? &%;E/& 8!:\\x9C! ).. &%;G/& 8!:\\x9D! )=.\\\" 7\\x9A\"),\n    peg$decode(\"2\\x9E\\\"\\\"6\\x9E7\\x9F\"),\n    peg$decode(\"2\\xA0\\\"\\\"6\\xA07\\xA1\"),\n    peg$decode(\"2\\xA2\\\"\\\"6\\xA27\\xA3\"),\n    peg$decode(\"%;I/\\x91#$%2s\\\"\\\"6s7t/?#;J.0 &$;M/&#0#*;M&&&#/#$+\\\")(\\\"'#&'#0O*%2s\\\"\\\"6s7t/?#;J.0 &$;M/&#0#*;M&&&#/#$+\\\")(\\\"'#&'#&/)$8\\\":\\xA4\\\"\\\"! )(\\\"'#&'#\"),\n    peg$decode(\"%2\\xA5\\\"\\\"6\\xA57\\xA6.5 &2\\xA7\\\"\\\"6\\xA77\\xA8.) &2s\\\"\\\"6s7t/2#;J/)$8\\\":\\xA9\\\"\\\"! )(\\\"'#&'#.# &;J\"),\n    peg$decode(\"%;K/2#;L/)$8\\\":\\xAA\\\"\\\"! )(\\\"'#&'#\"),\n    peg$decode(\"4\\xAB\\\"\\\"5!7\\xAC\"),\n    peg$decode(\"%$4\\xAD\\\"\\\"5!7\\xAE0)*4\\xAD\\\"\\\"5!7\\xAE&/' 8!:\\xAF!! )\"),\n    peg$decode(\"4\\xB0\\\"\\\"5!7\\xB1\"),\n    peg$decode(\"4\\xB2\\\"\\\"5!7\\xB3\")\n  ];\n\n  let peg$currPos = 0;\n  let peg$savedPos = 0;\n  const peg$posDetailsCache = [{ line: 1, column: 1 }];\n  let peg$maxFailPos = 0;\n  let peg$maxFailExpected: Expectation[] = [];\n  let peg$silentFails = 0;\n\n  let peg$result;\n\n  if (options.startRule !== undefined) {\n    if (!(options.startRule in peg$startRuleIndices)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleIndex = peg$startRuleIndices[options.startRule];\n  }\n\n  function text(): string {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location(): IFileRange {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description: string, location1?: IFileRange) {\n    location1 = location1 !== undefined\n      ? location1\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location1\n    );\n  }\n\n  function error(message: string, location1?: IFileRange) {\n    location1 = location1 !== undefined\n      ? location1\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildSimpleError(message, location1);\n  }\n\n  function peg$literalExpectation(text1: string, ignoreCase: boolean): ILiteralExpectation {\n    return { type: \"literal\", text: text1, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts: IClassParts, inverted: boolean, ignoreCase: boolean): IClassExpectation {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation(): IAnyExpectation {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation(): IEndExpectation {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description: string): IOtherExpectation {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos: number) {\n    let details = peg$posDetailsCache[pos];\n    let p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line: details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos: number, endPos: number): IFileRange {\n    const startPosDetails = peg$computePosDetails(startPos);\n    const endPosDetails = peg$computePosDetails(endPos);\n\n    return {\n      source: peg$source,\n      start: {\n        offset: startPos,\n        line: startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line: endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected1: Expectation) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected1);\n  }\n\n  function peg$buildSimpleError(message: string, location1: IFileRange) {\n    return new SyntaxError(message, [], \"\", location1);\n  }\n\n  function peg$buildStructuredError(expected1: Expectation[], found: string | null, location1: IFileRange) {\n    return new SyntaxError(\n      SyntaxError.buildMessage(expected1, found),\n      expected1,\n      found,\n      location1\n    );\n  }\n\n  function peg$decode(s: string): number[] {\n    return s.split(\"\").map((ch) =>  ch.charCodeAt(0) - 32 );\n  }\n\n  function peg$parseRule(index: number): any {\n    const bc = peg$bytecode[index];\n    let ip = 0;\n    const ips: any[] = [];\n    let end = bc.length;\n    const ends: any[] = [];\n    const stack: any[] = [];\n    let params;\n\n    while (true) {\n      while (ip < end) {\n        switch (bc[ip]) {\n          case 0:\n            stack.push(peg$consts[bc[ip + 1]]);\n            ip += 2;\n            break;\n\n          case 1:\n            stack.push(undefined);\n            ip++;\n            break;\n\n          case 2:\n            stack.push(null);\n            ip++;\n            break;\n\n          case 3:\n            stack.push(peg$FAILED);\n            ip++;\n            break;\n\n          case 4:\n            stack.push([]);\n            ip++;\n            break;\n\n          case 5:\n            stack.push(peg$currPos);\n            ip++;\n            break;\n\n          case 6:\n            stack.pop();\n            ip++;\n            break;\n\n          case 7:\n            peg$currPos = stack.pop();\n            ip++;\n            break;\n\n          case 8:\n            stack.length -= bc[ip + 1];\n            ip += 2;\n            break;\n\n          case 9:\n            stack.splice(-2, 1);\n            ip++;\n            break;\n\n          case 10:\n            stack[stack.length - 2].push(stack.pop());\n            ip++;\n            break;\n\n          case 11:\n            stack.push(stack.splice(stack.length - bc[ip + 1], bc[ip + 1]));\n            ip += 2;\n            break;\n\n          case 12:\n            stack.push(input.substring(stack.pop(), peg$currPos));\n            ip++;\n            break;\n\n          case 13:\n            ends.push(end);\n            ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n            if (stack[stack.length - 1]) {\n              end = ip + 3 + bc[ip + 1];\n              ip += 3;\n            } else {\n              end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n              ip += 3 + bc[ip + 1];\n            }\n\n            break;\n\n          case 14:\n            ends.push(end);\n            ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n            if (stack[stack.length - 1] === peg$FAILED) {\n              end = ip + 3 + bc[ip + 1];\n              ip += 3;\n            } else {\n              end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n              ip += 3 + bc[ip + 1];\n            }\n\n            break;\n\n          case 15:\n            ends.push(end);\n            ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n            if (stack[stack.length - 1] !== peg$FAILED) {\n              end = ip + 3 + bc[ip + 1];\n              ip += 3;\n            } else {\n              end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n              ip += 3 + bc[ip + 1];\n            }\n\n            break;\n\n          case 16:\n            if (stack[stack.length - 1] !== peg$FAILED) {\n              ends.push(end);\n              ips.push(ip);\n\n              end = ip + 2 + bc[ip + 1];\n              ip += 2;\n            } else {\n              ip += 2 + bc[ip + 1];\n            }\n\n            break;\n\n          case 17:\n            ends.push(end);\n            ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n            if (input.length > peg$currPos) {\n              end = ip + 3 + bc[ip + 1];\n              ip += 3;\n            } else {\n              end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n              ip += 3 + bc[ip + 1];\n            }\n\n            break;\n\n          case 18:\n            ends.push(end);\n            ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n\n            if (input.substr(peg$currPos, (peg$consts[bc[ip + 1]] as string).length) === peg$consts[bc[ip + 1]]) {\n              end = ip + 4 + bc[ip + 2];\n              ip += 4;\n            } else {\n              end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n              ip += 4 + bc[ip + 2];\n            }\n\n            break;\n\n          case 19:\n            ends.push(end);\n            ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n\n            if (input.substr(peg$currPos, (peg$consts[bc[ip + 1]] as string).length).toLowerCase() === peg$consts[bc[ip + 1]]) {\n              end = ip + 4 + bc[ip + 2];\n              ip += 4;\n            } else {\n              end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n              ip += 4 + bc[ip + 2];\n            }\n\n            break;\n\n          case 20:\n            ends.push(end);\n            ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n\n            if ((peg$consts[bc[ip + 1]] as RegExp).test(input.charAt(peg$currPos))) {\n              end = ip + 4 + bc[ip + 2];\n              ip += 4;\n            } else {\n              end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n              ip += 4 + bc[ip + 2];\n            }\n\n            break;\n\n          case 21:\n            stack.push(input.substr(peg$currPos, bc[ip + 1]));\n            peg$currPos += bc[ip + 1];\n            ip += 2;\n            break;\n\n          case 22:\n            stack.push(peg$consts[bc[ip + 1]]);\n            peg$currPos += (peg$consts[bc[ip + 1]] as string).length;\n            ip += 2;\n            break;\n\n          case 23:\n            stack.push(peg$FAILED);\n            if (peg$silentFails === 0) {\n              peg$fail(peg$consts[bc[ip + 1]] as ILiteralExpectation);\n            }\n            ip += 2;\n            break;\n\n          case 24:\n            peg$savedPos = stack[stack.length - 1 - bc[ip + 1]];\n            ip += 2;\n            break;\n\n          case 25:\n            peg$savedPos = peg$currPos;\n            ip++;\n            break;\n\n          case 26:\n            params = bc.slice(ip + 4, ip + 4 + bc[ip + 3])\n              .map(function(p) { return stack[stack.length - 1 - p]; });\n\n            stack.splice(\n              stack.length - bc[ip + 2],\n              bc[ip + 2],\n              (peg$consts[bc[ip + 1]] as ((...args: any[]) => any)).apply(null, params)\n            );\n\n            ip += 4 + bc[ip + 3];\n            break;\n\n          case 27:\n            stack.push(peg$parseRule(bc[ip + 1]));\n            ip += 2;\n            break;\n\n          case 28:\n            peg$silentFails++;\n            ip++;\n            break;\n\n          case 29:\n            peg$silentFails--;\n            ip++;\n            break;\n\n          default:\n            throw new Error(\"Invalid opcode: \" + bc[ip] + \".\");\n        }\n      }\n\n      if (ends.length > 0) {\n        end = ends.pop();\n        ip = ips.pop();\n      } else {\n        break;\n      }\n    }\n\n    return stack[0];\n  }\n\n  peg$result = peg$parseRule(peg$startRuleIndex);\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nexport interface IParseOptions {\n  filename?: string;\n  startRule?: string;\n  tracer?: any;\n  [key: string]: any;\n}\nexport type ParseFunction = (input: string, options?: IParseOptions) => any;\nexport const parse: ParseFunction = peg$parse;\n\n", "/**\n * MicroEvent - to make any js object an event emitter\n *\n * - pure javascript - server compatible, browser compatible\n * - dont rely on the browser doms\n * - super simple - you get it immediatly, no mistery, no magic involved\n *\n * @author Jerome Etienne (https://github.com/jeromeetienne)\n */\n\ntype TCallback = (...args:any) => any;\n\n/**\n * Execute callback for each event in space separated list of event names\n *\n */\nfunction forEvents(events:string,callback:(event:string)=>any){\n\tevents.split(/\\s+/).forEach((event) =>{\n\t\tcallback(event);\n\t});\n}\n\nexport default class MicroEvent{\n\n\tpublic _events: {[key:string]:TCallback[]};\n\n\tconstructor(){\n\t\tthis._events = {};\n\t}\n\n\ton(events:string, fct:TCallback){\n\t\tforEvents(events,(event) => {\n\t\t\tthis._events[event] = this._events[event] || [];\n\t\t\tthis._events[event].push(fct);\n\t\t});\n\t}\n\n\toff(events:string, fct:TCallback){\n\t\tvar n = arguments.length;\n\t\tif( n === 0 ){\n\t\t\tthis._events = {};\n\t\t\treturn;\n\t\t}\n\n\t\tforEvents(events,(event) => {\n\n\t\t\tif (n === 1) return delete this._events[event];\n\n\t\t\tif (event in this._events === false) return;\n\t\t\tthis._events[event].splice(this._events[event].indexOf(fct), 1);\n\t\t});\n\t}\n\n\ttrigger(events:string, ...args:any){\n\t\tvar self = this;\n\n\t\tforEvents(events,(event) => {\n\t\t\tif(event in self._events === false) return;\n\t\t\tfor( let fct of self._events[event] ){\n\t\t\t\tfct.apply(self, args );\n\t\t\t}\n\t\t});\n\t}\n};\n", "/**\n * microplugin.js\n * Copyright (c) 2013 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\ntype TSettings = {\n\t[key:string]:any\n}\n\ntype TPlugins = {\n\tnames: string[],\n\tsettings: TSettings,\n\trequested: {[key:string]:boolean},\n\tloaded: {[key:string]:any}\n};\n\nexport type TPluginItem = {name:string,options:{}};\nexport type TPluginHash = {[key:string]:{}};\n\n\n\n\nexport default function MicroPlugin(Interface: any ){\n\n\tInterface.plugins = {};\n\n\treturn class extends Interface{\n\n\t\tpublic plugins:TPlugins = {\n\t\t\tnames     : [],\n\t\t\tsettings  : {},\n\t\t\trequested : {},\n\t\t\tloaded    : {}\n\t\t};\n\n\t\t/**\n\t\t * Registers a plugin.\n\t\t *\n\t\t * @param {function} fn\n\t\t */\n\t\tstatic define(name:string, fn:(this:any,settings:TSettings)=>any){\n\t\t\tInterface.plugins[name] = {\n\t\t\t\t'name' : name,\n\t\t\t\t'fn'   : fn\n\t\t\t};\n\t\t}\n\n\n\t\t/**\n\t\t * Initializes the listed plugins (with options).\n\t\t * Acceptable formats:\n\t\t *\n\t\t * List (without options):\n\t\t *   ['a', 'b', 'c']\n\t\t *\n\t\t * List (with options):\n\t\t *   [{'name': 'a', options: {}}, {'name': 'b', options: {}}]\n\t\t *\n\t\t * Hash (with options):\n\t\t *   {'a': { ... }, 'b': { ... }, 'c': { ... }}\n\t\t *\n\t\t * @param {array|object} plugins\n\t\t */\n\t\tinitializePlugins(plugins:string[]|TPluginItem[]|TPluginHash) {\n\t\t\tvar key, name;\n\t\t\tconst self  = this;\n\t\t\tconst queue:string[] = [];\n\n\t\t\tif (Array.isArray(plugins)) {\n\t\t\t\tplugins.forEach((plugin:string|TPluginItem)=>{\n\t\t\t\t\tif (typeof plugin === 'string') {\n\t\t\t\t\t\tqueue.push(plugin);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.plugins.settings[plugin.name] = plugin.options;\n\t\t\t\t\t\tqueue.push(plugin.name);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (plugins) {\n\t\t\t\tfor (key in plugins) {\n\t\t\t\t\tif (plugins.hasOwnProperty(key)) {\n\t\t\t\t\t\tself.plugins.settings[key] = plugins[key];\n\t\t\t\t\t\tqueue.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twhile( name = queue.shift() ){\n\t\t\t\tself.require(name);\n\t\t\t}\n\t\t}\n\n\t\tloadPlugin(name:string) {\n\t\t\tvar self    = this;\n\t\t\tvar plugins = self.plugins;\n\t\t\tvar plugin  = Interface.plugins[name];\n\n\t\t\tif (!Interface.plugins.hasOwnProperty(name)) {\n\t\t\t\tthrow new Error('Unable to find \"' +  name + '\" plugin');\n\t\t\t}\n\n\t\t\tplugins.requested[name] = true;\n\t\t\tplugins.loaded[name] = plugin.fn.apply(self, [self.plugins.settings[name] || {}]);\n\t\t\tplugins.names.push(name);\n\t\t}\n\n\t\t/**\n\t\t * Initializes a plugin.\n\t\t *\n\t\t */\n\t\trequire(name:string) {\n\t\t\tvar self = this;\n\t\t\tvar plugins = self.plugins;\n\n\t\t\tif (!self.plugins.loaded.hasOwnProperty(name)) {\n\t\t\t\tif (plugins.requested[name]) {\n\t\t\t\t\tthrow new Error('Plugin has circular dependency (\"' + name + '\")');\n\t\t\t\t}\n\t\t\t\tself.loadPlugin(name);\n\t\t\t}\n\n\t\t\treturn plugins.loaded[name];\n\t\t}\n\n\t};\n\n}\n", "\n// @ts-ignore TS2691 \"An import path cannot end with a '.ts' extension\"\nimport { escape_regex } from './utils.ts';\n\ntype TDiacraticList = {[key:string]:string};\n\n// https://github.com/andrewrk/node-diacritics/blob/master/index.js\n\nvar latin_pat:RegExp;\nconst accent_pat = '[\\u0300-\\u036F\\u{b7}\\u{2be}]'; // \\u{2bc}\nconst accent_reg = new RegExp(accent_pat,'gu');\nvar diacritic_patterns:TDiacraticList;\n\nconst latin_convert:TDiacraticList = {\n\t'\u00E6': 'ae',\n\t'\u2C65': 'a',\n\t'\u00F8': 'o',\n};\n\nconst convert_pat = new RegExp(Object.keys(latin_convert).join('|'),'gu');\n\nconst code_points:[[number,number]] = [[ 0, 65535 ]];\n\n/**\n * Remove accents\n * via https://github.com/krisk/Fuse/issues/133#issuecomment-318692703\n *\n */\nexport const asciifold = (str:string):string => {\n\treturn str\n\t\t.normalize('NFKD')\n\t\t.replace(accent_reg, '')\n\t\t.toLowerCase()\n\t\t.replace(convert_pat,function(foreignletter) {\n\t\t\treturn latin_convert[foreignletter] || foreignletter;\n\t\t});\n};\n\n/**\n * Convert array of strings to a regular expression\n *\tex ['ab','a'] => (?:ab|a)\n * \tex ['a','b'] => [ab]\n *\n */\nexport const arrayToPattern = (chars:string[],glue:string='|'):string =>{\n\n\tif( chars.length === 1 && chars[0] != undefined ){\n\t\treturn chars[0];\n\t}\n\n\tvar longest = 1;\n\tchars.forEach((a)=>{longest = Math.max(longest,a.length)});\n\n\tif( longest == 1 ){\n\t\treturn '['+chars.join('')+']';\n\t}\n\n\treturn '(?:'+chars.join(glue)+')';\n};\n\nexport const escapeToPattern = (chars:string[]):string =>{\n\tconst escaped = chars.map((diacritic) => escape_regex(diacritic));\n\treturn arrayToPattern(escaped);\n};\n\n/**\n * Get all possible combinations of substrings that add up to the given string\n * https://stackoverflow.com/questions/30169587/find-all-the-combination-of-substrings-that-add-up-to-the-given-string\n *\n */\nexport const allSubstrings = (input:string):string[][] => {\n\n    if( input.length === 1) return [[input]];\n\n    var result:string[][] = [];\n    allSubstrings(input.substring(1)).forEach(function(subresult) {\n        var tmp = subresult.slice(0);\n        tmp[0] = input.charAt(0) + tmp[0];\n        result.push(tmp);\n\n        tmp = subresult.slice(0);\n        tmp.unshift(input.charAt(0));\n        result.push(tmp);\n    });\n\n    return result;\n}\n\n/**\n * Generate a list of diacritics from the list of code points\n *\n */\nexport const generateDiacritics = (code_points:[[number,number]]):TDiacraticList => {\n\n\tvar diacritics:{[key:string]:string[]} = {};\n\tcode_points.forEach((code_range)=>{\n\n\t\tfor(let i = code_range[0]; i <= code_range[1]; i++){\n\n\t\t\tlet diacritic\t= String.fromCharCode(i);\n\t\t\tlet\tlatin\t\t= asciifold(diacritic);\n\n\t\t\tif( latin == diacritic.toLowerCase() ){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// skip when latin is a string longer than 3 characters long\n\t\t\t// bc the resulting regex patterns will be long\n\t\t\t// eg:\n\t\t\t// latin \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645 length 18 code point 65018\n\t\t\t// latin \u062C\u0644 \u062C\u0644\u0627\u0644\u0647 length 8 code point 65019\n\t\t\tif( latin.length > 3 ){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst latin_diacritics:string[] = diacritics[latin] || [latin];\n\t\t\tconst patt = new RegExp( escapeToPattern(latin_diacritics),'iu');\n\t\t\tif( diacritic.match(patt) ){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlatin_diacritics.push(diacritic);\n\t\t\tdiacritics[latin] = latin_diacritics;\n\t\t}\n\t});\n\n\t// filter out if there's only one character in the list\n\t// todo: this may not be needed\n\tObject.keys(diacritics).forEach(latin => {\n\t\tconst latin_diacritics = diacritics[latin] || [];\n\t\tif( latin_diacritics.length < 2 ){\n\t\t\tdelete diacritics[latin];\n\t\t}\n\t});\n\n\n\t// latin character pattern\n\t// match longer substrings first\n\tlet latin_chars\t= Object.keys(diacritics).sort((a, b) => b.length - a.length );\n\tlatin_pat\t\t= new RegExp('('+ escapeToPattern(latin_chars) + accent_pat + '*)','gu');\n\n\n\t// build diacritic patterns\n\t// ae needs:\n\t//\t(?:(?:ae|\u00C6|\u01FC|\u01E2)|(?:A|\u24B6|\uFF21...)(?:E|\u025B|\u24BA...))\n\tvar diacritic_patterns:TDiacraticList = {};\n\tlatin_chars.sort((a,b) => a.length -b.length).forEach((latin)=>{\n\n\t\tvar substrings\t= allSubstrings(latin);\n\t\tvar pattern = substrings.map((sub_pat)=>{\n\n\t\t\tsub_pat = sub_pat.map((l)=>{\n\t\t\t\tif( diacritics.hasOwnProperty(l) ){\n\t\t\t\t\treturn escapeToPattern(diacritics[l]!);\n\t\t\t\t}\n\t\t\t\treturn l;\n\t\t\t});\n\n\t\t\treturn arrayToPattern(sub_pat,'');\n\t\t});\n\n\t\tdiacritic_patterns[latin] = arrayToPattern(pattern);\n\t});\n\n\n\treturn diacritic_patterns;\n}\n\n/**\n * Expand a regular expression pattern to include diacritics\n * \teg /a/ becomes /a\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250\u0251A\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F/\n *\n */\nexport const diacriticRegexPoints = (regex:string):string => {\n\n\tif( diacritic_patterns === undefined ){\n\t\tdiacritic_patterns = generateDiacritics(code_points);\n\t}\n\n\tconst decomposed\t\t= regex.normalize('NFKD').toLowerCase();\n\n\treturn decomposed.split(latin_pat).map((part:string)=>{\n\n\t\t// \"\uFB04\" or \"ffl\"\n\t\tconst no_accent = asciifold(part);\n\t\tif( no_accent == '' ){\n\t\t\treturn '';\n\t\t}\n\n\t\tif( diacritic_patterns.hasOwnProperty(no_accent) ){\n\t\t\treturn diacritic_patterns[no_accent];\n\t\t}\n\n\t\treturn part;\n\t}).join('');\n\n}\n", "\n// @ts-ignore TS2691 \"An import path cannot end with a '.ts' extension\"\nimport { asciifold } from './diacritics.ts';\n\n// @ts-ignore TS2691 \"An import path cannot end with a '.ts' extension\"\nimport * as T from './types.ts';\n\n\n/**\n * A property getter resolving dot-notation\n * @param  {Object}  obj     The root object to fetch property on\n * @param  {String}  name    The optionally dotted property name to fetch\n * @return {Object}          The resolved property value\n */\nexport const getAttr = (obj:{[key:string]:any}, name:string ) => {\n    if (!obj ) return;\n    return obj[name];\n};\n\n/**\n * A property getter resolving dot-notation\n * @param  {Object}  obj     The root object to fetch property on\n * @param  {String}  name    The optionally dotted property name to fetch\n * @return {Object}          The resolved property value\n */\nexport const getAttrNesting = (obj:{[key:string]:any}, name:string ) => {\n    if (!obj ) return;\n    var part, names = name.split(\".\");\n\twhile( (part = names.shift()) && (obj = obj[part]));\n    return obj;\n};\n\n/**\n * Calculates how close of a match the\n * given value is against a search token.\n *\n */\nexport const scoreValue = (value:string, token:T.Token, weight:number ):number => {\n\tvar score, pos;\n\n\tif (!value) return 0;\n\n\tvalue = value + '';\n\tpos = value.search(token.regex);\n\tif (pos === -1) return 0;\n\n\tscore = token.string.length / value.length;\n\tif (pos === 0) score += 0.5;\n\n\treturn score * weight;\n};\n\n/**\n *\n * https://stackoverflow.com/questions/63006601/why-does-u-throw-an-invalid-escape-error\n */\nexport const escape_regex = (str:string):string => {\n\treturn (str + '').replace(/([\\$\\(\\)\\*\\+\\.\\?\\[\\]\\^\\{\\|\\}\\\\])/gu, '\\\\$1');\n};\n\n\n/**\n * Cast object property to an array if it exists and has a value\n *\n */\nexport const propToArray = (obj:{[key:string]:any}, key:string) => {\n\tvar value = obj[key];\n\n\tif( typeof value == 'function' ) return value;\n\n\tif( value && !Array.isArray(value) ){\n\t\tobj[key] = [value];\n\t}\n}\n\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:number|string)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n\n\n\nexport const cmp = (a:number|string, b:number|string) => {\n\tif (typeof a === 'number' && typeof b === 'number') {\n\t\treturn a > b ? 1 : (a < b ? -1 : 0);\n\t}\n\ta = asciifold(a + '').toLowerCase();\n\tb = asciifold(b + '').toLowerCase();\n\tif (a > b) return 1;\n\tif (b > a) return -1;\n\treturn 0;\n};\n", "/**\n * sifter.js\n * Copyright (c) 2013\u20132020 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n // @ts-ignore TS2691 \"An import path cannot end with a '.ts' extension\"\nimport { scoreValue, getAttr, getAttrNesting, escape_regex, propToArray, iterate, cmp } from './utils.ts';\n// @ts-ignore TS2691 \"An import path cannot end with a '.ts' extension\"\nimport { diacriticRegexPoints } from './diacritics.ts';\n// @ts-ignore TS2691 \"An import path cannot end with a '.ts' extension\"\nimport * as T from 'types.ts';\n\nexport default class Sifter{\n\n\tpublic items; // []|{};\n\tpublic settings: T.Settings;\n\n\t/**\n\t * Textually searches arrays and hashes of objects\n\t * by property (or multiple properties). Designed\n\t * specifically for autocomplete.\n\t *\n\t */\n\tconstructor(items:any, settings:T.Settings) {\n\t\tthis.items = items;\n\t\tthis.settings = settings || {diacritics: true};\n\t};\n\n\t/**\n\t * Splits a search string into an array of individual\n\t * regexps to be used to match results.\n\t *\n\t */\n\ttokenize(query:string, respect_word_boundaries?:boolean, weights?:T.Weights ):T.Token[] {\n\t\tif (!query || !query.length) return [];\n\n\t\tconst tokens:T.Token[]\t= [];\n\t\tconst words\t\t\t\t= query.split(/\\s+/);\n\t\tvar field_regex:RegExp;\n\n\t\tif( weights ){\n\t\t\tfield_regex = new RegExp( '^('+ Object.keys(weights).map(escape_regex).join('|')+')\\:(.*)$');\n\t\t}\n\n\t\twords.forEach((word:string) => {\n\t\t\tlet field_match;\n\t\t\tlet field:null|string\t= null;\n\t\t\tlet regex:null|string\t= null;\n\n\t\t\t// look for \"field:query\" tokens\n\t\t\tif( field_regex && (field_match = word.match(field_regex)) ){\n\t\t\t\tfield\t= field_match[1]!;\n\t\t\t\tword\t= field_match[2]!;\n\t\t\t}\n\n\t\t\tif( word.length > 0 ){\n\t\t\t\tif( this.settings.diacritics ){\n\t\t\t\t\tregex = diacriticRegexPoints(word);\n\t\t\t\t}else{\n\t\t\t\t\tregex = escape_regex(word);\n\t\t\t\t}\n\t\t\t\tif( respect_word_boundaries ) regex = \"\\\\b\"+regex;\n\t\t\t}\n\n\t\t\ttokens.push({\n\t\t\t\tstring : word,\n\t\t\t\tregex  : regex ? new RegExp(regex,'iu') : null,\n\t\t\t\tfield  : field,\n\t\t\t});\n\t\t});\n\n\t\treturn tokens;\n\t};\n\n\n\t/**\n\t * Returns a function to be used to score individual results.\n\t *\n\t * Good matches will have a higher score than poor matches.\n\t * If an item is not a match, 0 will be returned by the function.\n\t *\n\t * @returns {function}\n\t */\n\tgetScoreFunction(query:string, options:T.Options ){\n\t\tvar search = this.prepareSearch(query, options);\n\t\treturn this._getScoreFunction(search);\n\t}\n\n\t_getScoreFunction(search:T.PrepareObj ){\n\t\tconst tokens\t\t= search.tokens,\n\t\ttoken_count\t\t\t= tokens.length;\n\n\t\tif (!token_count) {\n\t\t\treturn function() { return 0; };\n\t\t}\n\n\t\tconst fields\t= search.options.fields,\n\t\tweights\t\t\t= search.weights,\n\t\tfield_count\t\t= fields.length,\n\t\tgetAttrFn\t\t= search.getAttrFn;\n\n\t\tif (!field_count) {\n\t\t\treturn function() { return 1; };\n\t\t}\n\n\n\t\t/**\n\t\t * Calculates the score of an object\n\t\t * against the search query.\n\t\t *\n\t\t */\n\t\tconst scoreObject = (function() {\n\n\n\t\t\tif (field_count === 1) {\n\t\t\t\treturn function(token:T.Token, data:{}) {\n\t\t\t\t\tconst field = fields[0].field;\n\t\t\t\t\treturn scoreValue(getAttrFn(data, field), token, weights[field]);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn function(token:T.Token, data:{}) {\n\t\t\t\tvar sum = 0;\n\n\t\t\t\t// is the token specific to a field?\n\t\t\t\tif( token.field ){\n\n\t\t\t\t\tconst value = getAttrFn(data, token.field);\n\n\t\t\t\t\tif( !token.regex && value ){\n\t\t\t\t\t\tsum += (1/field_count);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tsum += scoreValue(value, token, 1);\n\t\t\t\t\t}\n\n\n\n\t\t\t\t}else{\n\t\t\t\t\titerate(weights, (weight:number, field:string) => {\n\t\t\t\t\t\tsum += scoreValue(getAttrFn(data, field), token, weight);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn sum / field_count;\n\t\t\t};\n\t\t})();\n\n\t\tif (token_count === 1) {\n\t\t\treturn function(data:{}) {\n\t\t\t\treturn scoreObject(tokens[0], data);\n\t\t\t};\n\t\t}\n\n\t\tif (search.options.conjunction === 'and') {\n\t\t\treturn function(data:{}) {\n\t\t\t\tvar i = 0, score, sum = 0;\n\t\t\t\tfor (; i < token_count; i++) {\n\t\t\t\t\tscore = scoreObject(tokens[i], data);\n\t\t\t\t\tif (score <= 0) return 0;\n\t\t\t\t\tsum += score;\n\t\t\t\t}\n\t\t\t\treturn sum / token_count;\n\t\t\t};\n\t\t} else {\n\t\t\treturn function(data:{}) {\n\t\t\t\tvar sum = 0;\n\t\t\t\titerate(tokens,(token:T.Token)=>{\n\t\t\t\t\tsum += scoreObject(token, data);\n\t\t\t\t});\n\t\t\t\treturn sum / token_count;\n\t\t\t};\n\t\t}\n\t};\n\n\t/**\n\t * Returns a function that can be used to compare two\n\t * results, for sorting purposes. If no sorting should\n\t * be performed, `null` will be returned.\n\t *\n\t * @return function(a,b)\n\t */\n\tgetSortFunction(query:string, options:T.Options) {\n\t\tvar search  = this.prepareSearch(query, options);\n\t\treturn this._getSortFunction(search);\n\t}\n\n\t_getSortFunction(search:T.PrepareObj){\n\t\tvar i, n, implicit_score;\n\n\t\tconst self\t= this,\n\t\toptions\t\t= search.options,\n\t\tsort\t\t= (!search.query && options.sort_empty) ? options.sort_empty : options.sort,\n\t\tsort_flds:T.Sort[]\t\t= [],\n\t\tmultipliers:number[]\t= [];\n\n\n\t\tif( typeof sort == 'function' ){\n\t\t\treturn sort.bind(this);\n\t\t}\n\n\t\t/**\n\t\t * Fetches the specified sort field value\n\t\t * from a search result item.\n\t\t *\n\t\t */\n\t\tconst get_field = function(name:string, result:T.ResultItem):string|number {\n\t\t\tif (name === '$score') return result.score;\n\t\t\treturn search.getAttrFn(self.items[result.id], name);\n\t\t};\n\n\t\t// parse options\n\t\tif (sort) {\n\t\t\tfor (i = 0, n = sort.length; i < n; i++) {\n\t\t\t\tif (search.query || sort[i].field !== '$score') {\n\t\t\t\t\tsort_flds.push(sort[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// the \"$score\" field is implied to be the primary\n\t\t// sort field, unless it's manually specified\n\t\tif (search.query) {\n\t\t\timplicit_score = true;\n\t\t\tfor (i = 0, n = sort_flds.length; i < n; i++) {\n\t\t\t\tif (sort_flds[i].field === '$score') {\n\t\t\t\t\timplicit_score = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (implicit_score) {\n\t\t\t\tsort_flds.unshift({field: '$score', direction: 'desc'});\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i = 0, n = sort_flds.length; i < n; i++) {\n\t\t\t\tif (sort_flds[i].field === '$score') {\n\t\t\t\t\tsort_flds.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\t// build function\n\t\tconst sort_flds_count = sort_flds.length;\n\t\tif (!sort_flds_count) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn function(a:T.ResultItem, b:T.ResultItem) {\n\t\t\tvar i, result, field;\n\t\t\tfor (i = 0; i < sort_flds_count; i++) {\n\t\t\t\tfield = sort_flds[i].field;\n\n\t\t\t\tlet multiplier = multipliers[i];\n\t\t\t\tif( multiplier == undefined ){\n\t\t\t\t\tmultiplier = sort_flds[i].direction === 'desc' ? -1 : 1;\n\t\t\t\t}\n\n\t\t\t\tresult = multiplier * cmp(\n\t\t\t\t\tget_field(field, a),\n\t\t\t\t\tget_field(field, b)\n\t\t\t\t);\n\t\t\t\tif (result) return result;\n\t\t\t}\n\t\t\treturn 0;\n\t\t};\n\t\t\n\t};\n\n\t/**\n\t * Parses a search query and returns an object\n\t * with tokens and fields ready to be populated\n\t * with results.\n\t *\n\t */\n\tprepareSearch(query:string, optsUser:Partial<T.Options>):T.PrepareObj {\n\t\tconst weights:T.Weights = {};\n\t\tvar options\t\t= Object.assign({},optsUser);\n\n\t\tpropToArray(options,'sort');\n\t\tpropToArray(options,'sort_empty');\n\n\t\t// convert fields to new format\n\t\tif( options.fields ){\n\t\t\tpropToArray(options,'fields');\n\t\t\tconst fields:T.Field[] = [];\n\t\t\toptions.fields.forEach((field:string|T.Field) => {\n\t\t\t\tif( typeof field == 'string' ){\n\t\t\t\t\tfield = {field:field,weight:1};\n\t\t\t\t}\n\t\t\t\tfields.push(field);\n\t\t\t\tweights[field.field] = ('weight' in field) ? field.weight : 1;\n\t\t\t});\n\t\t\toptions.fields = fields;\n\t\t}\n\n\n\t\treturn {\n\t\t\toptions\t\t: options,\n\t\t\tquery\t\t: query.toLowerCase().trim(),\n\t\t\ttokens\t\t: this.tokenize(query, options.respect_word_boundaries, weights),\n\t\t\ttotal\t\t: 0,\n\t\t\titems\t\t: [],\n\t\t\tweights\t\t: weights,\n\t\t\tgetAttrFn\t: (options.nesting) ? getAttrNesting : getAttr,\n\t\t};\n\t};\n\n\t/**\n\t * Searches through all items and returns a sorted array of matches.\n\t *\n\t */\n\tsearch(query:string, options:T.Options) : T.PrepareObj {\n\t\tvar self = this, score, search:T.PrepareObj;\n\n\t\tsearch  = this.prepareSearch(query, options);\n\t\toptions = search.options;\n\t\tquery   = search.query;\n\n\t\t// generate result scoring function\n\t\tconst fn_score = options.score || self._getScoreFunction(search);\n\n\t\t// perform search and sort\n\t\tif (query.length) {\n\t\t\titerate(self.items, (item:T.ResultItem, id:string|number) => {\n\t\t\t\tscore = fn_score(item);\n\t\t\t\tif (options.filter === false || score > 0) {\n\t\t\t\t\tsearch.items.push({'score': score, 'id': id});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\titerate(self.items, (_:T.ResultItem, id:string|number) => {\n\t\t\t\tsearch.items.push({'score': 1, 'id': id});\n\t\t\t});\n\t\t}\n\n\t\tconst fn_sort = self._getSortFunction(search);\n\t\tif (fn_sort) search.items.sort(fn_sort);\n\n\t\t// apply limits\n\t\tsearch.total = search.items.length;\n\t\tif (typeof options.limit === 'number') {\n\t\t\tsearch.items = search.items.slice(0, options.limit);\n\t\t}\n\n\t\treturn search;\n\t};\n}\n", "\nimport { iterate } from '@orchidjs/sifter/lib/utils';\n\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport const getDom = ( query:any ):HTMLElement => {\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( isHtmlString(query) ){\n\t\tlet div = document.createElement('div');\n\t\tdiv.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn div.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport const isHtmlString = (arg:any): boolean => {\n\tif( typeof arg === 'string' && arg.indexOf('<') > -1 ){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const escapeQuery = (query:string):string => {\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport const triggerEvent = ( dom_el:HTMLElement, event_name:string ):void => {\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport const applyCSS = ( dom_el:HTMLElement, css:{ [key: string]: string|number }):void => {\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport const addClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export const removeClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport const classesArray = (args:string[]|string[][]):string[] => {\n\tvar classes:string[] = [];\n\titerate( args, (_classes) =>{\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\11\\12\\14\\15\\40]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t});\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport const castAsArray = (arg:any):Array<any> => {\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport const parentMatch = ( target:null|HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void => {\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * <= 0 - left (first)\n *\n */\nexport const getTail = ( list:Array<any>|NodeList, direction:number=0 ):any => {\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport const isEmptyObject = (obj:object):boolean => {\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport const nodeIndex = ( el:null|Element, amongst?:string ):number => {\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport const setAttr = (el:Element,attrs:{ [key: string]: null|string|number }) => {\n\titerate( attrs,(val,attr) => {\n\t\tif( val == null ){\n\t\t\tel.removeAttribute(attr as string);\n\t\t}else{\n\t\t\tel.setAttribute(attr as string, ''+val);\n\t\t}\n\t});\n}\n\n\n/**\n * Replace a node\n */\nexport const replaceNode = ( existing:Node, replacement:Node ) => {\n\tif( existing.parentNode ) existing.parentNode.replaceChild(replacement, existing);\n}\n", "/**\n * highlight v3 | MIT license | Johann Burkard <jb@eaio.com>\n * Highlights arbitrary terms in a node.\n *\n * - Modified by Marshal <beatgates@gmail.com> 2011-6-24 (added regex)\n * - Modified by Brian Reavis <brian@thirdroute.com> 2012-8-27 (cleanup)\n */\n\nimport {replaceNode} from '../vanilla';\n\n\nexport const highlight = (element:HTMLElement, regex:string|RegExp) => {\n\n\tif( regex === null ) return;\n\n\t// convet string to regex\n\tif( typeof regex === 'string' ){\n\n\t\tif( !regex.length ) return;\n\t\tregex = new RegExp(regex, 'i');\n\t}\n\n\n\t// Wrap matching part of text node with highlighting <span>, e.g.\n\t// Soccer  ->  <span class=\"highlight\">Soc</span>cer  for regex = /soc/i\n\tconst highlightText = ( node:Text ):number => {\n\n\t\tvar match = node.data.match(regex);\n\t\tif( match && node.data.length > 0 ){\n\t\t\tvar spannode\t\t= document.createElement('span');\n\t\t\tspannode.className\t= 'highlight';\n\t\t\tvar middlebit\t\t= node.splitText(match.index as number);\n\n\t\t\tmiddlebit.splitText(match[0].length);\n\t\t\tvar middleclone\t\t= middlebit.cloneNode(true);\n\n\t\t\tspannode.appendChild(middleclone);\n\t\t\treplaceNode(middlebit, spannode);\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn 0;\n\t};\n\n\t// Recurse element node, looking for child text nodes to highlight, unless element\n\t// is childless, <script>, <style>, or already highlighted: <span class=\"hightlight\">\n\tconst highlightChildren = ( node:Element ):void => {\n\t\tif( node.nodeType === 1 && node.childNodes && !/(script|style)/i.test(node.tagName) && ( node.className !== 'highlight' || node.tagName !== 'SPAN' ) ){\n\t\t\tfor (var i = 0; i < node.childNodes.length; ++i) {\n\t\t\t\ti += highlightRecursive(node.childNodes[i]);\n\t\t\t}\n\t\t}\n\t};\n\n\n\tconst highlightRecursive = ( node:Node|Element ):number => {\n\n\t\tif( node.nodeType === 3 ){\n\t\t\treturn highlightText(node as Text);\n\t\t}\n\n\t\thighlightChildren(node as Element);\n\n\t\treturn 0;\n\t};\n\n\thighlightRecursive( element );\n};\n\n/**\n * removeHighlight fn copied from highlight v5 and\n * edited to remove with(), pass js strict mode, and use without jquery\n */\nexport const removeHighlight = (el:HTMLElement) => {\n\tvar elements = el.querySelectorAll(\"span.highlight\");\n\tArray.prototype.forEach.call(elements, function(el:HTMLElement){\n\t\tvar parent = el.parentNode as Node;\n\t\tparent.replaceChild(el.firstChild as Node, el);\n\t\tparent.normalize();\n\t});\n};\n", "export const KEY_A\t\t\t\t= 65;\nexport const KEY_RETURN\t\t\t= 13;\nexport const KEY_ESC\t\t\t= 27;\nexport const KEY_LEFT\t\t\t= 37;\nexport const KEY_UP\t\t\t\t= 38;\nexport const KEY_RIGHT\t\t\t= 39;\nexport const KEY_DOWN\t\t\t= 40;\nexport const KEY_BACKSPACE\t\t= 8;\nexport const KEY_DELETE\t\t\t= 46;\nexport const KEY_TAB\t\t\t= 9;\n\nexport const IS_MAC      \t\t= typeof navigator === 'undefined' ? false : /Mac/.test(navigator.userAgent);\nexport const KEY_SHORTCUT\t\t= IS_MAC ? 'metaKey' : 'ctrlKey'; // ctrl key or apple key for ma\n", "\nexport default {\n\toptions: [],\n\toptgroups: [],\n\n\tplugins: [],\n\tdelimiter: ',',\n\tsplitOn: null, // regexp or string for splitting up values from a paste command\n\tpersist: true,\n\tdiacritics: true,\n\tcreate: null,\n\tcreateOnBlur: false,\n\tcreateFilter: null,\n\thighlight: true,\n\topenOnFocus: true,\n\tshouldOpen: null,\n\tmaxOptions: 50,\n\tmaxItems: null,\n\thideSelected: null,\n\tduplicates: false,\n\taddPrecedence: false,\n\tselectOnTab: false,\n\tpreload: null,\n\tallowEmptyOption: false,\n\t//closeAfterSelect: false,\n\n\tloadThrottle: 300,\n\tloadingClass: 'loading',\n\n\tdataAttr: null, //'data-data',\n\toptgroupField: 'optgroup',\n\tvalueField: 'value',\n\tlabelField: 'text',\n\tdisabledField: 'disabled',\n\toptgroupLabelField: 'label',\n\toptgroupValueField: 'value',\n\tlockOptgroupOrder: false,\n\n\tsortField: '$order',\n\tsearchField: ['text'],\n\tsearchConjunction: 'and',\n\n\tmode: null,\n\twrapperClass: 'ts-wrapper',\n\tcontrolClass: 'ts-control',\n\tdropdownClass: 'ts-dropdown',\n\tdropdownContentClass: 'ts-dropdown-content',\n\titemClass: 'item',\n\toptionClass: 'option',\n\n\tdropdownParent: null,\n\tcontrolInput: '<input type=\"text\" autocomplete=\"off\" size=\"1\" />',\n\n\tcopyClassesToDropdown: false,\n\n\tplaceholder: null,\n\thidePlaceholder: null,\n\n\tshouldLoad: function(query:string):boolean{\n\t\treturn query.length > 0;\n\t},\n\n\t/*\n\tload                 : null, // function(query, callback) { ... }\n\tscore                : null, // function(search) { ... }\n\tonInitialize         : null, // function() { ... }\n\tonChange             : null, // function(value) { ... }\n\tonItemAdd            : null, // function(value, $item) { ... }\n\tonItemRemove         : null, // function(value) { ... }\n\tonClear              : null, // function() { ... }\n\tonOptionAdd          : null, // function(value, data) { ... }\n\tonOptionRemove       : null, // function(value) { ... }\n\tonOptionClear        : null, // function() { ... }\n\tonOptionGroupAdd     : null, // function(id, data) { ... }\n\tonOptionGroupRemove  : null, // function(id) { ... }\n\tonOptionGroupClear   : null, // function() { ... }\n\tonDropdownOpen       : null, // function(dropdown) { ... }\n\tonDropdownClose      : null, // function(dropdown) { ... }\n\tonType               : null, // function(str) { ... }\n\tonDelete             : null, // function(values) { ... }\n\t*/\n\n\trender: {\n\t\t/*\n\t\titem: null,\n\t\toptgroup: null,\n\t\toptgroup_header: null,\n\t\toption: null,\n\t\toption_create: null\n\t\t*/\n\t}\n};\n", "\nimport TomSelect from './tom-select';\nimport { TomLoadCallback } from './types/index';\n\n\n/**\n * Converts a scalar to its best string representation\n * for hash keys and HTML attribute values.\n *\n * Transformations:\n *   'str'     -> 'str'\n *   null      -> ''\n *   undefined -> ''\n *   true      -> '1'\n *   false     -> '0'\n *   0         -> '0'\n *   1         -> '1'\n *\n */\nexport const hash_key = (value:undefined|null|boolean|string):string|null => {\n\tif (typeof value === 'undefined' || value === null) return null;\n\treturn get_hash(value);\n};\n\nexport const get_hash = (value:boolean|string):string => {\n\tif (typeof value === 'boolean') return value ? '1' : '0';\n\treturn value + '';\n};\n\n/**\n * Escapes a string for use within HTML.\n *\n */\nexport const escape_html = (str:string):string => {\n\treturn (str + '')\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;');\n};\n\n\n/**\n * Debounce the user provided load function\n *\n */\nexport const loadDebounce = (fn:(value:string,callback:TomLoadCallback) => void,delay:number) => {\n\tvar timeout: null|ReturnType<typeof setTimeout>;\n\treturn function(this:TomSelect, value:string,callback:TomLoadCallback) {\n\t\tvar self = this;\n\n\t\tif( timeout ){\n\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(function() {\n\t\t\ttimeout = null;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tfn.call(self, value, callback);\n\n\t\t}, delay);\n\t};\n};\n\n\n/**\n * Debounce all fired events types listed in `types`\n * while executing the provided `fn`.\n *\n */\nexport const debounce_events = ( self:TomSelect, types:string[], fn:() => void ) => {\n\tvar type:string;\n\tvar trigger = self.trigger;\n\tvar event_args:{ [key: string]: any } = {};\n\n\t// override trigger method\n\tself.trigger = function(){\n\t\tvar type = arguments[0];\n\t\tif (types.indexOf(type) !== -1) {\n\t\t\tevent_args[type] = arguments;\n\t\t} else {\n\t\t\treturn trigger.apply(self, arguments);\n\t\t}\n\t};\n\n\t// invoke provided function\n\tfn.apply(self, []);\n\tself.trigger = trigger;\n\n\t// trigger queued events\n\tfor( type of types ){\n\t\tif( type in event_args ){\n\t\t\ttrigger.apply(self, event_args[type]);\n\t\t}\n\t}\n};\n\n\n/**\n * Determines the current selection within a text input control.\n * Returns an object containing:\n *   - start\n *   - length\n *\n */\nexport const getSelection = (input:HTMLInputElement):{ start: number; length: number } => {\n\treturn {\n\t\tstart\t: input.selectionStart || 0,\n\t\tlength\t: (input.selectionEnd||0) - (input.selectionStart||0),\n\t};\n};\n\n\n/**\n * Prevent default\n *\n */\nexport const preventDefault = (evt?:Event, stop:boolean=false):void => {\n\tif( evt ){\n\t\tevt.preventDefault();\n\t\tif( stop ){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t}\n}\n\n\n/**\n * Prevent default\n *\n */\nexport const addEvent = (target:EventTarget, type:string, callback:EventListenerOrEventListenerObject, options?:object):void => {\n\ttarget.addEventListener(type,callback,options);\n};\n\n\n/**\n * Return true if the requested key is down\n * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n * The current evt may not always set ( eg calling advanceSelection() )\n *\n */\nexport const isKeyDown = ( key_name:keyof (KeyboardEvent|MouseEvent), evt?:KeyboardEvent|MouseEvent ) => {\n\n\tif( !evt ){\n\t\treturn false;\n\t}\n\n\tif( !evt[key_name] ){\n\t\treturn false;\n\t}\n\n\tvar count = (evt.altKey?1:0) + (evt.ctrlKey?1:0) + (evt.shiftKey?1:0) + (evt.metaKey?1:0);\n\n\tif( count === 1 ){\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n\n/**\n * Get the id of an element\n * If the id attribute is not set, set the attribute with the given id\n *\n */\nexport const getId = (el:Element,id:string) => {\n\tconst existing_id = el.getAttribute('id');\n\tif( existing_id ){\n\t\treturn existing_id;\n\t}\n\n\tel.setAttribute('id',id);\n\treturn id;\n};\n\n\n/**\n * Returns a string with backslashes added before characters that need to be escaped.\n */\nexport const addSlashes = (str:string):string => {\n\treturn str.replace(/[\\\\\"']/g, '\\\\$&');\n};\n\n/**\n *\n */\nexport const append = ( parent:Element|DocumentFragment, node: string|Node|null|undefined ):void =>{\n\tif( node ) parent.append(node);\n};\n", "import defaults from './defaults';\nimport { hash_key } from './utils';\nimport { TomOption, TomSettings } from './types/index';\nimport { iterate } from '@orchidjs/sifter/lib/utils';\nimport { TomInput } from './types/index';\n\n\nexport default function getSettings( input:TomInput, settings_user:Partial<TomSettings>):TomSettings{\n\tvar settings:TomSettings\t= Object.assign({}, defaults, settings_user);\n\n\tvar attr_data\t\t\t\t= settings.dataAttr;\n\tvar field_label\t\t\t\t= settings.labelField;\n\tvar field_value\t\t\t\t= settings.valueField;\n\tvar field_disabled\t\t\t= settings.disabledField;\n\tvar field_optgroup\t\t\t= settings.optgroupField;\n\tvar field_optgroup_label\t= settings.optgroupLabelField;\n\tvar field_optgroup_value\t= settings.optgroupValueField;\n\n\tvar tag_name\t\t\t\t= input.tagName.toLowerCase();\n\tvar placeholder\t\t\t\t= input.getAttribute('placeholder') || input.getAttribute('data-placeholder');\n\n\tif (!placeholder && !settings.allowEmptyOption) {\n\t\tlet option\t\t= input.querySelector('option[value=\"\"]');\n\t\tif( option ){\n\t\t\tplaceholder = option.textContent;\n\t\t}\n\n\t}\n\n\tvar settings_element:{\n\t\tplaceholder\t: null|string,\n\t\toptions\t\t: TomOption[],\n\t\toptgroups\t: TomOption[],\n\t\titems\t\t: string[],\n\t\tmaxItems\t: null|number,\n\t} = {\n\t\tplaceholder\t: placeholder,\n\t\toptions\t\t: [],\n\t\toptgroups\t: [],\n\t\titems\t\t: [],\n\t\tmaxItems\t: null,\n\t};\n\n\n\t/**\n\t * Initialize from a <select> element.\n\t *\n\t */\n\tvar init_select = () => {\n\t\tvar tagName;\n\t\tvar options = settings_element.options;\n\t\tvar optionsMap:{[key:string]:any} = {};\n\t\tvar group_count = 1;\n\n\t\tvar readData = (el:HTMLElement):TomOption => {\n\n\t\t\tvar data\t= Object.assign({},el.dataset); // get plain object from DOMStringMap\n\t\t\tvar json\t= attr_data && data[attr_data];\n\n\t\t\tif( typeof json === 'string' && json.length ){\n\t\t\t\tdata = Object.assign(data,JSON.parse(json));\n\t\t\t}\n\n\t\t\treturn data;\n\t\t};\n\n\t\tvar addOption = (option:HTMLOptionElement, group?:string) => {\n\n\t\t\tvar value = hash_key(option.value);\n\t\t\tif ( value == null ) return;\n\t\t\tif ( !value && !settings.allowEmptyOption) return;\n\n\t\t\t// if the option already exists, it's probably been\n\t\t\t// duplicated in another optgroup. in this case, push\n\t\t\t// the current group to the \"optgroup\" property on the\n\t\t\t// existing option so that it's rendered in both places.\n\t\t\tif (optionsMap.hasOwnProperty(value)) {\n\t\t\t\tif (group) {\n\t\t\t\t\tvar arr = optionsMap[value][field_optgroup];\n\t\t\t\t\tif (!arr) {\n\t\t\t\t\t\toptionsMap[value][field_optgroup] = group;\n\t\t\t\t\t} else if (!Array.isArray(arr)) {\n\t\t\t\t\t\toptionsMap[value][field_optgroup] = [arr, group];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tarr.push(group);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}else{\n\n\t\t\t\tvar option_data             = readData(option);\n\t\t\t\toption_data[field_label]    = option_data[field_label] || option.textContent;\n\t\t\t\toption_data[field_value]    = option_data[field_value] || value;\n\t\t\t\toption_data[field_disabled] = option_data[field_disabled] || option.disabled;\n\t\t\t\toption_data[field_optgroup] = option_data[field_optgroup] || group;\n\t\t\t\toption_data.$option\t\t\t= option;\n\n\t\t\t\toptionsMap[value] = option_data;\n\t\t\t\toptions.push(option_data);\n\t\t\t}\n\n\t\t\tif( option.selected ){\n\t\t\t\tsettings_element.items.push(value);\n\t\t\t}\n\t\t};\n\n\t\tvar addGroup = ( optgroup:HTMLOptGroupElement ) => {\n\t\t\tvar id:string, optgroup_data\n\n\t\t\toptgroup_data\t\t\t\t\t\t\t= readData(optgroup);\n\t\t\toptgroup_data[field_optgroup_label]\t\t= optgroup_data[field_optgroup_label] || optgroup.getAttribute('label') || '';\n\t\t\toptgroup_data[field_optgroup_value]\t\t= optgroup_data[field_optgroup_value] || group_count++;\n\t\t\toptgroup_data[field_disabled]\t\t\t= optgroup_data[field_disabled] || optgroup.disabled;\n\t\t\tsettings_element.optgroups.push(optgroup_data);\n\n\t\t\tid = optgroup_data[field_optgroup_value];\n\n\t\t\titerate(optgroup.children, (option)=>{\n\t\t\t\taddOption(option as HTMLOptionElement, id);\n\t\t\t});\n\n\t\t};\n\n\t\tsettings_element.maxItems = input.hasAttribute('multiple') ? null : 1;\n\n\t\titerate(input.children,(child)=>{\n\t\t\ttagName = child.tagName.toLowerCase();\n\t\t\tif (tagName === 'optgroup') {\n\t\t\t\taddGroup(child as HTMLOptGroupElement);\n\t\t\t} else if (tagName === 'option') {\n\t\t\t\taddOption(child as HTMLOptionElement);\n\t\t\t}\n\t\t});\n\n\t};\n\n\n\t/**\n\t * Initialize from a <input type=\"text\"> element.\n\t *\n\t */\n\tvar init_textbox = () => {\n\t\tconst data_raw = input.getAttribute(attr_data);\n\n\t\tif (!data_raw) {\n\t\t\tvar value = input.value.trim() || '';\n\t\t\tif (!settings.allowEmptyOption && !value.length) return;\n\t\t\tconst values = value.split(settings.delimiter);\n\n\t\t\titerate( values, (value) => {\n\t\t\t\tconst option:TomOption = {};\n\t\t\t\toption[field_label] = value;\n\t\t\t\toption[field_value] = value;\n\t\t\t\tsettings_element.options.push(option);\n\t\t\t});\n\t\t\tsettings_element.items = values;\n\t\t} else {\n\t\t\tsettings_element.options = JSON.parse(data_raw);\n\t\t\titerate( settings_element.options, (opt) => {\n\t\t\t\tsettings_element.items.push(opt[field_value]);\n\t\t\t});\n\t\t}\n\t};\n\n\n\tif (tag_name === 'select') {\n\t\tinit_select();\n\t} else {\n\t\tinit_textbox();\n\t}\n\n\treturn Object.assign( {}, defaults, settings_element, settings_user) as TomSettings;\n};\n", "\nimport MicroEvent from './contrib/microevent';\nimport MicroPlugin from './contrib/microplugin';\nimport Sifter from '@orchidjs/sifter/lib/sifter';\nimport { escape_regex, iterate } from '@orchidjs/sifter/lib/utils';\nimport { TomInput, TomArgObject, TomOption, TomOptions, TomCreateFilter, TomCreateCallback, TomItem, TomSettings, TomTemplateNames, TomClearFilter } from './types/index';\nimport {highlight, removeHighlight} from './contrib/highlight';\nimport * as constants from './constants';\nimport getSettings from './getSettings';\nimport {\n\thash_key,\n\tget_hash,\n\tescape_html,\n\tdebounce_events,\n\tgetSelection,\n\tpreventDefault,\n\taddEvent,\n\tloadDebounce,\n\tisKeyDown,\n\tgetId,\n\taddSlashes,\n\tappend\n} from './utils';\n\nimport {\n\tgetDom,\n\tisHtmlString,\n\tescapeQuery,\n\ttriggerEvent,\n\tapplyCSS,\n\taddClasses,\n\tremoveClasses,\n\tparentMatch,\n\tgetTail,\n\tisEmptyObject,\n\tnodeIndex,\n\tsetAttr,\n\treplaceNode\n} from './vanilla';\n\nvar instance_i = 0;\n\nexport default class TomSelect extends MicroPlugin(MicroEvent){\n\n\tpublic control_input\t\t\t: HTMLInputElement;\n\tpublic wrapper\t\t\t\t\t: HTMLElement;\n\tpublic dropdown\t\t\t\t\t: HTMLElement;\n\tpublic control\t\t\t\t\t: HTMLElement;\n\tpublic dropdown_content\t\t\t: HTMLElement;\n\tpublic focus_node\t\t\t\t: HTMLElement;\n\n\tpublic order\t\t\t\t\t: number = 0;\n\tpublic settings\t\t\t\t\t: TomSettings;\n\tpublic input\t\t\t\t\t: TomInput;\n\tpublic tabIndex\t\t\t\t\t: number;\n\tpublic is_select_tag\t\t\t: boolean;\n\tpublic rtl\t\t\t\t\t\t: boolean;\n\tprivate inputId\t\t\t\t\t: string;\n\n\tprivate _destroy\t\t\t\t!: () => void;\n\tpublic sifter\t\t\t\t\t: Sifter;\n\n\n\tpublic isOpen\t\t\t\t\t: boolean = false;\n\tpublic isDisabled\t\t\t\t: boolean = false;\n\tpublic isRequired\t\t\t\t: boolean;\n\tpublic isInvalid\t\t\t\t: boolean = false; // @deprecated 1.8\n\tpublic isValid\t\t\t\t\t: boolean = true;\n\tpublic isLocked\t\t\t\t\t: boolean = false;\n\tpublic isFocused\t\t\t\t: boolean = false;\n\tpublic isInputHidden\t\t\t: boolean = false;\n\tpublic isSetup\t\t\t\t\t: boolean = false;\n\tpublic ignoreFocus\t\t\t\t: boolean = false;\n\tpublic ignoreHover\t\t\t\t: boolean = false;\n\tpublic hasOptions\t\t\t\t: boolean = false;\n\tpublic currentResults\t\t\t?: ReturnType<Sifter['search']>;\n\tpublic lastValue\t\t\t\t: string = '';\n\tpublic caretPos\t\t\t\t\t: number = 0;\n\tpublic loading\t\t\t\t\t: number = 0;\n\tpublic loadedSearches\t\t\t: { [key: string]: boolean } = {};\n\n\tpublic activeOption\t\t\t\t: null|HTMLElement = null;\n\tpublic activeItems\t\t\t\t: TomItem[] = [];\n\n\tpublic optgroups\t\t\t\t: TomOptions = {};\n\tpublic options\t\t\t\t\t: TomOptions = {};\n\tpublic userOptions\t\t\t\t: {[key:string]:boolean} = {};\n\tpublic items\t\t\t\t\t: string[] = [];\n\n\n\n\tconstructor( input_arg: string|TomInput, user_settings:Partial<TomSettings> ){\n\t\tsuper();\n\n\t\tinstance_i++;\n\n\t\tvar dir;\n\t\tvar input\t\t\t\t= getDom( input_arg ) as TomInput;\n\n\t\tif( input.tomselect ){\n\t\t\tthrow new Error('Tom Select already initialized on this element');\n\t\t}\n\n\n\t\tinput.tomselect\t\t\t= this;\n\n\n\t\t// detect rtl environment\n\t\tvar computedStyle\t\t= window.getComputedStyle && window.getComputedStyle(input, null);\n\t\tdir\t\t\t\t\t\t= computedStyle.getPropertyValue('direction');\n\n\t\t// setup default state\n\t\tconst settings\t\t\t= getSettings( input, user_settings );\n\t\tthis.settings\t\t\t= settings;\n\t\tthis.input\t\t\t\t= input;\n\t\tthis.tabIndex\t\t\t= input.tabIndex || 0;\n\t\tthis.is_select_tag\t\t= input.tagName.toLowerCase() === 'select';\n\t\tthis.rtl\t\t\t\t= /rtl/i.test(dir);\n\t\tthis.inputId\t\t\t= getId(input, 'tomselect-'+instance_i);\n\t\tthis.isRequired\t\t\t= input.required;\n\n\n\t\t// search system\n\t\tthis.sifter = new Sifter(this.options, {diacritics: settings.diacritics});\n\n\t\t// option-dependent defaults\n\t\tsettings.mode = settings.mode || (settings.maxItems === 1 ? 'single' : 'multi');\n\t\tif (typeof settings.hideSelected !== 'boolean') {\n\t\t\tsettings.hideSelected = settings.mode === 'multi';\n\t\t}\n\n\t\tif( typeof settings.hidePlaceholder !== 'boolean' ){\n\t\t\tsettings.hidePlaceholder = settings.mode !== 'multi';\n\t\t}\n\n\t\t// set up createFilter callback\n\t\tvar filter = settings.createFilter;\n\t\tif( typeof filter !== 'function' ){\n\n\t\t\tif( typeof filter === 'string' ){\n\t\t\t\tfilter = new RegExp(filter);\n\t\t\t}\n\n\t\t\tif( filter instanceof RegExp ){\n\t\t\t\tsettings.createFilter = (input) => (filter as RegExp).test(input);\n\t\t\t}else{\n\t\t\t\tsettings.createFilter = (value) => {\n\t\t\t\t\treturn this.settings.duplicates || !this.options[value];\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\n\t\tthis.initializePlugins(settings.plugins);\n\t\tthis.setupCallbacks();\n\t\tthis.setupTemplates();\n\n\n\t\t// Create all elements\n\t\tconst wrapper\t\t\t= getDom('<div>');\n\t\tconst control\t\t\t= getDom('<div>');\n\t\tconst dropdown\t\t\t= this._render('dropdown');\n\t\tconst dropdown_content\t= getDom(`<div role=\"listbox\" tabindex=\"-1\">`);\n\n\t\tconst classes\t\t\t= this.input.getAttribute('class') || '';\n\t\tconst inputMode\t\t\t= settings.mode;\n\n\t\tvar control_input: HTMLInputElement;\n\n\n\t\taddClasses( wrapper, settings.wrapperClass, classes, inputMode);\n\n\n\t\taddClasses(control,settings.controlClass);\n\t\tappend( wrapper, control );\n\n\n\t\taddClasses(dropdown, settings.dropdownClass, inputMode);\n\t\tif( settings.copyClassesToDropdown ){\n\t\t\taddClasses( dropdown, classes);\n\t\t}\n\n\n\t\taddClasses(dropdown_content, settings.dropdownContentClass);\n\t\tappend( dropdown, dropdown_content );\n\n\t\tgetDom( settings.dropdownParent || wrapper ).appendChild( dropdown );\n\n\n\t\t// default controlInput\n\t\tif( isHtmlString(settings.controlInput) ){\n\t\t\tcontrol_input\t\t= getDom(settings.controlInput ) as HTMLInputElement;\n\n\t\t\t// set attributes\n\t\t\tvar attrs = ['autocorrect','autocapitalize','autocomplete'];\n\t\t\titerate(attrs,(attr) => {\n\t\t\t\tif( input.getAttribute(attr) ){\n\t\t\t\t\tsetAttr(control_input,{[attr]:input.getAttribute(attr)});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcontrol_input.tabIndex = -1;\n\t\t\tcontrol.appendChild( control_input );\n\t\t\tthis.focus_node\t\t= control_input;\n\n\t\t// dom element\n\t\t}else if( settings.controlInput ){\n\t\t\tcontrol_input\t\t= getDom( settings.controlInput ) as HTMLInputElement;\n\t\t\tthis.focus_node\t\t= control_input;\n\n\t\t}else{\n\t\t\tcontrol_input\t\t= getDom('<input/>') as HTMLInputElement;\n\t\t\tthis.focus_node\t\t= control;\n\t\t}\n\n\t\tthis.wrapper\t\t\t= wrapper;\n\t\tthis.dropdown\t\t\t= dropdown;\n\t\tthis.dropdown_content\t= dropdown_content;\n\t\tthis.control \t\t\t= control;\n\t\tthis.control_input\t\t= control_input;\n\n\t\tthis.setup();\n\t}\n\n\t/**\n\t * set up event bindings.\n\t *\n\t */\n\tsetup(){\n\n\t\tconst self = this;\n\t\tconst settings\t\t\t\t= self.settings;\n\t\tconst control_input\t\t\t= self.control_input;\n\t\tconst dropdown\t\t\t\t= self.dropdown;\n\t\tconst dropdown_content\t\t= self.dropdown_content;\n\t\tconst wrapper\t\t\t\t= self.wrapper;\n\t\tconst control\t\t\t\t= self.control;\n\t\tconst input\t\t\t\t\t= self.input;\n\t\tconst focus_node\t\t\t= self.focus_node;\n\t\tconst passive_event\t\t\t= { passive: true };\n\t\tconst listboxId\t\t\t\t= self.inputId +'-ts-dropdown';\n\n\n\t\tsetAttr(dropdown_content,{\n\t\t\tid: listboxId\n\t\t});\n\n\t\tsetAttr(focus_node,{\n\t\t\trole:'combobox',\n\t\t\t'aria-haspopup':'listbox',\n\t\t\t'aria-expanded':'false',\n\t\t\t'aria-controls':listboxId\n\t\t});\n\n\t\tconst control_id\t= getId(focus_node,self.inputId + '-ts-control');\n\t\tconst query\t\t\t= \"label[for='\"+escapeQuery(self.inputId)+\"']\";\n\t\tconst label\t\t\t= document.querySelector(query);\n\t\tconst label_click\t= self.focus.bind(self);\n\t\tif( label ){\n\t\t\taddEvent(label,'click', label_click );\n\t\t\tsetAttr(label,{for:control_id});\n\t\t\tconst label_id = getId(label,self.inputId+'-ts-label');\n\t\t\tsetAttr(focus_node,{'aria-labelledby':label_id});\n\t\t\tsetAttr(dropdown_content,{'aria-labelledby':label_id});\n\t\t}\n\n\t\twrapper.style.width = input.style.width;\n\n\t\tif (self.plugins.names.length) {\n\t\t\tconst classes_plugins = 'plugin-' + self.plugins.names.join(' plugin-');\n\t\t\taddClasses( [wrapper,dropdown], classes_plugins);\n\t\t}\n\n\t\tif ((settings.maxItems === null || settings.maxItems > 1) && self.is_select_tag ){\n\t\t\tsetAttr(input,{multiple:'multiple'});\n\t\t}\n\n\t\tif (settings.placeholder) {\n\t\t\tsetAttr(control_input,{placeholder:settings.placeholder});\n\t\t}\n\n\t\t// if splitOn was not passed in, construct it from the delimiter to allow pasting universally\n\t\tif (!settings.splitOn && settings.delimiter) {\n\t\t\tsettings.splitOn = new RegExp('\\\\s*' + escape_regex(settings.delimiter) + '+\\\\s*');\n\t\t}\n\n\t\t// debounce user defined load() if loadThrottle > 0\n\t\t// after initializePlugins() so plugins can create/modify user defined loaders\n\t\tif( settings.load && settings.loadThrottle ){\n\t\t\tsettings.load = loadDebounce(settings.load,settings.loadThrottle)\n\t\t}\n\n\t\tself.control_input.type\t= input.type;\n\n\t\taddEvent(dropdown,'mouseenter', (e) => {\n\n\t\t\tvar target_match = parentMatch(e.target as HTMLElement, '[data-selectable]', dropdown);\n\t\t\tif( target_match ) self.onOptionHover( e as MouseEvent, target_match );\n\n\t\t}, {capture:true});\n\n\t\t// clicking on an option should select it\n\t\taddEvent(dropdown,'click',(evt) => {\n\t\t\tconst option = parentMatch(evt.target as HTMLElement, '[data-selectable]');\n\t\t\tif( option ){\n\t\t\t\tself.onOptionSelect( evt as MouseEvent, option );\n\t\t\t\tpreventDefault(evt,true);\n\t\t\t}\n\t\t});\n\n\t\taddEvent(control,'click', (evt) => {\n\n\t\t\tvar target_match = parentMatch( evt.target as HTMLElement, '[data-ts-item]', control);\n\t\t\tif( target_match && self.onItemSelect(evt as MouseEvent, target_match as TomItem) ){\n\t\t\t\tpreventDefault(evt,true);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// retain focus (see control_input mousedown)\n\t\t\tif( control_input.value != '' ){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tself.onClick();\n\t\t\tpreventDefault(evt,true);\n\t\t});\n\n\n\t\t// keydown on focus_node for arrow_down/arrow_up\n\t\taddEvent(focus_node,'keydown',\t\t(e) => self.onKeyDown(e as KeyboardEvent) );\n\n\t\t// keypress and input/keyup\n\t\taddEvent(control_input,'keypress',\t(e) => self.onKeyPress(e as KeyboardEvent) );\n\t\taddEvent(control_input,'input',\t\t(e) => self.onInput(e as KeyboardEvent) );\n\n\t\taddEvent(focus_node,'resize',\t\t() => self.positionDropdown(), passive_event);\n\t\taddEvent(focus_node,'blur', \t\t(e) => self.onBlur(e as FocusEvent) );\n\t\taddEvent(focus_node,'focus',\t\t(e) => self.onFocus(e as MouseEvent) );\n\t\taddEvent(control_input,'paste',\t\t(e) => self.onPaste(e as MouseEvent) );\n\n\n\t\tconst doc_mousedown = (evt:Event) => {\n\n\t\t\t// blur if target is outside of this instance\n\t\t\t// dropdown is not always inside wrapper\n\t\t\tconst target = evt.composedPath()[0];\n\t\t\tif( !wrapper.contains(target as HTMLElement) && !dropdown.contains(target as HTMLElement) ){\n\t\t\t\tif (self.isFocused) {\n\t\t\t\t\tself.blur();\n\t\t\t\t}\n\t\t\t\tself.inputState();\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\t// retain focus by preventing native handling. if the\n\t\t\t// event target is the input it should not be modified.\n\t\t\t// otherwise, text selection within the input won't work.\n\t\t\t// Fixes bug #212 which is no covered by tests\n\t\t\tif( target == control_input && self.isOpen ){\n\t\t\t\tevt.stopPropagation();\n\n\t\t\t// clicking anywhere in the control should not blur the control_input (which would close the dropdown)\n\t\t\t}else{\n\t\t\t\tpreventDefault(evt,true);\n\t\t\t}\n\n\t\t};\n\n\t\tconst win_scroll = () => {\n\t\t\tif (self.isOpen) {\n\t\t\t\tself.positionDropdown();\n\t\t\t}\n\t\t};\n\n\t\tconst win_hover = () => {\n\t\t\tself.ignoreHover = false;\n\t\t};\n\n\t\taddEvent(document,'mousedown', doc_mousedown);\n\t\taddEvent(window,'scroll', win_scroll, passive_event);\n\t\taddEvent(window,'resize', win_scroll, passive_event);\n\t\taddEvent(window,'mousemove', win_hover, passive_event);\n\n\t\tthis._destroy = () => {\n\t\t\tdocument.removeEventListener('mousedown',doc_mousedown);\n\t\t\twindow.removeEventListener('mousemove',win_hover);\n\t\t\twindow.removeEventListener('scroll',win_scroll);\n\t\t\twindow.removeEventListener('resize',win_scroll);\n\t\t\tif( label ) label.removeEventListener('click',label_click);\n\t\t};\n\n\t\t// store original html and tab index so that they can be\n\t\t// restored when the destroy() method is called.\n\t\tthis.revertSettings = {\n\t\t\tinnerHTML : input.innerHTML,\n\t\t\ttabIndex : input.tabIndex\n\t\t};\n\n\n\t\tinput.tabIndex = -1;\n\t\tinput.insertAdjacentElement('afterend', self.wrapper);\n\n\t\tself.sync(false);\n\t\tsettings.items = [];\n\t\tdelete settings.optgroups;\n\t\tdelete settings.options;\n\n\t\taddEvent(input,'invalid', (e) => {\n\t\t\tif( self.isValid ){\n\t\t\t\tself.isValid = false;\n\t\t\t\tself.isInvalid = true;\n\t\t\t\tself.refreshState();\n\t\t\t}\n\t\t});\n\n\t\tself.updateOriginalInput();\n\t\tself.refreshItems();\n\t\tself.close(false);\n\t\tself.inputState();\n\t\tself.isSetup = true;\n\n\t\tif( input.disabled ){\n\t\t\tself.disable();\n\t\t}else{\n\t\t\tself.enable(); //sets tabIndex\n\t\t}\n\n\t\tself.on('change', this.onChange);\n\n\t\taddClasses(input,'tomselected','ts-hidden-accessible');\n\t\tself.trigger('initialize');\n\n\t\t// preload options\n\t\tif (settings.preload === true) {\n\t\t\tself.preload();\n\t\t}\n\n\t}\n\n\n\t/**\n\t * Register options and optgroups\n\t *\n\t */\n\tsetupOptions(options:TomOption[] = [], optgroups:TomOption[] = []){\n\n\t\t// build options table\n\t\tthis.addOptions(options);\n\n\n\t\t// build optgroup table\n\t\titerate( optgroups, (optgroup) => {\n\t\t\tthis.registerOptionGroup(optgroup);\n\t\t});\n\t}\n\n\t/**\n\t * Sets up default rendering functions.\n\t */\n\tsetupTemplates() {\n\t\tvar self = this;\n\t\tvar field_label = self.settings.labelField;\n\t\tvar field_optgroup = self.settings.optgroupLabelField;\n\n\t\tvar templates = {\n\t\t\t'optgroup': (data:TomOption) => {\n\t\t\t\tlet optgroup = document.createElement('div');\n\t\t\t\toptgroup.className = 'optgroup';\n\t\t\t\toptgroup.appendChild(data.options);\n\t\t\t\treturn optgroup;\n\n\t\t\t},\n\t\t\t'optgroup_header': (data:TomOption, escape:typeof escape_html) => {\n\t\t\t\treturn '<div class=\"optgroup-header\">' + escape(data[field_optgroup]) + '</div>';\n\t\t\t},\n\t\t\t'option': (data:TomOption, escape:typeof escape_html) => {\n\t\t\t\treturn '<div>' + escape(data[field_label]) + '</div>';\n\t\t\t},\n\t\t\t'item': (data:TomOption, escape:typeof escape_html) => {\n\t\t\t\treturn '<div>' + escape(data[field_label]) + '</div>';\n\t\t\t},\n\t\t\t'option_create': (data:TomOption, escape:typeof escape_html) => {\n\t\t\t\treturn '<div class=\"create\">Add <strong>' + escape(data.input) + '</strong>&hellip;</div>';\n\t\t\t},\n\t\t\t'no_results':() => {\n\t\t\t\treturn '<div class=\"no-results\">No results found</div>';\n\t\t\t},\n\t\t\t'loading':() => {\n\t\t\t\treturn '<div class=\"spinner\"></div>';\n\t\t\t},\n\t\t\t'not_loading':() => {},\n\t\t\t'dropdown':() => {\n\t\t\t\treturn '<div></div>';\n\t\t\t}\n\t\t};\n\n\n\t\tself.settings.render = Object.assign({}, templates, self.settings.render);\n\t}\n\n\t/**\n\t * Maps fired events to callbacks provided\n\t * in the settings used when creating the control.\n\t */\n\tsetupCallbacks() {\n\t\tvar key, fn;\n\t\tvar callbacks:{[key:string]:string} = {\n\t\t\t'initialize'      : 'onInitialize',\n\t\t\t'change'          : 'onChange',\n\t\t\t'item_add'        : 'onItemAdd',\n\t\t\t'item_remove'     : 'onItemRemove',\n\t\t\t'item_select'     : 'onItemSelect',\n\t\t\t'clear'           : 'onClear',\n\t\t\t'option_add'      : 'onOptionAdd',\n\t\t\t'option_remove'   : 'onOptionRemove',\n\t\t\t'option_clear'    : 'onOptionClear',\n\t\t\t'optgroup_add'    : 'onOptionGroupAdd',\n\t\t\t'optgroup_remove' : 'onOptionGroupRemove',\n\t\t\t'optgroup_clear'  : 'onOptionGroupClear',\n\t\t\t'dropdown_open'   : 'onDropdownOpen',\n\t\t\t'dropdown_close'  : 'onDropdownClose',\n\t\t\t'type'            : 'onType',\n\t\t\t'load'            : 'onLoad',\n\t\t\t'focus'           : 'onFocus',\n\t\t\t'blur'            : 'onBlur'\n\t\t};\n\n\t\tfor (key in callbacks) {\n\n\t\t\tfn = this.settings[callbacks[key] as (keyof TomSettings)];\n\t\t\tif (fn) this.on(key, fn);\n\n\t\t}\n\t}\n\n\t/**\n\t * Sync the Tom Select instance with the original input or select\n\t *\n\t */\n\tsync(get_settings:boolean=true):void{\n\t\tconst self\t\t= this;\n\t\tconst settings\t= get_settings ? getSettings( self.input, {delimiter:self.settings.delimiter} as TomSettings ) : self.settings;\n\n\t\tself.setupOptions(settings.options,settings.optgroups);\n\n\t\tself.setValue(settings.items||[],true); // silent prevents recursion\n\n\t\tself.lastQuery = null; // so updated options will be displayed in dropdown\n\t}\n\n\t/**\n\t * Triggered when the main control element\n\t * has a click event.\n\t *\n\t */\n\tonClick():void {\n\t\tvar self = this;\n\n\t\tif( self.activeItems.length > 0 ){\n\t\t\tself.clearActiveItems();\n\t\t\tself.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tif( self.isFocused && self.isOpen ){\n\t\t\tself.blur();\n\t\t} else {\n\t\t\tself.focus();\n\t\t}\n\t}\n\n\t/**\n\t * @deprecated v1.7\n\t *\n\t */\n\tonMouseDown():void {}\n\n\t/**\n\t * Triggered when the value of the control has been changed.\n\t * This should propagate the event to the original DOM\n\t * input / select element.\n\t */\n\tonChange() {\n\t\ttriggerEvent(this.input, 'input');\n\t\ttriggerEvent(this.input, 'change');\n\t}\n\n\t/**\n\t * Triggered on <input> paste.\n\t *\n\t */\n\tonPaste(e:MouseEvent|KeyboardEvent):void {\n\t\tvar self = this;\n\n\t\tif( self.isInputHidden || self.isLocked ){\n\t\t\tpreventDefault(e);\n\t\t\treturn;\n\t\t}\n\n\t\t// If a regex or string is included, this will split the pasted\n\t\t// input and create Items for each separate value\n\t\tif( !self.settings.splitOn ){\n\t\t\treturn;\n\t\t}\n\n\t\t// Wait for pasted text to be recognized in value\n\t\tsetTimeout(() => {\n\t\t\tvar pastedText = self.inputValue();\n\t\t\tif( !pastedText.match(self.settings.splitOn)){\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tvar splitInput = pastedText.trim().split(self.settings.splitOn);\n\t\t\titerate( splitInput, (piece) => {\n\n\t\t\t\tpiece = hash_key(piece);\n\t\t\t\tif( this.options[piece] ){\n\t\t\t\t\tself.addItem(piece);\n\t\t\t\t}else{\n\t\t\t\t\tself.createItem(piece);\n\t\t\t\t}\n\t\t\t});\n\t\t}, 0);\n\n\t}\n\n\t/**\n\t * Triggered on <input> keypress.\n\t *\n\t */\n\tonKeyPress(e:KeyboardEvent):void {\n\t\tvar self = this;\n\t\tif(self.isLocked){\n\t\t\tpreventDefault(e);\n\t\t\treturn;\n\t\t}\n\t\tvar character = String.fromCharCode(e.keyCode || e.which);\n\t\tif (self.settings.create && self.settings.mode === 'multi' && character === self.settings.delimiter) {\n\t\t\tself.createItem();\n\t\t\tpreventDefault(e);\n\t\t\treturn;\n\t\t}\n\t}\n\n\t/**\n\t * Triggered on <input> keydown.\n\t *\n\t */\n\tonKeyDown(e:KeyboardEvent):void {\n\t\tvar self = this;\n\n\t\tself.ignoreHover = true;\n\n\t\tif (self.isLocked) {\n\t\t\tif (e.keyCode !== constants.KEY_TAB) {\n\t\t\t\tpreventDefault(e);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (e.keyCode) {\n\n\t\t\t// ctrl+A: select all\n\t\t\tcase constants.KEY_A:\n\t\t\t\tif( isKeyDown(constants.KEY_SHORTCUT,e) ){\n\t\t\t\t\tif( self.control_input.value == '' ){\n\t\t\t\t\t\tpreventDefault(e);\n\t\t\t\t\t\tself.selectAll();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t// esc: close dropdown\n\t\t\tcase constants.KEY_ESC:\n\t\t\t\tif (self.isOpen) {\n\t\t\t\t\tpreventDefault(e,true);\n\t\t\t\t\tself.close();\n\t\t\t\t}\n\t\t\t\tself.clearActiveItems();\n\t\t\t\treturn;\n\n\t\t\t// down: open dropdown or move selection down\n\t\t\tcase constants.KEY_DOWN:\n\t\t\t\tif (!self.isOpen && self.hasOptions) {\n\t\t\t\t\tself.open();\n\t\t\t\t} else if (self.activeOption) {\n\t\t\t\t\tlet next = self.getAdjacent(self.activeOption, 1);\n\t\t\t\t\tif (next) self.setActiveOption(next);\n\t\t\t\t}\n\t\t\t\tpreventDefault(e);\n\t\t\t\treturn;\n\n\t\t\t// up: move selection up\n\t\t\tcase constants.KEY_UP:\n\t\t\t\tif (self.activeOption) {\n\t\t\t\t\tlet prev = self.getAdjacent(self.activeOption, -1);\n\t\t\t\t\tif (prev) self.setActiveOption(prev);\n\t\t\t\t}\n\t\t\t\tpreventDefault(e);\n\t\t\t\treturn;\n\n\t\t\t// return: select active option\n\t\t\tcase constants.KEY_RETURN:\n\t\t\t\tif( self.canSelect(self.activeOption) ){\n\t\t\t\t\tself.onOptionSelect(e,self.activeOption!);\n\t\t\t\t\tpreventDefault(e);\n\n\t\t\t\t// if the option_create=null, the dropdown might be closed\n\t\t\t\t}else if (self.settings.create && self.createItem()) {\n\t\t\t\t\tpreventDefault(e);\n\n\t\t\t\t// don't submit form when searching for a value\n\t\t\t\t}else if( document.activeElement == self.control_input && self.isOpen ){\n\t\t\t\t\tpreventDefault(e);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\n\t\t\t// left: modifiy item selection to the left\n\t\t\tcase constants.KEY_LEFT:\n\t\t\t\tself.advanceSelection(-1, e);\n\t\t\t\treturn;\n\n\t\t\t// right: modifiy item selection to the right\n\t\t\tcase constants.KEY_RIGHT:\n\t\t\t\tself.advanceSelection(1, e);\n\t\t\t\treturn;\n\n\t\t\t// tab: select active option and/or create item\n\t\t\tcase constants.KEY_TAB:\n\n\t\t\t\tif( self.settings.selectOnTab ){\n\t\t\t\t\tif( self.canSelect(self.activeOption) ){\n\t\t\t\t\t\tself.onOptionSelect(e,self.activeOption!);\n\n\t\t\t\t\t\t// prevent default [tab] behaviour of jump to the next field\n\t\t\t\t\t\t// if select isFull, then the dropdown won't be open and [tab] will work normally\n\t\t\t\t\t\tpreventDefault(e);\n\t\t\t\t\t}\n\t\t\t\t\tif (self.settings.create && self.createItem()) {\n\t\t\t\t\t\tpreventDefault(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\n\t\t\t// delete|backspace: delete items\n\t\t\tcase constants.KEY_BACKSPACE:\n\t\t\tcase constants.KEY_DELETE:\n\t\t\t\tself.deleteSelection(e);\n\t\t\t\treturn;\n\t\t}\n\n\t\t// don't enter text in the control_input when active items are selected\n\t\tif( self.isInputHidden && !isKeyDown(constants.KEY_SHORTCUT,e) ){\n\t\t\tpreventDefault(e);\n\t\t}\n\t}\n\n\t/**\n\t * Triggered on <input> keyup.\n\t *\n\t */\n\tonInput(e:MouseEvent|KeyboardEvent):void {\n\t\tvar self = this;\n\n\t\tif( self.isLocked ){\n\t\t\treturn;\n\t\t}\n\n\t\tvar value = self.inputValue();\n\t\tif (self.lastValue !== value) {\n\t\t\tself.lastValue = value;\n\n\t\t\tif( self.settings.shouldLoad.call(self,value) ){\n\t\t\t\tself.load(value);\n\t\t\t}\n\n\t\t\tself.refreshOptions();\n\t\t\tself.trigger('type', value);\n\t\t}\n\t}\n\n\t/**\n\t * Triggered when the user rolls over\n\t * an option in the autocomplete dropdown menu.\n\t *\n\t */\n\tonOptionHover( evt:MouseEvent|KeyboardEvent, option:HTMLElement ):void{\n\t\tif( this.ignoreHover ) return;\n\t\tthis.setActiveOption(option, false);\n\t}\n\n\t/**\n\t * Triggered on <input> focus.\n\t *\n\t */\n\tonFocus(e?:MouseEvent|KeyboardEvent):void {\n\t\tvar self = this;\n\t\tvar wasFocused = self.isFocused;\n\n\t\tif (self.isDisabled) {\n\t\t\tself.blur();\n\t\t\tpreventDefault(e);\n\t\t\treturn;\n\t\t}\n\n\t\tif (self.ignoreFocus) return;\n\t\tself.isFocused = true;\n\t\tif( self.settings.preload === 'focus' ) self.preload();\n\n\t\tif (!wasFocused) self.trigger('focus');\n\n\t\tif (!self.activeItems.length) {\n\t\t\tself.showInput();\n\t\t\tself.refreshOptions(!!self.settings.openOnFocus);\n\t\t}\n\n\t\tself.refreshState();\n\t}\n\n\t/**\n\t * Triggered on <input> blur.\n\t *\n\t */\n\tonBlur(e?:FocusEvent):void {\n\n\t\tif( document.hasFocus() === false ) return;\n\n\t\tvar self = this;\n\t\tif (!self.isFocused) return;\n\t\tself.isFocused = false;\n\t\tself.ignoreFocus = false;\n\n\t\tvar deactivate = () => {\n\t\t\tself.close();\n\t\t\tself.setActiveItem();\n\t\t\tself.setCaret(self.items.length);\n\t\t\tself.trigger('blur');\n\t\t};\n\n\t\tif (self.settings.create && self.settings.createOnBlur) {\n\t\t\tself.createItem(null, false, deactivate);\n\t\t} else {\n\t\t\tdeactivate();\n\t\t}\n\t}\n\n\n\t/**\n\t * Triggered when the user clicks on an option\n\t * in the autocomplete dropdown menu.\n\t *\n\t */\n\tonOptionSelect( evt:MouseEvent|KeyboardEvent, option:HTMLElement ){\n\t\tvar value, self = this;\n\n\n\t\t// should not be possible to trigger a option under a disabled optgroup\n\t\tif( option.parentElement && option.parentElement.matches('[data-disabled]') ){\n\t\t\treturn;\n\t\t}\n\n\n\t\tif( option.classList.contains('create') ){\n\t\t\tself.createItem(null, true, () => {\n\t\t\t\tif (self.settings.closeAfterSelect) {\n\t\t\t\t\tself.close();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tvalue = option.dataset.value;\n\t\t\tif (typeof value !== 'undefined') {\n\t\t\t\tself.lastQuery = null;\n\t\t\t\tself.addItem(value);\n\t\t\t\tif (self.settings.closeAfterSelect) {\n\t\t\t\t\tself.close();\n\t\t\t\t}\n\n\t\t\t\tif( !self.settings.hideSelected && evt.type && /click/.test(evt.type) ){\n\t\t\t\t\tself.setActiveOption(option);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Return true if the given option can be selected\n\t *\n\t */\n\tcanSelect(option:HTMLElement|null):boolean{\n\n\t\tif( this.isOpen && option && this.dropdown_content.contains(option) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Triggered when the user clicks on an item\n\t * that has been selected.\n\t *\n\t */\n\tonItemSelect( evt?:MouseEvent, item?:TomItem ):boolean{\n\t\tvar self = this;\n\n\t\tif( !self.isLocked && self.settings.mode === 'multi' ){\n\t\t\tpreventDefault(evt);\n\t\t\tself.setActiveItem(item, evt);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Determines whether or not to invoke\n\t * the user-provided option provider / loader\n\t *\n\t * Note, there is a subtle difference between\n\t * this.canLoad() and this.settings.shouldLoad();\n\t *\n\t *\t- settings.shouldLoad() is a user-input validator.\n\t *\tWhen false is returned, the not_loading template\n\t *\twill be added to the dropdown\n\t *\n\t *\t- canLoad() is lower level validator that checks\n\t * \tthe Tom Select instance. There is no inherent user\n\t *\tfeedback when canLoad returns false\n\t *\n\t */\n\tcanLoad(value:string):boolean{\n\n\t\tif( !this.settings.load ) return false;\n\t\tif( this.loadedSearches.hasOwnProperty(value) ) return false;\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Invokes the user-provided option provider / loader.\n\t *\n\t */\n\tload(value:string):void {\n\t\tconst self = this;\n\n\t\tif( !self.canLoad(value) ) return;\n\n\t\taddClasses(self.wrapper,self.settings.loadingClass);\n\t\tself.loading++;\n\n\t\tconst callback = self.loadCallback.bind(self);\n\t\tself.settings.load.call(self, value, callback);\n\t}\n\n\t/**\n\t * Invoked by the user-provided option provider\n\t *\n\t */\n\tloadCallback( options:TomOption[], optgroups:TomOption[] ):void{\n\t\tconst self = this;\n\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\tself.lastQuery = null;\n\n\t\tself.clearActiveOption(); // when new results load, focus should be on first option\n\t\tself.setupOptions(options,optgroups);\n\n\t\tself.refreshOptions(self.isFocused && !self.isInputHidden);\n\n\t\tif (!self.loading) {\n\t\t\tremoveClasses(self.wrapper,self.settings.loadingClass);\n\t\t}\n\n\t\tself.trigger('load', options, optgroups);\n\t}\n\n\tpreload():void{\n\t\tvar classList = this.wrapper.classList;\n\t\tif( classList.contains('preloaded') ) return;\n\t\tclassList.add('preloaded');\n\t\tthis.load('');\n\t}\n\n\n\t/**\n\t * Sets the input field of the control to the specified value.\n\t *\n\t */\n\tsetTextboxValue(value:string = '') {\n\t\tvar input = this.control_input;\n\t\tvar changed = input.value !== value;\n\t\tif (changed) {\n\t\t\tinput.value = value;\n\t\t\ttriggerEvent(input,'update');\n\t\t\tthis.lastValue = value;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the value of the control. If multiple items\n\t * can be selected (e.g. <select multiple>), this returns\n\t * an array. If only one item can be selected, this\n\t * returns a string.\n\t *\n\t */\n\tgetValue():string|string[] {\n\n\t\tif( this.is_select_tag && this.input.hasAttribute('multiple')) {\n\t\t\treturn this.items;\n\t\t}\n\n\t\treturn this.items.join(this.settings.delimiter);\n\t}\n\n\t/**\n\t * Resets the selected items to the given value.\n\t *\n\t */\n\tsetValue( value:string|string[], silent?:boolean ):void{\n\t\tvar events = silent ? [] : ['change'];\n\n\t\tdebounce_events(this, events,() => {\n\t\t\tthis.clear(silent);\n\t\t\tthis.addItems(value, silent);\n\t\t});\n\t}\n\n\n\t/**\n\t * Resets the number of max items to the given value\n\t *\n\t */\n\tsetMaxItems(value:null|number){\n\t\tif(value === 0) value = null; //reset to unlimited items.\n\t\tthis.settings.maxItems = value;\n\t\tthis.refreshState();\n\t}\n\n\t/**\n\t * Sets the selected item.\n\t *\n\t */\n\tsetActiveItem( item?:TomItem, e?:MouseEvent|KeyboardEvent ){\n\t\tvar self = this;\n\t\tvar eventName;\n\t\tvar i, begin, end, swap;\n\t\tvar last;\n\n\t\tif (self.settings.mode === 'single') return;\n\n\t\t// clear the active selection\n\t\tif( !item ){\n\t\t\tself.clearActiveItems();\n\t\t\tif (self.isFocused) {\n\t\t\t\tself.showInput();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// modify selection\n\t\teventName = e && e.type.toLowerCase();\n\n\t\tif (eventName === 'click' && isKeyDown('shiftKey',e) && self.activeItems.length) {\n\t\t\tlast\t= self.getLastActive();\n\t\t\tbegin\t= Array.prototype.indexOf.call(self.control.children, last);\n\t\t\tend\t\t= Array.prototype.indexOf.call(self.control.children, item);\n\n\t\t\tif (begin > end) {\n\t\t\t\tswap  = begin;\n\t\t\t\tbegin = end;\n\t\t\t\tend   = swap;\n\t\t\t}\n\t\t\tfor (i = begin; i <= end; i++) {\n\t\t\t\titem = self.control.children[i] as TomItem;\n\t\t\t\tif (self.activeItems.indexOf(item) === -1) {\n\t\t\t\t\tself.setActiveItemClass(item);\n\t\t\t\t}\n\t\t\t}\n\t\t\tpreventDefault(e);\n\t\t} else if ((eventName === 'click' && isKeyDown(constants.KEY_SHORTCUT,e) ) || (eventName === 'keydown' && isKeyDown('shiftKey',e))) {\n\t\t\tif( item.classList.contains('active') ){\n\t\t\t\tself.removeActiveItem( item );\n\t\t\t} else {\n\t\t\t\tself.setActiveItemClass(item);\n\t\t\t}\n\t\t} else {\n\t\t\tself.clearActiveItems();\n\t\t\tself.setActiveItemClass(item);\n\t\t}\n\n\t\t// ensure control has focus\n\t\tself.hideInput();\n\t\tif (!self.isFocused) {\n\t\t\tself.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Set the active and last-active classes\n\t *\n\t */\n\tsetActiveItemClass( item:TomItem ){\n\t\tconst self = this;\n\t\tconst last_active = self.control.querySelector('.last-active');\n\t\tif( last_active ) removeClasses(last_active as HTMLElement,'last-active');\n\n\t\taddClasses(item,'active last-active');\n\t\tself.trigger('item_select', item);\n\t\tif( self.activeItems.indexOf(item) == -1 ){\n\t\t\tself.activeItems.push( item );\n\t\t}\n\t}\n\n\t/**\n\t * Remove active item\n\t *\n\t */\n\tremoveActiveItem( item:TomItem ){\n\t\tvar idx = this.activeItems.indexOf(item);\n\t\tthis.activeItems.splice(idx, 1);\n\t\tremoveClasses(item,'active');\n\t}\n\n\t/**\n\t * Clears all the active items\n\t *\n\t */\n\tclearActiveItems(){\n\t\tremoveClasses(this.activeItems,'active');\n\t\tthis.activeItems = [];\n\t}\n\n\t/**\n\t * Sets the selected item in the dropdown menu\n\t * of available options.\n\t *\n\t */\n\tsetActiveOption( option:null|HTMLElement,scroll:boolean=true ):void{\n\n\t\tif( option === this.activeOption ){\n\t\t\treturn;\n\t\t}\n\n\t\tthis.clearActiveOption();\n\t\tif( !option ) return;\n\n\t\tthis.activeOption = option;\n\t\tsetAttr(this.focus_node,{'aria-activedescendant':option.getAttribute('id')});\n\t\tsetAttr(option,{'aria-selected':'true'});\n\t\taddClasses(option,'active');\n\t\tif( scroll ) this.scrollToOption(option);\n\t}\n\n\t/**\n\t * Sets the dropdown_content scrollTop to display the option\n\t *\n\t */\n\tscrollToOption( option:null|HTMLElement, behavior?:string ):void{\n\n\t\tif( !option ) return;\n\n\t\tconst content\t\t= this.dropdown_content;\n\t\tconst height_menu\t= content.clientHeight;\n\t\tconst scrollTop\t\t= content.scrollTop || 0;\n\t\tconst height_item\t= option.offsetHeight;\n\t\tconst y\t\t\t\t= option.getBoundingClientRect().top - content.getBoundingClientRect().top + scrollTop;\n\n\t\tif (y + height_item > height_menu + scrollTop) {\n\t\t\tthis.scroll(y - height_menu + height_item, behavior);\n\n\t\t} else if (y < scrollTop) {\n\t\t\tthis.scroll(y, behavior);\n\t\t}\n\t}\n\n\t/**\n\t * Scroll the dropdown to the given position\n\t *\n\t */\n\tscroll( scrollTop:number, behavior?:string ):void{\n\t\tconst content = this.dropdown_content;\n\t\tif( behavior ){\n\t\t\tcontent.style.scrollBehavior = behavior;\n\t\t}\n\t\tcontent.scrollTop = scrollTop;\n\t\tcontent.style.scrollBehavior = '';\n\t}\n\n\t/**\n\t * Clears the active option\n\t *\n\t */\n\tclearActiveOption(){\n\t\tif( this.activeOption ){\n\t\t\tremoveClasses(this.activeOption,'active');\n\t\t\tsetAttr(this.activeOption,{'aria-selected':null});\n\t\t}\n\t\tthis.activeOption = null;\n\t\tsetAttr(this.focus_node,{'aria-activedescendant':null});\n\t}\n\n\n\t/**\n\t * Selects all items (CTRL + A).\n\t */\n\tselectAll() {\n\t\tconst self = this;\n\n\t\tif (self.settings.mode === 'single') return;\n\n\t\tconst activeItems = self.controlChildren();\n\n\t\tif( !activeItems.length ) return;\n\n\t\tself.hideInput();\n\t\tself.close();\n\n\t\tself.activeItems = activeItems;\n\t\titerate( activeItems, (item) => {\n\t\t\tself.setActiveItemClass(item);\n\t\t});\n\n\t}\n\n\t/**\n\t * Determines if the control_input should be in a hidden or visible state\n\t *\n\t */\n\tinputState(){\n\t\tvar self = this;\n\n\t\tif( !self.control.contains(self.control_input) ) return;\n\n\t\tsetAttr(self.control_input,{placeholder:self.settings.placeholder});\n\n\t\tif( self.activeItems.length > 0 || (!self.isFocused && self.settings.hidePlaceholder && self.items.length > 0) ){\n\t\t\tself.setTextboxValue();\n\t\t\tself.isInputHidden = true;\n\n\t\t}else{\n\n\t\t\tif( self.settings.hidePlaceholder && self.items.length > 0 ){\n\t\t\t\tsetAttr(self.control_input,{placeholder:''});\n\t\t\t}\n\t\t\tself.isInputHidden = false;\n\t\t}\n\n\t\tself.wrapper.classList.toggle('input-hidden', self.isInputHidden );\n\t}\n\n\t/**\n\t * Hides the input element out of view, while\n\t * retaining its focus.\n\t * @deprecated 1.3\n\t */\n\thideInput() {\n\t\tthis.inputState();\n\t}\n\n\t/**\n\t * Restores input visibility.\n\t * @deprecated 1.3\n\t */\n\tshowInput() {\n\t\tthis.inputState();\n\t}\n\n\t/**\n\t * Get the input value\n\t */\n\tinputValue(){\n\t\treturn this.control_input.value.trim();\n\t}\n\n\t/**\n\t * Gives the control focus.\n\t */\n\tfocus() {\n\t\tvar self = this;\n\t\tif (self.isDisabled) return;\n\n\t\tself.ignoreFocus = true;\n\n\t\tif( self.control_input.offsetWidth ){\n\t\t\tself.control_input.focus();\n\t\t}else{\n\t\t\tself.focus_node.focus();\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tself.ignoreFocus = false;\n\t\t\tself.onFocus();\n\t\t}, 0);\n\t}\n\n\t/**\n\t * Forces the control out of focus.\n\t *\n\t */\n\tblur():void {\n\t\tthis.focus_node.blur();\n\t\tthis.onBlur();\n\t}\n\n\t/**\n\t * Returns a function that scores an object\n\t * to show how good of a match it is to the\n\t * provided query.\n\t *\n\t * @return {function}\n\t */\n\tgetScoreFunction(query:string) {\n\t\treturn this.sifter.getScoreFunction(query, this.getSearchOptions());\n\t}\n\n\t/**\n\t * Returns search options for sifter (the system\n\t * for scoring and sorting results).\n\t *\n\t * @see https://github.com/orchidjs/sifter.js\n\t * @return {object}\n\t */\n\tgetSearchOptions() {\n\t\tvar settings = this.settings;\n\t\tvar sort = settings.sortField;\n\t\tif (typeof settings.sortField === 'string') {\n\t\t\tsort = [{field: settings.sortField}];\n\t\t}\n\n\t\treturn {\n\t\t\tfields      : settings.searchField,\n\t\t\tconjunction : settings.searchConjunction,\n\t\t\tsort        : sort,\n\t\t\tnesting     : settings.nesting\n\t\t};\n\t}\n\n\t/**\n\t * Searches through available options and returns\n\t * a sorted array of matches.\n\t *\n\t */\n\tsearch(query:string) : ReturnType<Sifter['search']>{\n\t\tvar i, result, calculateScore;\n\t\tvar self     = this;\n\t\tvar options  = this.getSearchOptions();\n\n\t\t// validate user-provided result scoring function\n\t\tif ( self.settings.score ){\n\t\t\tcalculateScore = self.settings.score.call(self,query);\n\t\t\tif (typeof calculateScore !== 'function') {\n\t\t\t\tthrow new Error('Tom Select \"score\" setting must be a function that returns a function');\n\t\t\t}\n\t\t}\n\n\t\t// perform search\n\t\tif (query !== self.lastQuery) {\n\t\t\tself.lastQuery\t\t\t= query;\n\t\t\tresult\t\t\t\t\t= self.sifter.search(query, Object.assign(options, {score: calculateScore}));\n\t\t\tself.currentResults\t\t= result;\n\t\t} else {\n\t\t\tresult\t\t\t\t\t= Object.assign( {}, self.currentResults);\n\t\t}\n\n\t\t// filter out selected items\n\t\tif( self.settings.hideSelected ){\n\t\t\tfor (i = result.items.length - 1; i >= 0; i--) {\n\t\t\t\tlet hashed = hash_key(result.items[i].id);\n\t\t\t\tif( hashed && self.items.indexOf(hashed) !== -1 ){\n\t\t\t\t\tresult.items.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Refreshes the list of available options shown\n\t * in the autocomplete dropdown menu.\n\t *\n\t */\n\trefreshOptions( triggerDropdown:boolean = true ){\n\t\tvar i, j, k, n, optgroup, optgroups, html:DocumentFragment, has_create_option, active_value, active_group;\n\t\tvar create;\n\t\tconst groups: {[key:string]:DocumentFragment} = {};\n\n\t\tconst groups_order:string[]\t= [];\n\t\tvar self\t\t\t\t\t= this;\n\t\tvar query\t\t\t\t\t= self.inputValue();\n\t\tvar results\t\t\t\t\t= self.search(query);\n\t\tvar active_option\t\t\t= null; //self.activeOption;\n\t\tvar show_dropdown\t\t\t= self.settings.shouldOpen || false;\n\t\tvar dropdown_content\t\t= self.dropdown_content;\n\n\t\tif( self.activeOption ){\n\t\t\tactive_value = self.activeOption.dataset.value;\n\t\t\tactive_group = self.activeOption.closest('[data-group]') as HTMLElement;\n\t\t}\n\n\t\t// build markup\n\t\tn = results.items.length;\n\t\tif (typeof self.settings.maxOptions === 'number') {\n\t\t\tn = Math.min(n, self.settings.maxOptions);\n\t\t}\n\n\t\tif( n > 0 ){\n\t\t\tshow_dropdown = true;\n\t\t}\n\n\t\t// render and group available options individually\n\t\tfor (i = 0; i < n; i++) {\n\n\t\t\t// get option dom element\n\t\t\tlet opt_value\t\t= results.items[i].id;\n\t\t\tlet option\t\t\t= self.options[opt_value];\n\t\t\tlet option_el\t\t= self.getOption(opt_value,true) as HTMLElement;\n\n\n\t\t\t// toggle 'selected' class\n\t\t\tif( !self.settings.hideSelected ){\n\t\t\t\toption_el.classList.toggle('selected', self.items.includes(opt_value) );\n\t\t\t}\n\n\t\t\toptgroup    = option[self.settings.optgroupField] || '';\n\t\t\toptgroups   = Array.isArray(optgroup) ? optgroup : [optgroup];\n\n\t\t\tfor (j = 0, k = optgroups && optgroups.length; j < k; j++) {\n\t\t\t\toptgroup = optgroups[j];\n\t\t\t\tif (!self.optgroups.hasOwnProperty(optgroup)) {\n\t\t\t\t\toptgroup = '';\n\t\t\t\t}\n\t\t\t\tif (!groups.hasOwnProperty(optgroup)) {\n\t\t\t\t\tgroups[optgroup] = document.createDocumentFragment();\n\t\t\t\t\tgroups_order.push(optgroup);\n\t\t\t\t}\n\n\t\t\t\t// nodes can only have one parent, so if the option is in mutple groups, we need a clone\n\t\t\t\tif( j > 0 ){\n\t\t\t\t\toption_el = option_el.cloneNode(true) as HTMLElement;\n\t\t\t\t\tsetAttr(option_el,{id: option.$id+'-clone-'+j,'aria-selected':null});\n\t\t\t\t\toption_el.classList.add('ts-cloned');\n\t\t\t\t\tremoveClasses(option_el,'active');\n\t\t\t\t}\n\n\t\t\t\t// make sure we keep the activeOption in the same group\n\t\t\t\tif( !active_option && active_value == opt_value ){\n\t\t\t\t\tif( active_group ){\n\t\t\t\t\t\tif( active_group.dataset.group === optgroup ){\n\t\t\t\t\t\t\tactive_option = option_el;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tactive_option = option_el;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroups[optgroup].appendChild(option_el);\n\t\t\t}\n\t\t}\n\n\t\t// sort optgroups\n\t\tif (this.settings.lockOptgroupOrder) {\n\t\t\tgroups_order.sort((a, b) => {\n\t\t\t\tvar a_order = self.optgroups[a] && self.optgroups[a].$order || 0;\n\t\t\t\tvar b_order = self.optgroups[b] && self.optgroups[b].$order || 0;\n\t\t\t\treturn a_order - b_order;\n\t\t\t});\n\t\t}\n\n\t\t// render optgroup headers & join groups\n\t\thtml = document.createDocumentFragment();\n\t\titerate( groups_order, (optgroup) => {\n\t\t\tif (self.optgroups.hasOwnProperty(optgroup) && groups[optgroup].children.length) {\n\n\t\t\t\tlet group_options = document.createDocumentFragment();\n\t\t\t\tlet header = self.render('optgroup_header', self.optgroups[optgroup]);\n\t\t\t\tappend( group_options, header );\n\t\t\t\tappend( group_options, groups[optgroup] );\n\n\t\t\t\tlet group_html = self.render('optgroup', {group:self.optgroups[optgroup],options:group_options} );\n\n\t\t\t\tappend( html, group_html );\n\n\t\t\t} else {\n\t\t\t\tappend( html, groups[optgroup] );\n\t\t\t}\n\t\t});\n\n\t\tdropdown_content.innerHTML = '';\n\t\tappend( dropdown_content, html );\n\n\t\t// highlight matching terms inline\n\t\tif (self.settings.highlight) {\n\t\t\tremoveHighlight( dropdown_content );\n\t\t\tif (results.query.length && results.tokens.length) {\n\t\t\t\titerate( results.tokens, (tok) => {\n\t\t\t\t\thighlight( dropdown_content, tok.regex);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// helper method for adding templates to dropdown\n\t\tvar add_template = (template:TomTemplateNames) => {\n\t\t\tlet content = self.render(template,{input:query});\n\t\t\tif( content ){\n\t\t\t\tshow_dropdown = true;\n\t\t\t\tdropdown_content.insertBefore(content, dropdown_content.firstChild);\n\t\t\t}\n\t\t\treturn content;\n\t\t};\n\n\n\t\t// add loading message\n\t\tif( self.loading ){\n\t\t\tadd_template('loading');\n\n\t\t// invalid query\n\t\t}else if( !self.settings.shouldLoad.call(self,query) ){\n\t\t\tadd_template('not_loading');\n\n\t\t// add no_results message\n\t\t}else if( results.items.length === 0 ){\n\t\t\tadd_template('no_results');\n\n\t\t}\n\n\n\n\t\t// add create option\n\t\thas_create_option = self.canCreate(query);\n\t\tif (has_create_option) {\n\t\t\tcreate = add_template('option_create');\n\t\t}\n\n\n\t\t// activate\n\t\tself.hasOptions = results.items.length > 0 || has_create_option;\n\t\tif( show_dropdown ){\n\n\t\t\tif (results.items.length > 0) {\n\n\t\t\t\tif( !active_option && self.settings.mode === 'single' && self.items.length ){\n\t\t\t\t\tactive_option = self.getOption(self.items[0]);\n\t\t\t\t}\n\n\t\t\t\tif( !dropdown_content.contains(active_option)  ){\n\n\t\t\t\t\tlet active_index = 0;\n\t\t\t\t\tif( create && !self.settings.addPrecedence ){\n\t\t\t\t\t\tactive_index = 1;\n\t\t\t\t\t}\n\t\t\t\t\tactive_option = self.selectable()[active_index] as HTMLElement;\n\t\t\t\t}\n\n\t\t\t}else if( create ){\n\t\t\t\tactive_option = create;\n\t\t\t}\n\n\t\t\tif( triggerDropdown && !self.isOpen ){\n\t\t\t\tself.open();\n\t\t\t\tself.scrollToOption(active_option,'auto');\n\t\t\t}\n\t\t\tself.setActiveOption(active_option);\n\n\t\t}else{\n\t\t\tself.clearActiveOption();\n\t\t\tif( triggerDropdown && self.isOpen ){\n\t\t\t\tself.close(false); // if create_option=null, we want the dropdown to close but not reset the textbox value\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Return list of selectable options\n\t *\n\t */\n\tselectable():NodeList{\n\t\treturn this.dropdown_content.querySelectorAll('[data-selectable]');\n\t}\n\n\n\n\t/**\n\t * Adds an available option. If it already exists,\n\t * nothing will happen. Note: this does not refresh\n\t * the options list dropdown (use `refreshOptions`\n\t * for that).\n\t *\n\t * Usage:\n\t *\n\t *   this.addOption(data)\n\t *\n\t */\n\taddOption( data:TomOption, user_created = false ):false|string {\n\t\tconst self = this;\n\n\t\t// @deprecated 1.7.7\n\t\t// use addOptions( array, user_created ) for adding multiple options\n\t\tif( Array.isArray(data) ){\n\t\t\tself.addOptions( data, user_created);\n\t\t\treturn false;\n\t\t}\n\n\t\tconst key = hash_key(data[self.settings.valueField]);\n\t\tif( key === null || self.options.hasOwnProperty(key) ){\n\t\t\treturn false;\n\t\t}\n\n\t\tdata.$order\t\t\t= data.$order || ++self.order;\n\t\tdata.$id\t\t\t= self.inputId + '-opt-' + data.$order;\n\t\tself.options[key]\t= data;\n\t\tself.lastQuery\t\t= null;\n\n\t\tif( user_created ){\n\t\t\tself.userOptions[key] = user_created;\n\t\t\tself.trigger('option_add', key, data);\n\t\t}\n\n\t\treturn key;\n\t}\n\n\t/**\n\t * Add multiple options\n\t *\n\t */\n\taddOptions( data:TomOption[], user_created = false ):void{\n\t\titerate( data, (dat) => {\n\t\t\tthis.addOption(dat, user_created);\n\t\t});\n\t}\n\n\t/**\n\t * @deprecated 1.7.7\n\t */\n\tregisterOption( data:TomOption ):false|string {\n\t\treturn this.addOption(data);\n\t}\n\n\t/**\n\t * Registers an option group to the pool of option groups.\n\t *\n\t * @return {boolean|string}\n\t */\n\tregisterOptionGroup(data:TomOption) {\n\t\tvar key = hash_key(data[this.settings.optgroupValueField]);\n\n\t\tif ( key === null ) return false;\n\n\t\tdata.$order = data.$order || ++this.order;\n\t\tthis.optgroups[key] = data;\n\t\treturn key;\n\t}\n\n\t/**\n\t * Registers a new optgroup for options\n\t * to be bucketed into.\n\t *\n\t */\n\taddOptionGroup(id:string, data:TomOption) {\n\t\tvar hashed_id;\n\t\tdata[this.settings.optgroupValueField] = id;\n\n\t\tif( hashed_id = this.registerOptionGroup(data) ){\n\t\t\tthis.trigger('optgroup_add', hashed_id, data);\n\t\t}\n\t}\n\n\t/**\n\t * Removes an existing option group.\n\t *\n\t */\n\tremoveOptionGroup(id:string) {\n\t\tif (this.optgroups.hasOwnProperty(id)) {\n\t\t\tdelete this.optgroups[id];\n\t\t\tthis.clearCache();\n\t\t\tthis.trigger('optgroup_remove', id);\n\t\t}\n\t}\n\n\t/**\n\t * Clears all existing option groups.\n\t */\n\tclearOptionGroups() {\n\t\tthis.optgroups = {};\n\t\tthis.clearCache();\n\t\tthis.trigger('optgroup_clear');\n\t}\n\n\t/**\n\t * Updates an option available for selection. If\n\t * it is visible in the selected items or options\n\t * dropdown, it will be re-rendered automatically.\n\t *\n\t */\n\tupdateOption(value:string, data:TomOption) {\n\t\tconst self = this;\n\t\tvar item_new;\n\t\tvar index_item;\n\n\t\tconst value_old\t\t= hash_key(value);\n\t\tconst value_new\t\t= hash_key(data[self.settings.valueField]);\n\n\t\t// sanity checks\n\t\tif( value_old === null ) return;\n\t\tif( !self.options.hasOwnProperty(value_old) ) return;\n\t\tif( typeof value_new !== 'string' ) throw new Error('Value must be set in option data');\n\n\n\t\tconst option\t\t= self.getOption(value_old);\n\t\tconst item\t\t\t= self.getItem(value_old);\n\n\n\t\tdata.$order = data.$order || self.options[value_old].$order;\n\t\tdelete self.options[value_old];\n\n\t\t// invalidate render cache\n\t\t// don't remove existing node yet, we'll remove it after replacing it\n\t\tself.uncacheValue(value_new);\n\n\t\tself.options[value_new] = data;\n\n\t\t// update the option if it's in the dropdown\n\t\tif( option ){\n\t\t\tif( self.dropdown_content.contains(option) ){\n\n\t\t\t\tconst option_new\t= self._render('option', data);\n\t\t\t\treplaceNode(option, option_new);\n\n\t\t\t\tif( self.activeOption === option ){\n\t\t\t\t\tself.setActiveOption(option_new);\n\t\t\t\t}\n\t\t\t}\n\t\t\toption.remove();\n\t\t}\n\n\t\t// update the item if we have one\n\t\tif( item ){\n\t\t\tindex_item = self.items.indexOf(value_old);\n\t\t\tif (index_item !== -1) {\n\t\t\t\tself.items.splice(index_item, 1, value_new);\n\t\t\t}\n\n\t\t\titem_new\t= self._render('item', data);\n\n\t\t\tif( item.classList.contains('active') ) addClasses(item_new,'active');\n\n\t\t\treplaceNode( item, item_new);\n\t\t}\n\n\t\t// invalidate last query because we might have updated the sortField\n\t\tself.lastQuery = null;\n\t}\n\n\t/**\n\t * Removes a single option.\n\t *\n\t */\n\tremoveOption(value:string, silent?:boolean):void {\n\t\tconst self = this;\n\t\tvalue = get_hash(value);\n\n\t\tself.uncacheValue(value);\n\n\t\tdelete self.userOptions[value];\n\t\tdelete self.options[value];\n\t\tself.lastQuery = null;\n\t\tself.trigger('option_remove', value);\n\t\tself.removeItem(value, silent);\n\t}\n\n\t/**\n\t * Clears all options.\n\t */\n\tclearOptions(filter?:TomClearFilter ) {\n\n\t\tconst boundFilter = (filter || this.clearFilter).bind(this);\n\n\t\tthis.loadedSearches\t\t= {};\n\t\tthis.userOptions\t\t= {};\n\t\tthis.clearCache();\n\n\t\tconst selected:TomOptions\t= {};\n\t\titerate(this.options,(option,key)=>{\n\t\t\tif( boundFilter(option,key as string) ){\n\t\t\t\tselected[key] = this.options[key];\n\t\t\t}\n\t\t});\n\n\t\tthis.options = this.sifter.items = selected;\n\t\tthis.lastQuery = null;\n\t\tthis.trigger('option_clear');\n\t}\n\n\t/**\n\t * Used by clearOptions() to decide whether or not an option should be removed\n\t * Return true to keep an option, false to remove\n\t *\n\t */\n\tclearFilter(option:TomOption,value:string){\n\t\tif( this.items.indexOf(value) >= 0 ){\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns the dom element of the option\n\t * matching the given value.\n\t *\n\t */\n\tgetOption(value:null|string, create:boolean=false):null|HTMLElement {\n\t\tconst hashed = hash_key(value);\n\n\t\tif( hashed !== null && this.options.hasOwnProperty(hashed) ){\n\t\t\tconst option = this.options[hashed];\n\n\t\t\tif( option.$div ){\n\t\t\t\treturn option.$div;\n\t\t\t}\n\n\t\t\tif( create ){\n\t\t\t\treturn this._render('option', option);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns the dom element of the next or previous dom element of the same type\n\t * Note: adjacent options may not be adjacent DOM elements (optgroups)\n\t *\n\t */\n\tgetAdjacent( option:null|HTMLElement, direction:number, type:string = 'option' ) : HTMLElement|null{\n\t\tvar self = this, all;\n\n\t\tif( !option ){\n\t\t\treturn null;\n\t\t}\n\n\t\tif( type == 'item' ){\n\t\t\tall\t\t\t= self.controlChildren();\n\t\t}else{\n\t\t\tall\t\t\t= self.dropdown_content.querySelectorAll('[data-selectable]');\n\t\t}\n\n\t\tfor( let i = 0; i < all.length; i++ ){\n\t\t\tif( all[i] != option ){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif( direction > 0 ){\n\t\t\t\treturn all[i+1] as HTMLElement;\n\t\t\t}\n\n\t\t\treturn all[i-1] as HTMLElement;\n\t\t}\n\t\treturn null;\n\t}\n\n\n\t/**\n\t * Returns the dom element of the item\n\t * matching the given value.\n\t *\n\t */\n\tgetItem(item:string|TomItem|null):null|TomItem {\n\n\t\tif( typeof item == 'object' ){\n\t\t\treturn item;\n\t\t}\n\n\t\tvar value = hash_key(item);\n\t\treturn value !== null\n\t\t\t? this.control.querySelector(`[data-value=\"${addSlashes(value)}\"]`)\n\t\t\t: null;\n\t}\n\n\t/**\n\t * \"Selects\" multiple items at once. Adds them to the list\n\t * at the current caret position.\n\t *\n\t */\n\taddItems( values:string|string[], silent?:boolean ):void{\n\t\tvar self = this;\n\n\t\tvar items = Array.isArray(values) ? values : [values];\n\t\titems = items.filter(x => self.items.indexOf(x) === -1);\n\t\tfor (let i = 0, n = items.length; i < n; i++) {\n\t\t\tself.isPending = (i < n - 1);\n\t\t\tself.addItem(items[i], silent);\n\t\t}\n\t}\n\n\t/**\n\t * \"Selects\" an item. Adds it to the list\n\t * at the current caret position.\n\t *\n\t */\n\taddItem( value:string, silent?:boolean ):void{\n\t\tvar events = silent ? [] : ['change','dropdown_close'];\n\n\t\tdebounce_events(this, events, () => {\n\t\t\tvar item, wasFull;\n\t\t\tconst self = this;\n\t\t \tconst inputMode = self.settings.mode;\n\t\t\tconst hashed = hash_key(value);\n\n\t\t\tif( hashed && self.items.indexOf(hashed) !== -1 ){\n\n\t\t\t\tif( inputMode === 'single' ){\n\t\t\t\t\tself.close();\n\t\t\t\t}\n\n\t\t\t\tif( inputMode === 'single' || !self.settings.duplicates ){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hashed === null || !self.options.hasOwnProperty(hashed)) return;\n\t\t\tif (inputMode === 'single') self.clear(silent);\n\t\t\tif (inputMode === 'multi' && self.isFull()) return;\n\n\t\t\titem = self._render('item', self.options[hashed]);\n\n\t\t\tif( self.control.contains(item) ){ // duplicates\n\t\t\t\titem = item.cloneNode(true) as HTMLElement;\n\t\t\t}\n\n\t\t\twasFull = self.isFull();\n\t\t\tself.items.splice(self.caretPos, 0, hashed);\n\t\t\tself.insertAtCaret(item);\n\n\t\t\tif (self.isSetup) {\n\n\t\t\t\t// update menu / remove the option (if this is not one item being added as part of series)\n\t\t\t\tif( !self.isPending && self.settings.hideSelected ){\n\t\t\t\t\tlet option = self.getOption(hashed);\n\t\t\t\t\tlet next = self.getAdjacent(option, 1);\n\t\t\t\t\tif( next ){\n\t\t\t\t\t\tself.setActiveOption(next);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// refreshOptions after setActiveOption(),\n\t\t\t\t// otherwise setActiveOption() will be called by refreshOptions() with the wrong value\n\t\t\t\tif( !self.isPending && !self.settings.closeAfterSelect ){\n\t\t\t\t\tself.refreshOptions(self.isFocused && inputMode !== 'single');\n\t\t\t\t}\n\n\t\t\t\t// hide the menu if the maximum number of items have been selected or no options are left\n\t\t\t\tif( self.settings.closeAfterSelect != false && self.isFull() ){\n\t\t\t\t\tself.close();\n\t\t\t\t} else if (!self.isPending) {\n\t\t\t\t\tself.positionDropdown();\n\t\t\t\t}\n\n\t\t\t\tself.trigger('item_add', hashed, item);\n\n\t\t\t\tif (!self.isPending) {\n\t\t\t\t\tself.updateOriginalInput({silent: silent});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!self.isPending || (!wasFull && self.isFull())) {\n\t\t\t\tself.inputState();\n\t\t\t\tself.refreshState();\n\t\t\t}\n\n\t\t});\n\t}\n\n\t/**\n\t * Removes the selected item matching\n\t * the provided value.\n\t *\n\t */\n\tremoveItem( item:string|TomItem|null=null, silent?:boolean ){\n\t\tconst self\t\t= this;\n\t\titem\t\t\t= self.getItem(item);\n\n\t\tif( !item ) return;\n\n\t\tvar i,idx;\n\t\tconst value\t= item.dataset.value;\n\t\ti = nodeIndex(item);\n\n\t\titem.remove();\n\t\tif( item.classList.contains('active') ){\n\t\t\tidx = self.activeItems.indexOf(item);\n\t\t\tself.activeItems.splice(idx, 1);\n\t\t\tremoveClasses(item,'active');\n\t\t}\n\n\t\tself.items.splice(i, 1);\n\t\tself.lastQuery = null;\n\t\tif (!self.settings.persist && self.userOptions.hasOwnProperty(value)) {\n\t\t\tself.removeOption(value, silent);\n\t\t}\n\n\t\tif (i < self.caretPos) {\n\t\t\tself.setCaret(self.caretPos - 1);\n\t\t}\n\n\t\tself.updateOriginalInput({silent: silent});\n\t\tself.refreshState();\n\t\tself.positionDropdown();\n\t\tself.trigger('item_remove', value, item);\n\n\t}\n\n\t/**\n\t * Invokes the `create` method provided in the\n\t * TomSelect options that should provide the data\n\t * for the new item, given the user input.\n\t *\n\t * Once this completes, it will be added\n\t * to the item list.\n\t *\n\t */\n\tcreateItem( input:null|string=null, triggerDropdown:boolean=true, callback:TomCreateCallback = ()=>{} ):boolean{\n\t\tvar self  = this;\n\t\tvar caret = self.caretPos;\n\t\tvar output;\n\t\tinput = input || self.inputValue();\n\n\t\tif (!self.canCreate(input)) {\n\t\t\tcallback();\n\t\t\treturn false;\n\t\t}\n\n\t\tself.lock();\n\n\t\tvar created = false;\n\t\tvar create = (data?:boolean|TomOption) => {\n\t\t\tself.unlock();\n\n\t\t\tif (!data || typeof data !== 'object') return callback();\n\t\t\tvar value = hash_key(data[self.settings.valueField]);\n\t\t\tif( typeof value !== 'string' ){\n\t\t\t\treturn callback();\n\t\t\t}\n\n\t\t\tself.setTextboxValue();\n\t\t\tself.addOption(data,true);\n\t\t\tself.setCaret(caret);\n\t\t\tself.addItem(value);\n\t\t\tcallback(data);\n\t\t\tcreated = true;\n\t\t};\n\n\t\tif( typeof self.settings.create === 'function' ){\n\t\t\toutput = self.settings.create.call(this, input, create);\n\t\t}else{\n\t\t\toutput = {\n\t\t\t\t[self.settings.labelField]: input,\n\t\t\t\t[self.settings.valueField]: input,\n\t\t\t};\n\t\t}\n\n\t\tif( !created ){\n\t\t\tcreate(output);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Re-renders the selected item lists.\n\t */\n\trefreshItems() {\n\t\tvar self = this;\n\t\tself.lastQuery = null;\n\n\t\tif (self.isSetup) {\n\t\t\tself.addItems(self.items);\n\t\t}\n\n\t\tself.updateOriginalInput();\n\t\tself.refreshState();\n\t}\n\n\t/**\n\t * Updates all state-dependent attributes\n\t * and CSS classes.\n\t */\n\trefreshState() {\n\t\tconst self     = this;\n\n\t\tself.refreshValidityState();\n\n\t\tconst isFull\t= self.isFull();\n\t\tconst isLocked\t= self.isLocked;\n\n\t\tself.wrapper.classList.toggle('rtl',self.rtl);\n\n\n\t\tconst wrap_classList = self.wrapper.classList;\n\n\t\twrap_classList.toggle('focus', self.isFocused)\n\t\twrap_classList.toggle('disabled', self.isDisabled)\n\t\twrap_classList.toggle('required', self.isRequired)\n\t\twrap_classList.toggle('invalid', !self.isValid)\n\t\twrap_classList.toggle('locked', isLocked)\n\t\twrap_classList.toggle('full', isFull)\n\t\twrap_classList.toggle('input-active', self.isFocused && !self.isInputHidden)\n\t\twrap_classList.toggle('dropdown-active', self.isOpen)\n\t\twrap_classList.toggle('has-options', isEmptyObject(self.options) )\n\t\twrap_classList.toggle('has-items', self.items.length > 0);\n\n\t}\n\n\n\t/**\n\t * Update the `required` attribute of both input and control input.\n\t *\n\t * The `required` property needs to be activated on the control input\n\t * for the error to be displayed at the right place. `required` also\n\t * needs to be temporarily deactivated on the input since the input is\n\t * hidden and can't show errors.\n\t */\n\trefreshValidityState() {\n\t\tvar self = this;\n\n\t\tif( !self.input.validity ){\n\t\t\treturn;\n\t\t}\n\n\t\tself.isValid = self.input.validity.valid;\n\t\tself.isInvalid = !self.isValid;\n\t}\n\n\t/**\n\t * Determines whether or not more items can be added\n\t * to the control without exceeding the user-defined maximum.\n\t *\n\t * @returns {boolean}\n\t */\n\tisFull() {\n\t\treturn this.settings.maxItems !== null && this.items.length >= this.settings.maxItems;\n\t}\n\n\t/**\n\t * Refreshes the original <select> or <input>\n\t * element to reflect the current state.\n\t *\n\t */\n\tupdateOriginalInput( opts:TomArgObject = {} ){\n\t\tconst self = this;\n\t\tvar option, label;\n\n\t\tconst empty_option = self.input.querySelector('option[value=\"\"]') as HTMLOptionElement;\n\n\t\tif( self.is_select_tag ){\n\n\t\t\tconst selected:HTMLOptionElement[]\t\t= [];\n\t\t\tconst has_selected:number\t\t\t\t= self.input.querySelectorAll('option:checked').length;\n\n\t\t\tfunction AddSelected(option_el:HTMLOptionElement|null, value:string, label:string):HTMLOptionElement{\n\n\t\t\t\tif( !option_el ){\n\t\t\t\t\toption_el = getDom('<option value=\"' + escape_html(value) + '\">' + escape_html(label) + '</option>') as HTMLOptionElement;\n\t\t\t\t}\n\n\t\t\t\t// don't move empty option from top of list\n\t\t\t\t// fixes bug in firefox https://bugzilla.mozilla.org/show_bug.cgi?id=1725293\n\t\t\t\tif( option_el != empty_option ){\n\t\t\t\t\tself.input.append(option_el);\n\t\t\t\t}\n\n\t\t\t\tselected.push(option_el);\n\n\t\t\t\t// marking empty option as selected can break validation\n\t\t\t\t// fixes https://github.com/orchidjs/tom-select/issues/303\n\t\t\t\tif( option_el != empty_option || has_selected > 0 ){\n\t\t\t\t\toption_el.selected = true;\n\t\t\t\t}\n\n\t\t\t\treturn option_el;\n\t\t\t}\n\n\t\t\t// unselect all selected options\n\t\t\tself.input.querySelectorAll('option:checked').forEach((option_el:Element) => {\n\t\t\t\t(<HTMLOptionElement>option_el).selected = false;\n\t\t\t});\n\n\n\t\t\t// nothing selected?\n\t\t\tif( self.items.length == 0 && self.settings.mode == 'single' ){\n\n\t\t\t\tAddSelected(empty_option, \"\", \"\");\n\n\t\t\t// order selected <option> tags for values in self.items\n\t\t\t}else{\n\n\t\t\t\tself.items.forEach((value)=>{\n\t\t\t\t\toption\t\t\t= self.options[value];\n\t\t\t\t\tlabel\t\t\t= option[self.settings.labelField] || '';\n\n\t\t\t\t\tif( selected.includes(option.$option) ){\n\t\t\t\t\t\tconst reuse_opt = self.input.querySelector(`option[value=\"${addSlashes(value)}\"]:not(:checked)`) as HTMLOptionElement;\n\t\t\t\t\t\tAddSelected(reuse_opt, value, label);\n\t\t\t\t\t}else{\n\t\t\t\t\t\toption.$option\t= AddSelected(option.$option, value, label);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t} else {\n\t\t\tself.input.value = self.getValue() as string;\n\t\t}\n\n\t\tif (self.isSetup) {\n\t\t\tif (!opts.silent) {\n\t\t\t\tself.trigger('change', self.getValue() );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Shows the autocomplete dropdown containing\n\t * the available options.\n\t */\n\topen() {\n\t\tvar self = this;\n\n\t\tif (self.isLocked || self.isOpen || (self.settings.mode === 'multi' && self.isFull())) return;\n\t\tself.isOpen = true;\n\t\tsetAttr(self.focus_node,{'aria-expanded': 'true'});\n\t\tself.refreshState();\n\t\tapplyCSS(self.dropdown,{visibility: 'hidden', display: 'block'});\n\t\tself.positionDropdown();\n\t\tapplyCSS(self.dropdown,{visibility: 'visible', display: 'block'});\n\t\tself.focus();\n\t\tself.trigger('dropdown_open', self.dropdown);\n\t}\n\n\t/**\n\t * Closes the autocomplete dropdown menu.\n\t */\n\tclose(setTextboxValue=true) {\n\t\tvar self = this;\n\t\tvar trigger = self.isOpen;\n\n\t\tif( setTextboxValue ){\n\n\t\t\t// before blur() to prevent form onchange event\n\t\t\tself.setTextboxValue();\n\n\t\t\tif (self.settings.mode === 'single' && self.items.length) {\n\t\t\t\tself.hideInput();\n\t\t\t}\n\t\t}\n\n\t\tself.isOpen = false;\n\t\tsetAttr(self.focus_node,{'aria-expanded': 'false'});\n\t\tapplyCSS(self.dropdown,{display: 'none'});\n\t\tif( self.settings.hideSelected ){\n\t\t\tself.clearActiveOption();\n\t\t}\n\t\tself.refreshState();\n\n\t\tif (trigger) self.trigger('dropdown_close', self.dropdown);\n\t}\n\n\t/**\n\t * Calculates and applies the appropriate\n\t * position of the dropdown if dropdownParent = 'body'.\n\t * Otherwise, position is determined by css\n\t */\n\tpositionDropdown(){\n\n\t\tif( this.settings.dropdownParent !== 'body' ){\n\t\t\treturn;\n\t\t}\n\n\t\tvar context\t\t\t= this.control;\n\t\tvar rect\t\t\t= context.getBoundingClientRect();\n\t\tvar top\t\t\t\t= context.offsetHeight + rect.top  + window.scrollY;\n\t\tvar left\t\t\t= rect.left + window.scrollX;\n\n\n\t\tapplyCSS(this.dropdown,{\n\t\t\twidth : rect.width + 'px',\n\t\t\ttop   : top + 'px',\n\t\t\tleft  : left + 'px'\n\t\t});\n\n\t}\n\n\t/**\n\t * Resets / clears all selected items\n\t * from the control.\n\t *\n\t */\n\tclear(silent?:boolean) {\n\t\tvar self = this;\n\n\t\tif (!self.items.length) return;\n\n\t\tvar items = self.controlChildren();\n\t\titerate(items,(item)=>{\n\t\t\tself.removeItem(item,true);\n\t\t});\n\n\t\tself.showInput();\n\t\tif( !silent ) self.updateOriginalInput();\n\t\tself.trigger('clear');\n\t}\n\n\t/**\n\t * A helper method for inserting an element\n\t * at the current caret position.\n\t *\n\t */\n\tinsertAtCaret(el:HTMLElement) {\n\t\tconst self\t\t= this;\n\t\tconst caret\t\t= self.caretPos;\n\t\tconst target\t= self.control;\n\n\t\ttarget.insertBefore(el, target.children[caret]);\n\n\t\tself.setCaret(caret + 1);\n\t}\n\n\t/**\n\t * Removes the current selected item(s).\n\t *\n\t */\n\tdeleteSelection(e:KeyboardEvent):boolean {\n\t\tvar direction, selection, caret, tail;\n\t\tvar self = this;\n\n\t\tdirection = (e && e.keyCode === constants.KEY_BACKSPACE) ? -1 : 1;\n\t\tselection = getSelection(self.control_input);\n\n\n\t\t// determine items that will be removed\n\t\tconst rm_items:TomItem[]\t= [];\n\n\t\tif (self.activeItems.length) {\n\n\t\t\ttail = getTail(self.activeItems, direction);\n\t\t\tcaret = nodeIndex(tail);\n\n\t\t\tif (direction > 0) { caret++; }\n\n\t\t\titerate(self.activeItems, (item) => rm_items.push(item) );\n\n\t\t} else if ((self.isFocused || self.settings.mode === 'single') && self.items.length) {\n\t\t\tconst items = self.controlChildren();\n\t\t\tif (direction < 0 && selection.start === 0 && selection.length === 0) {\n\t\t\t\trm_items.push( items[self.caretPos - 1]);\n\n\t\t\t} else if (direction > 0 && selection.start === self.inputValue().length) {\n\t\t\t\trm_items.push(items[self.caretPos]);\n\t\t\t}\n\t\t}\n\n\t\tif( !self.shouldDelete(rm_items,e) ){\n\t\t\treturn false;\n\t\t}\n\n\t\tpreventDefault(e,true);\n\n\t\t// perform removal\n\t\tif (typeof caret !== 'undefined') {\n\t\t\tself.setCaret(caret);\n\t\t}\n\n\t\twhile( rm_items.length ){\n\t\t\tself.removeItem(rm_items.pop());\n\t\t}\n\n\t\tself.showInput();\n\t\tself.positionDropdown();\n\t\tself.refreshOptions(false);\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Return true if the items should be deleted\n\t */\n\tshouldDelete(items:TomItem[],evt:MouseEvent|KeyboardEvent){\n\n\t\tconst values = items.map(item => item.dataset.value);\n\n\t\t// allow the callback to abort\n\t\tif( !values.length || (typeof this.settings.onDelete === 'function' && this.settings.onDelete(values,evt) === false) ){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Selects the previous / next item (depending on the `direction` argument).\n\t *\n\t * > 0 - right\n\t * < 0 - left\n\t *\n\t */\n\tadvanceSelection(direction:number, e?:MouseEvent|KeyboardEvent) {\n\t\tvar last_active, adjacent, self = this;\n\n\t\tif (self.rtl) direction *= -1;\n\t\tif( self.inputValue().length ) return;\n\n\n\t\t// add or remove to active items\n\t\tif( isKeyDown(constants.KEY_SHORTCUT,e) || isKeyDown('shiftKey',e) ){\n\n\t\t\tlast_active\t\t\t= self.getLastActive(direction);\n\t\t\tif( last_active ){\n\n\t\t\t\tif( !last_active.classList.contains('active') ){\n\t\t\t\t\tadjacent\t\t\t= last_active;\n\t\t\t\t}else{\n\t\t\t\t\tadjacent\t\t\t= self.getAdjacent(last_active,direction,'item');\n\t\t\t\t}\n\n\t\t\t// if no active item, get items adjacent to the control input\n\t\t\t}else if( direction > 0 ){\n\t\t\t\tadjacent\t\t\t= self.control_input.nextElementSibling;\n\t\t\t}else{\n\t\t\t\tadjacent\t\t\t= self.control_input.previousElementSibling;\n\t\t\t}\n\n\n\t\t\tif( adjacent ){\n\t\t\t\tif( adjacent.classList.contains('active') ){\n\t\t\t\t\tself.removeActiveItem(last_active);\n\t\t\t\t}\n\t\t\t\tself.setActiveItemClass(adjacent); // mark as last_active !! after removeActiveItem() on last_active\n\t\t\t}\n\n\t\t// move caret to the left or right\n\t\t}else{\n\t\t\tself.moveCaret(direction);\n\t\t}\n\t}\n\n\tmoveCaret(direction:number){}\n\n\t/**\n\t * Get the last active item\n\t *\n\t */\n\tgetLastActive(direction?:number){\n\n\t\tlet last_active = this.control.querySelector('.last-active');\n\t\tif( last_active ){\n\t\t\treturn last_active;\n\t\t}\n\n\n\t\tvar result = this.control.querySelectorAll('.active');\n\t\tif( result ){\n\t\t\treturn getTail(result,direction);\n\t\t}\n\t}\n\n\n\t/**\n\t * Moves the caret to the specified index.\n\t *\n\t * The input must be moved by leaving it in place and moving the\n\t * siblings, due to the fact that focus cannot be restored once lost\n\t * on mobile webkit devices\n\t *\n\t */\n\tsetCaret(new_pos:number) {\n\t\tthis.caretPos = this.items.length;\n\t}\n\n\t/**\n\t * Return list of item dom elements\n\t *\n\t */\n\tcontrolChildren():TomItem[]{\n\t\treturn Array.from( this.control.querySelectorAll('[data-ts-item]') ) as TomItem[];\n\t}\n\n\t/**\n\t * Disables user input on the control. Used while\n\t * items are being asynchronously created.\n\t */\n\tlock() {\n\t\tthis.isLocked = true;\n\t\tthis.refreshState();\n\t}\n\n\t/**\n\t * Re-enables user input on the control.\n\t */\n\tunlock() {\n\t\tthis.isLocked = false;\n\t\tthis.refreshState();\n\t}\n\n\t/**\n\t * Disables user input on the control completely.\n\t * While disabled, it cannot receive focus.\n\t */\n\tdisable() {\n\t\tvar self = this;\n\t\tself.input.disabled\t\t\t\t= true;\n\t\tself.control_input.disabled\t\t= true;\n\t\tself.focus_node.tabIndex\t\t= -1;\n\t\tself.isDisabled\t\t\t\t\t= true;\n\t\tthis.close();\n\t\tself.lock();\n\t}\n\n\t/**\n\t * Enables the control so that it can respond\n\t * to focus and user input.\n\t */\n\tenable() {\n\t\tvar self = this;\n\t\tself.input.disabled\t\t\t\t= false;\n\t\tself.control_input.disabled\t\t= false;\n\t\tself.focus_node.tabIndex\t\t= self.tabIndex;\n\t\tself.isDisabled\t\t\t\t\t= false;\n\t\tself.unlock();\n\t}\n\n\t/**\n\t * Completely destroys the control and\n\t * unbinds all event listeners so that it can\n\t * be garbage collected.\n\t */\n\tdestroy() {\n\t\tvar self = this;\n\t\tvar revertSettings = self.revertSettings;\n\n\t\tself.trigger('destroy');\n\t\tself.off();\n\t\tself.wrapper.remove();\n\t\tself.dropdown.remove();\n\n\t\tself.input.innerHTML = revertSettings.innerHTML;\n\t\tself.input.tabIndex = revertSettings.tabIndex;\n\n\t\tremoveClasses(self.input,'tomselected','ts-hidden-accessible');\n\n\t\tself._destroy();\n\n\t\tdelete self.input.tomselect;\n\t}\n\n\t/**\n\t * A helper method for rendering \"item\" and\n\t * \"option\" templates, given the data.\n\t *\n\t */\n\trender( templateName:TomTemplateNames, data?:any ):null|HTMLElement{\n\n\t\tif( typeof this.settings.render[templateName] !== 'function' ){\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this._render(templateName, data);\n\t}\n\n\t/**\n\t * _render() can be called directly when we know we don't want to hit the cache\n\t * return type could be null for some templates, we need https://github.com/microsoft/TypeScript/issues/33014\n\t */\n\t_render( templateName:TomTemplateNames, data?:any ):HTMLElement{\n\t\tvar value = '', id, html;\n\t\tconst self = this;\n\n\t\tif( templateName === 'option' || templateName == 'item' ){\n\t\t\tvalue\t= get_hash(data[self.settings.valueField]);\n\t\t}\n\n\t\t// render markup\n\t\thtml = self.settings.render[templateName].call(this, data, escape_html);\n\n\t\tif( html == null ){\n\t\t\treturn html;\n\t\t}\n\n\t\thtml = getDom( html );\n\n\t\t// add mandatory attributes\n\t\tif (templateName === 'option' || templateName === 'option_create') {\n\n\t\t\tif( data[self.settings.disabledField] ){\n\t\t\t\tsetAttr(html,{'aria-disabled':'true'});\n\t\t\t}else{\n\t\t\t\tsetAttr(html,{'data-selectable': ''});\n\t\t\t}\n\n\t\t}else if (templateName === 'optgroup') {\n\t\t\tid = data.group[self.settings.optgroupValueField];\n\t\t\tsetAttr(html,{'data-group': id});\n\t\t\tif(data.group[self.settings.disabledField]) {\n\t\t\t\tsetAttr(html,{'data-disabled': ''});\n\t\t\t}\n\t\t}\n\n\t\tif (templateName === 'option' || templateName === 'item') {\n\t\t\tsetAttr(html,{'data-value': value });\n\n\n\t\t\t// make sure we have some classes if a template is overwritten\n\t\t\tif( templateName === 'item' ){\n\t\t\t\taddClasses(html,self.settings.itemClass);\n\t\t\t\tsetAttr(html,{'data-ts-item':''});\n\t\t\t}else{\n\t\t\t\taddClasses(html,self.settings.optionClass);\n\t\t\t\tsetAttr(html,{\n\t\t\t\t\trole:'option',\n\t\t\t\t\tid:data.$id\n\t\t\t\t});\n\n\t\t\t\t// update cache\n\t\t\t\tself.options[value].$div = html;\n\t\t\t}\n\n\n\t\t}\n\n\t\treturn html;\n\t}\n\n\n\t/**\n\t * Clears the render cache for a template. If\n\t * no template is given, clears all render\n\t * caches.\n\t *\n\t */\n\tclearCache():void{\n\n\t\titerate(this.options, (option, value)=>{\n\t\t\tif( option.$div ){\n\t\t\t\toption.$div.remove();\n\t\t\t\tdelete option.$div;\n\t\t\t}\n\t\t});\n\n\t}\n\n\t/**\n\t * Removes a value from item and option caches\n\t *\n\t */\n\tuncacheValue(value:string){\n\n\t\tconst option_el\t\t\t= this.getOption(value);\n\t\tif( option_el ) option_el.remove();\n\n\t}\n\n\t/**\n\t * Determines whether or not to display the\n\t * create item prompt, given a user input.\n\t *\n\t */\n\tcanCreate( input:string ):boolean {\n\t\treturn this.settings.create && (input.length > 0) && (this.settings.createFilter as TomCreateFilter ).call(this, input);\n\t}\n\n\n\t/**\n\t * Wraps this.`method` so that `new_fn` can be invoked 'before', 'after', or 'instead' of the original method\n\t *\n\t * this.hook('instead','onKeyDown',function( arg1, arg2 ...){\n\t *\n\t * });\n\t */\n\thook( when:string, method:string, new_fn:any ){\n\t\tvar self = this;\n\t\tvar orig_method = self[method];\n\n\n\t\tself[method] = function(){\n\t\t\tvar result, result_new;\n\n\t\t\tif( when === 'after' ){\n\t\t\t\tresult = orig_method.apply(self, arguments);\n\t\t\t}\n\n\t\t\tresult_new = new_fn.apply(self, arguments );\n\n\t\t\tif( when === 'instead' ){\n\t\t\t\treturn result_new;\n\t\t\t}\n\n\t\t\tif( when === 'before' ){\n\t\t\t\tresult = orig_method.apply(self, arguments);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\n\t}\n\n};\n", "/**\n * Plugin: \"remove_button\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport TomSelect from '../../tom-select';\nimport { getDom } from '../../vanilla';\nimport { escape_html, preventDefault, addEvent } from '../../utils';\nimport { TomOption, TomItem } from '../../types/index';\nimport { RBOptions } from './types';\n\nexport default function(this:TomSelect, userOptions:RBOptions) {\n\n\tconst options = Object.assign({\n\t\t\tlabel     : '&times;',\n\t\t\ttitle     : 'Remove',\n\t\t\tclassName : 'remove',\n\t\t\tappend    : true\n\t\t}, userOptions);\n\n\n\t//options.className = 'remove-single';\n\tvar self\t\t\t= this;\n\n\t// override the render method to add remove button to each item\n\tif( !options.append ){\n\t\treturn;\n\t}\n\n\tvar html = '<a href=\"javascript:void(0)\" class=\"' + options.className + '\" tabindex=\"-1\" title=\"' + escape_html(options.title) + '\">' + options.label + '</a>';\n\n\tself.hook('after','setupTemplates',() => {\n\n\t\tvar orig_render_item = self.settings.render.item;\n\n\t\tself.settings.render.item = (data:TomOption, escape:typeof escape_html) => {\n\n\t\t\tvar item = getDom(orig_render_item.call(self, data, escape)) as TomItem;\n\n\t\t\tvar close_button = getDom(html);\n\t\t\titem.appendChild(close_button);\n\n\t\t\taddEvent(close_button,'mousedown',(evt) => {\n\t\t\t\tpreventDefault(evt,true);\n\t\t\t});\n\n\t\t\taddEvent(close_button,'click',(evt) => {\n\n\t\t\t\t// propagating will trigger the dropdown to show for single mode\n\t\t\t\tpreventDefault(evt,true);\n\n\t\t\t\tif( self.isLocked ) return;\n\t\t\t\tif( !self.shouldDelete([item],evt as MouseEvent) ) return;\n\n\t\t\t\tself.removeItem(item);\n\t\t\t\tself.refreshOptions(false);\n\t\t\t\tself.inputState();\n\t\t\t});\n\n\t\t\treturn item;\n\t\t};\n\n\t});\n\n\n};\n", "\nexport abstract class IncompleteSelect {\n\tprivate readonly endpoint?: string;\n\tprivate readonly fieldName?: string;\n\tprotected isIncomplete: boolean;\n\tprotected readonly fieldGroup: Element;\n\n\tconstructor(element: HTMLElement) {\n\t\tconst fieldGroup = element.closest('django-field-group');\n\t\tconst form = element.closest('form');\n\t\tconst formset = element.closest('django-formset');\n\t\tif (!fieldGroup || !form || !formset)\n\t\t\tthrow new Error(\"Attempt to initialize <django-selectize> outside <django-formset>\");\n\t\tthis.fieldGroup = fieldGroup;\n\t\tthis.isIncomplete = element.hasAttribute('incomplete');\n\t\tif (this.isIncomplete) {\n\t\t\t// select fields marked as \"uncomplete\" will fetch additional data from their backend\n\t\t\tconst formName = form.getAttribute('name') ?? '__default__';\n\t\t\tthis.endpoint = formset.getAttribute('endpoint') ?? '';\n\t\t\tthis.fieldName = `${formName}.${element.getAttribute('name')}`;\n\t\t}\n\t\tform.addEventListener('reset', event => this.formResetted(event));\n\t\tform.addEventListener('submitted', event => this.formSubmitted(event));\n\t}\n\n\tabstract formResetted(event: Event) : void;\n\n\tabstract formSubmitted(event: Event) : void;\n\n\tprotected touch = () => {\n\t\tthis.fieldGroup.classList.remove('dj-untouched');\n\t\tthis.fieldGroup.classList.remove('dj-validated');\n\t\tthis.fieldGroup.classList.add('dj-touched');\n\t}\n\n\tprotected async loadOptions(query: string, successCallback: Function) {\n\t\tconst headers = new Headers();\n\t\theaders.append('Accept', 'application/json');\n\t\tconst url = `${this.endpoint}?field=${this.fieldName}&${query}`;\n\t\tconst response = await fetch(url, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: headers,\n\t\t});\n\t\tif (response.status === 200) {\n\t\t\tconst data = await response.json();\n\t\t\tif (typeof data.incomplete === 'boolean') {\n\t\t\t\tthis.isIncomplete = data.incomplete;\n\t\t\t}\n\t\t\tsuccessCallback(data.items);\n\t\t} else {\n\t\t\tconsole.error(`Failed to fetch from ${url} (status=${response.status})`);\n\t\t}\n\t}\n}\n", "import TomSelect from 'tom-select/src/tom-select';\nimport { TomSettings } from 'tom-select/src/types/settings';\nimport { TomInput } from 'tom-select/src/types';\nimport TomSelect_remove_button from 'tom-select/src/plugins/remove_button/plugin';\nimport { escape_html } from 'tom-select/src/utils';\nimport { IncompleteSelect } from './IncompleteSelect';\nimport template from 'lodash.template';\nimport { StyleHelpers } from './helpers';\nimport styles from 'sass:./DjangoSelectize.scss';\n\nTomSelect.define('remove_button', TomSelect_remove_button);\n\ntype Renderer = {\n\t[key:string]: (data:any, escape:typeof escape_html) => string | HTMLElement;\n}\n\nclass DjangoSelectize extends IncompleteSelect {\n\tprivate readonly numOptions: number = 12;\n\tprivate readonly tomInput: TomInput;\n\tprivate readonly tomSelect: TomSelect;\n\tprivate readonly shadowRoot: ShadowRoot;\n\tprivate readonly observer: MutationObserver;\n\tprivate readonly initialValue: string | string[];\n\n\tconstructor(tomInput: TomInput) {\n\t\tsuper(tomInput);\n\t\tthis.tomInput = tomInput;\n\t\t// @ts-ignore\n\t\tconst config: TomSettings = {\n\t\t\tcreate: false,\n\t\t\tvalueField: 'id',\n\t\t\tlabelField: 'label',\n\t\t\tmaxItems: 1,\n\t\t\tsearchField: ['label'],\n\t\t\trender: this.setupRender(tomInput),\n\t\t\tonFocus: this.touch,\n\t\t\tonBlur: this.blurred,\n\t\t\tonChange: this.changed,\n\t\t\tonType: this.inputted,\n\t\t};\n\t\tif (this.isIncomplete) {\n\t\t\tconfig.load = (query: string, callback: Function) => this.loadOptions(`query=${encodeURIComponent(query)}`, callback);\n\t\t}\n\t\tlet isMultiple = false;\n\t\tif (tomInput.hasAttribute('multiple')) {\n\t\t\tconfig.maxItems = parseInt(tomInput.getAttribute('max_items') ?? '3');\n\t\t\tconst translation = tomInput.parentElement?.querySelector('template.selectize-remove-item');\n\t\t\tif (translation) {\n\t\t\t\tconfig.plugins = {remove_button: {title: translation.innerHTML}};\n\t\t\t}\n\t\t\t// tom-select has some issues to initialize items using the original input element\n\t\t\tconst scriptId = `${tomInput.getAttribute('id')}_initial`;\n\t\t\tconfig.items = JSON.parse(document.getElementById(scriptId)?.textContent ?? '[]');\n\n\t\t\t// We want to use the CSS styles for <select> without multiple\n\t\t\ttomInput.removeAttribute('multiple');\n\t\t\tisMultiple = true;\n\t\t}\n\t\tconst nativeStyles = {...window.getComputedStyle(tomInput)} as CSSStyleDeclaration;\n\t\tif (isMultiple) {\n\t\t\t// revert the above\n\t\t\ttomInput.setAttribute('multiple', 'multiple');\n\t\t}\n\t\tthis.numOptions = parseInt(tomInput.getAttribute('options') ?? this.numOptions.toString());\n\t\tthis.tomSelect = new TomSelect(tomInput, config);\n\t\tthis.observer = new MutationObserver(this.attributesChanged);\n\t\tthis.observer.observe(this.tomInput, {attributes: true});\n\t\tthis.initialValue = this.tomSelect.getValue();\n\t\tthis.shadowRoot = this.wrapInShadowRoot();\n\t\tthis.transferStyles(tomInput, nativeStyles);\n\t\ttomInput.classList.add('dj-concealed');\n\t\tthis.validateInput(this.initialValue as string);\n\t\tthis.tomSelect.on('change', (value: String) => this.validateInput(value));\n\t}\n\n\tformResetted(event: Event) {\n\t\tthis.tomSelect.setValue(this.initialValue);\n\t}\n\n\tformSubmitted(event: Event) {}\n\n\tprivate wrapInShadowRoot() : ShadowRoot {\n\t\tconst shadowWrapper = document.createElement('div');\n\t\tshadowWrapper.classList.add('shadow-wrapper');\n\t\tconst shadowRoot = shadowWrapper.attachShadow({mode: 'open', delegatesFocus: true});\n\t\tconst shadowStyleElement = document.createElement('style');\n\t\tshadowRoot.appendChild(shadowStyleElement).textContent = styles;\n\t\tthis.tomInput.insertAdjacentElement('beforebegin', shadowWrapper);\n\t\tconst wrapper = (this.tomInput.parentElement as HTMLElement).removeChild(this.tomSelect.wrapper);\n\t\tshadowRoot.appendChild(wrapper);\n\t\treturn shadowRoot;\n\t}\n\n\tprivate blurred = () => {\n\t\tconst wrapper = this.shadowRoot.querySelector('.ts-wrapper');\n\t\twrapper?.classList.remove('dirty');\n\t}\n\n\tprivate changed = () => {\n\t\tthis.tomSelect.setTextboxValue('');\n\t\tif (this.tomSelect.dropdown_content.childElementCount <= 1) {\n\t\t\tthis.tomSelect.close();\n\t\t}\n\t}\n\n\tprivate inputted = (event: Event) => {\n\t\tconst value = event as unknown as string;\n\t\tconst wrapper = this.shadowRoot.querySelector('.ts-wrapper');\n\t\twrapper?.classList.toggle('dirty', value.length > 0);\n\t}\n\n\tprivate validateInput(value: String | Array<string>) {\n\t\tconst wrapper = this.shadowRoot.querySelector('.ts-wrapper');\n\t\twrapper?.classList.remove('dirty');\n\t\tconst selectElem = this.tomInput as HTMLSelectElement;\n\t\tif (this.tomSelect.isRequired) {\n\t\t\tselectElem.setCustomValidity(value ? \"\": \"Value is missing.\");\n\t\t}\n\t\tif (selectElem.multiple) {\n\t\t\tfor (let k = 0; k < selectElem.options.length; k++) {\n\t\t\t\tconst option = selectElem.options.item(k);\n\t\t\t\tif (option) {\n\t\t\t\t\toption.selected = value.indexOf(option.value) >= 0;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.tomInput.value = value as string;\n\t\t}\n\t}\n\n\tprivate transferStyles(tomInput: HTMLElement, nativeStyles: CSSStyleDeclaration) {\n\t\tconst wrapperStyle = (this.shadowRoot.host as HTMLElement).style;\n\t\twrapperStyle.setProperty('display', nativeStyles.display);\n\t\tconst lineHeight = window.getComputedStyle(tomInput).getPropertyValue('line-height');\n\t\tconst optionElement = tomInput.querySelector('option');\n\t\tconst sheet = this.shadowRoot.styleSheets.item(0);\n\t\tfor (let index = 0; sheet && index < sheet.cssRules.length; index++) {\n\t\t\tconst cssRule = sheet.cssRules.item(index) as CSSStyleRule;\n\t\t\tlet extraStyles: string;\n\t\t\tswitch (cssRule.selectorText) {\n\t\t\t\tcase '.ts-wrapper':\n\t\t\t\t\textraStyles = StyleHelpers.extractStyles(tomInput, [\n\t\t\t\t\t\t'font-family', 'font-size', 'font-strech', 'font-style', 'font-weight',\n\t\t\t\t\t\t'letter-spacing', 'white-space']);\n\t\t\t\t\tsheet.insertRule(`${cssRule.selectorText}{${extraStyles}}`, ++index);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '.ts-wrapper .ts-control':\n\t\t\t\t\textraStyles = StyleHelpers.extractStyles(tomInput, [\n\t\t\t\t\t\t'background-color', 'border', 'border-radius', 'box-shadow', 'color',\n\t\t\t\t\t\t'padding']).concat(`width: ${nativeStyles['width']}; min-height: ${nativeStyles['height']};`);\n\t\t\t\t\tsheet.insertRule(`${cssRule.selectorText}{${extraStyles}}`, ++index);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '.ts-wrapper .ts-control > input':\n\t\t\t\tcase '.ts-wrapper .ts-control > div':\n\t\t\t\t\tif (optionElement) {\n\t\t\t\t\t\textraStyles = StyleHelpers.extractStyles(optionElement, ['padding-left', 'padding-right']);\n\t\t\t\t\t\tsheet.insertRule(`${cssRule.selectorText}{${extraStyles}}`, ++index);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase '.ts-wrapper .ts-control > input::placeholder':\n\t\t\t\t\ttomInput.classList.add('-placeholder-');\n\t\t\t\t\textraStyles = StyleHelpers.extractStyles(tomInput, ['background-color', 'color'])\n\t\t\t\t\ttomInput.classList.remove('-placeholder-');\n\t\t\t\t\tsheet.insertRule(`${cssRule.selectorText}{${extraStyles}}`, ++index);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '.ts-wrapper.focus .ts-control':\n\t\t\t\t\ttomInput.style.transition = 'none';\n\t\t\t\t\ttomInput.classList.add('-focus-');\n\t\t\t\t\textraStyles = StyleHelpers.extractStyles(tomInput, [\n\t\t\t\t\t\t'background-color', 'border', 'box-shadow', 'color', 'outline', 'transition'])\n\t\t\t\t\ttomInput.classList.remove('-focus-');\n\t\t\t\t\tsheet.insertRule(`${cssRule.selectorText}{${extraStyles}}`, ++index);\n\t\t\t\t\ttomInput.style.transition = '';\n\t\t\t\t\tbreak;\n\t\t\t\tcase '.ts-wrapper.disabled .ts-control':\n\t\t\t\t\ttomInput.classList.add('-disabled-');\n\t\t\t\t\textraStyles = StyleHelpers.extractStyles(tomInput, [\n\t\t\t\t\t\t\t'background-color', 'border', 'box-shadow', 'color', 'opacity', 'outline', 'transition'])\n\t\t\t\t\ttomInput.classList.remove('-disabled-');\n\t\t\t\t\tsheet.insertRule(`${cssRule.selectorText}{${extraStyles}}`, ++index);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '.ts-wrapper .ts-dropdown':\n\t\t\t\t\textraStyles = StyleHelpers.extractStyles(tomInput, [\n\t\t\t\t\t\t'border-right', 'border-bottom', 'border-left', 'color', 'padding-left'])\n\t\t\t\t\t\t.concat(parseFloat(lineHeight) > 0 ? `line-height: calc(${lineHeight} * 1.2);` : 'line-height: 1.2em;');\n\t\t\t\t\tsheet.insertRule(`${cssRule.selectorText}{${extraStyles}}`, ++index);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '.ts-wrapper .ts-dropdown .ts-dropdown-content':\n\t\t\t\t\tif (parseFloat(lineHeight) > 0) {\n\t\t\t\t\t\textraStyles =  `max-height: calc(${lineHeight} * 1.2 * ${this.numOptions});`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\textraStyles =  `max-height: ${this.numOptions * 1.2}em;`;\n\t\t\t\t\t}\n\t\t\t\t\tsheet.insertRule(`${cssRule.selectorText}{${extraStyles}}`, ++index);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate setupRender(tomInput: TomInput) : Renderer {\n\t\tconst templ = tomInput.parentElement?.querySelector('template.select-no-results');\n\t\treturn templ ? {\n\t\t\tno_results: (data: any, escape: Function) => template(templ.innerHTML)(data),\n\t\t} : {};\n\t}\n\n\tprivate attributesChanged = (mutationsList: Array<MutationRecord>) => {\n\t\tfor (const mutation of mutationsList) {\n\t\t\tif (mutation.type === 'attributes' && mutation.attributeName === 'disabled') {\n\t\t\t\tif (this.tomInput.disabled) {\n\t\t\t\t\tif (!this.tomSelect.isDisabled) {\n\t\t\t\t\t\tthis.tomSelect.disable();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (this.tomSelect.isDisabled) {\n\t\t\t\t\t\tthis.tomSelect.enable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get value() : string | string[] {\n\t\treturn this.tomSelect.getValue();\n\t}\n}\n\nconst DS = Symbol('DjangoSelectize');\n\nexport class DjangoSelectizeElement extends HTMLSelectElement {\n\tprivate [DS]?: DjangoSelectize;  // hides internal implementation\n\n\tprivate connectedCallback() {\n\t\tthis[DS] = new DjangoSelectize(this);\n\t}\n\n\tpublic async getValue() {\n\t\treturn this[DS]?.value;\n\t}\n}\n", "export namespace StyleHelpers {\n\texport function extractStyles(element: Element, properties: Array<string>): string {\n\t\tlet styles = Array<string>();\n\t\tconst style = window.getComputedStyle(element);\n\t\tfor (let property of properties) {\n\t\t\tstyles.push(`${property}:${style.getPropertyValue(property)}`);\n\t\t}\n\t\treturn styles.join('; ').concat('; ');\n\t}\n\n\texport function convertPseudoClasses() : HTMLStyleElement {\n\t\t// Iterate over all style sheets, find most pseudo classes and add CSSRules with a\n\t\t// CSS selector where the pseudo class has been replaced by a real counterpart.\n\t\t// This is required, because browsers can not invoke `window.getComputedStyle(element)`\n\t\t// using pseudo classes.\n\t\t// With function `removeConvertedClasses()` the added CSSRules are removed again.\n\t\tconst numStyleSheets = document.styleSheets.length;\n\t\tconst styleElement = document.createElement('style');\n\t\tdocument.head.appendChild(styleElement);\n\t\tfor (let index = 0; index < numStyleSheets; index++) {\n\t\t\tconst sheet = document.styleSheets[index];\n\t\t\tfor (let k = 0; k < sheet.cssRules.length; k++) {\n\t\t\t\tconst cssRule = sheet.cssRules.item(k);\n\t\t\t\tif (cssRule) {\n\t\t\t\t\ttraverseStyles(cssRule, styleElement.sheet as CSSStyleSheet);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn styleElement;\n\t}\n\n\tfunction traverseStyles(cssRule: CSSRule, extraCSSStyleSheet: CSSStyleSheet) {\n\t\tif (cssRule instanceof CSSImportRule) {\n\t\t\tif (!cssRule.styleSheet)\n\t\t\t\treturn;\n\t\t\tfor (let subRule of cssRule.styleSheet.cssRules) {\n\t\t\t\ttraverseStyles(subRule, extraCSSStyleSheet);\n\t\t\t}\n\t\t} else if (cssRule instanceof CSSStyleRule) {\n\t\t\tif (!cssRule.selectorText)\n\t\t\t\treturn;\n\t\t\tconst newSelectorText = cssRule.selectorText.\n\t\t\t\treplaceAll(':focus', '.-focus-').\n\t\t\t\treplaceAll(':focus-visible', '.-focus-visible-').\n\t\t\t\treplaceAll(':hover', '.-hover-').\n\t\t\t\treplaceAll(':disabled', '.-disabled-').\n\t\t\t\treplaceAll(':invalid', '.-invalid-').\n\t\t\t\treplaceAll(':valid', '.-valid-').\n\t\t\t\treplaceAll('::placeholder-shown', '.-placeholder-shown').\n\t\t\t\treplaceAll(':placeholder-shown', '.-placeholder-shown').\n\t\t\t\treplaceAll('::placeholder', '.-placeholder-').\n\t\t\t\treplaceAll(':placeholder', '.-placeholder-');\n\t\t\tif (newSelectorText !== cssRule.selectorText) {\n\t\t\t\textraCSSStyleSheet.insertRule(`${newSelectorText}{${cssRule.style.cssText}}`);\n\t\t\t}\n\t\t} // else handle other CSSRule types\n\t}\n}\n", "import Sortable, { MultiDrag, SortableEvent } from 'sortablejs';\nimport styles from 'sass:./SortableSelect.scss';\nimport { StyleHelpers } from './helpers';\n\nSortable.mount(new MultiDrag());\n\n\nexport class SortableSelectElement extends HTMLElement {\n\tprivate readonly declaredStyles: HTMLStyleElement;\n\tprivate lastSelected: HTMLOptionElement | null = null;\n\n\tpublic constructor() {\n\t\tsuper();\n\t\tthis.declaredStyles = document.createElement('style');\n\t\tthis.declaredStyles.innerText = styles;\n\t\tdocument.head.appendChild(this.declaredStyles);\n\n\t\tthis.addEventListener('click', event => this.optionSelected(event));\n\t\twindow.addEventListener('click', event => this.elementFocus(event));\n\t}\n\n\tpublic initialize(selectElement: HTMLSelectElement) {\n\t\tthis.transferStyles(selectElement);\n\t\tSortable.create(this, {\n\t\t\tanimation: 150,\n\t\t\tfallbackOnBody: true,\n\t\t\tmultiDrag: true,\n\t\t\tonEnd: event => this.onEnd(event),\n\t\t});\n\t}\n\n\tprivate onEnd(event: SortableEvent) {\n\t\tthis.deselectAllOptions();\n\t\tconst sortedEvent = new Event('options-sorted', {\n\t\t\tbubbles: true,\n\t\t\tcancelable: true,\n\t\t\tcomposed: false\n\t\t});\n\t\tthis.dispatchEvent(sortedEvent);\n\t}\n\n\tprivate elementFocus(event: Event) {\n\t\tif (event.target instanceof HTMLElement && this.contains(event.target)) {\n\t\t\tthis.classList.add('focus');\n\t\t} else {\n\t\t\tthis.classList.remove('focus');\n\t\t}\n\t}\n\n\tprivate optionSelected(event: Event) {\n\t\tif (!(event.target instanceof HTMLOptionElement))\n\t\t\treturn;\n\t\tconst selectedOption = event.target;\n\t\tif (event instanceof PointerEvent && event.metaKey) {\n\t\t\tif (selectedOption.selected = !selectedOption.selected) {\n\t\t\t\tSortable.utils.select(selectedOption);\n\t\t\t} else {\n\t\t\t\tSortable.utils.deselect(selectedOption);\n\t\t\t}\n\t\t} else if (event instanceof PointerEvent && event.shiftKey && this.lastSelected) {\n\t\t\tthis.deselectAllOptions();\n\t\t\tlet setSeleted = false;\n\t\t\tfor (let option of this.getElementsByTagName('option')) {\n\t\t\t\tif (option === selectedOption || option === this.lastSelected) {\n\t\t\t\t\toption.selected = true;\n\t\t\t\t\tsetSeleted = !setSeleted;\n\t\t\t\t} else {\n\t\t\t\t\toption.selected = setSeleted;\n\t\t\t\t}\n\t\t\t\tif (option.selected) {\n\t\t\t\t\tSortable.utils.select(option);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.deselectAllOptions();\n\t\t\tselectedOption.selected = true;\n\t\t\tSortable.utils.select(selectedOption);\n\t\t}\n\t\tthis.lastSelected = selectedOption;\n\t\tevent.preventDefault();\n\t}\n\n\tprivate deselectAllOptions() {\n\t\tfor (let option of this.getElementsByTagName('option')) {\n\t\t\toption.selected = false;\n\t\t\tSortable.utils.deselect(option);\n\t\t}\n\t}\n\n\tprivate transferStyles(selectElement: HTMLSelectElement) {\n\t\tconst sheet = this.declaredStyles.sheet;\n\t\tconst optionElement = selectElement.querySelector('option');\n\t\tfor (let index = 0; sheet && index < sheet.cssRules.length; index++) {\n\t\t\tconst cssRule = sheet.cssRules.item(index) as CSSStyleRule;\n\t\t\tlet extraStyles: string;\n\t\t\tswitch (cssRule.selectorText) {\n\t\t\t\tcase 'django-sortable-select':\n\t\t\t\t\textraStyles = StyleHelpers.extractStyles(selectElement, [\n\t\t\t\t\t\t'display', 'width', 'height', 'border', 'box-shadow', 'outline', 'overflow',\n\t\t\t\t\t\t'font-family', 'font-size', 'font-strech', 'font-style', 'font-weight',\n\t\t\t\t\t\t'letter-spacing', 'white-space', 'line-height']);\n\t\t\t\t\tsheet.insertRule(`${cssRule.selectorText}{${extraStyles}}`, ++index);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'django-sortable-select.focus':\n\t\t\t\t\tselectElement.style.transition = 'none';\n\t\t\t\t\tselectElement.focus();\n\t\t\t\t\textraStyles = StyleHelpers.extractStyles(selectElement, [\n\t\t\t\t\t\t'border', 'box-shadow', 'outline']);\n\t\t\t\t\tselectElement.blur();\n\t\t\t\t\tsheet.insertRule(`${cssRule.selectorText}{${extraStyles}}`, ++index);\n\t\t\t\t\tselectElement.style.transition = '';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'django-sortable-select > option.sortable-chosen, django-sortable-select > option.sortable-selected':\n\t\t\t\t\tif (optionElement) {\n\t\t\t\t\t\toptionElement.selected = true;\n\t\t\t\t\t\textraStyles = StyleHelpers.extractStyles(optionElement, [\n\t\t\t\t\t\t\t'color', 'background-color']);\n\t\t\t\t\t\tsheet.insertRule(`${cssRule.selectorText}{${extraStyles}}`, ++index);\n\t\t\t\t\t\toptionElement.selected = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'django-sortable-select.focus > option.sortable-chosen, django-sortable-select.focus > option.sortable-selected':\n\t\t\t\t\tselectElement.focus();\n\t\t\t\t\tif (optionElement) {\n\t\t\t\t\t\toptionElement.selected = true;\n\t\t\t\t\t\textraStyles = StyleHelpers.extractStyles(optionElement, [\n\t\t\t\t\t\t\t'color', 'background-color']);\n\t\t\t\t\t\tsheet.insertRule(`${cssRule.selectorText}{${extraStyles}}`, ++index);\n\t\t\t\t\t\toptionElement.selected = false;\n\t\t\t\t\t}\n\t\t\t\t\tselectElement.blur();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic add(option: HTMLOptionElement) {\n\t\tthis.appendChild(option);\n\t\tSortable.utils.select(option);\n\t}\n}\n", "import { IncompleteSelect } from './IncompleteSelect';\nimport { SortableSelectElement } from './SortableSelect';\nimport template from 'lodash.template';\n\n\nexport class DualSelector extends IncompleteSelect {\n\tprivate readonly selectorElement: HTMLSelectElement;\n\tprivate readonly containerElement: HTMLElement | null;\n\tprivate readonly searchLeftInput?: HTMLInputElement;\n\tprivate readonly searchRightInput?: HTMLInputElement;\n\tprivate readonly selectLeftElement: HTMLSelectElement;\n\tprivate readonly selectRightElement: HTMLSelectElement | SortableSelectElement;\n\tprivate readonly moveAllRightButton: HTMLButtonElement;\n\tprivate readonly moveSelectedRightButton: HTMLButtonElement;\n\tprivate readonly moveAllLeftButton: HTMLButtonElement;\n\tprivate readonly moveSelectedLeftButton: HTMLButtonElement;\n\tprivate readonly undoButton?: HTMLButtonElement;\n\tprivate readonly redoButton?: HTMLButtonElement;\n\tprivate historicalValues: string[][] = [];\n\tprivate historyCursor: number = 0;\n\tprivate lastRemoteQuery?: string;\n\tprivate readonly renderNoResults: Function;\n\n\tconstructor(selectorElement: HTMLSelectElement, name: string) {\n\t\tsuper(selectorElement);\n\t\tthis.selectorElement = selectorElement;\n\t\tthis.containerElement = this.fieldGroup.querySelector('.dj-dual-selector');\n\t\tselectorElement.setAttribute('multiple', 'multiple');\n\t\tconst inputs = this.fieldGroup.querySelectorAll('input[type=\"text\"]');\n\t\tif (inputs.length === 2) {\n\t\t\tthis.searchLeftInput = inputs[0] as HTMLInputElement;\n\t\t\tthis.searchRightInput = inputs[1] as HTMLInputElement;\n\t\t\tthis.searchLeftInput.addEventListener('input', evt => this.leftLookup());\n\t\t\tthis.searchRightInput.addEventListener('input', evt => this.rightLookup());\n\t\t}\n\t\tconst selectors = this.fieldGroup.querySelectorAll(`select:not([is=\"${name}\"])`);\n\t\tif (selectors.length >= 1) {\n\t\t\tthis.selectLeftElement = selectors.item(0) as HTMLSelectElement;\n\t\t\tif (selectors.length === 2) {\n\t\t\t\tthis.selectRightElement = selectors.item(1) as HTMLSelectElement;\n\t\t\t} else {\n\t\t\t\tconst selector = this.fieldGroup.querySelector('django-sortable-select');\n\t\t\t\tthis.selectRightElement = selector as SortableSelectElement;\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error(`<select is=\"${name}\"> requires two <select>-elements`);\n\t\t}\n\t\tthis.moveAllRightButton = this.fieldGroup.querySelector('button.dj-move-all-right') as HTMLButtonElement;\n\t\tthis.moveSelectedRightButton = this.fieldGroup.querySelector('button.dj-move-selected-right') as HTMLButtonElement;\n\t\tthis.moveSelectedLeftButton = this.fieldGroup.querySelector('button.dj-move-selected-left') as HTMLButtonElement;\n\t\tthis.moveAllLeftButton = this.fieldGroup.querySelector('button.dj-move-all-left') as HTMLButtonElement;\n\t\tthis.undoButton = this.fieldGroup.querySelector('button.dj-undo-selected') as HTMLButtonElement;\n\t\tthis.redoButton = this.fieldGroup.querySelector('button.dj-redo-selected') as HTMLButtonElement;\n\t\tthis.selectorElement.classList.add('dj-concealed');\n\t\tconst templ = selectorElement.parentElement?.querySelector('template.select-no-results');\n\t\tthis.renderNoResults = (data: any) => templ ? template(templ.innerHTML)(data) : \"No results\";\n\t\tthis.installEventHandlers();\n\t\tthis.initialize();\n\t\tthis.setButtonsState();\n\t}\n\n\tprivate installEventHandlers() {\n\t\tthis.selectLeftElement.addEventListener('focus', this.touch);\n\t\tthis.selectLeftElement.addEventListener('dblclick', evt => this.moveOptionRight(evt.target));\n\t\tthis.selectLeftElement.addEventListener('scroll', evt => this.selectLeftScrolled());\n\t\tthis.selectRightElement.addEventListener('focus', this.touch);\n\t\tthis.selectRightElement.addEventListener('dblclick', evt => this.moveOptionLeft(evt.target));\n\t\tthis.selectRightElement.addEventListener('options-sorted', evt => this.optionsSorted());\n\t\tthis.moveAllRightButton?.addEventListener('click', evt => this.moveAllOptionsRight());\n\t\tthis.moveSelectedRightButton?.addEventListener('click', evt => this.moveSelectedOptionsRight());\n\t\tthis.moveSelectedLeftButton?.addEventListener('click', evt => this.moveSelectedOptionsLeft());\n\t\tthis.moveAllLeftButton?.addEventListener('click', evt => this.moveAllOptionsLeft());\n\t\tthis.undoButton?.addEventListener('click', evt => this.unOrRedo(-1));\n\t\tthis.redoButton?.addEventListener('click', evt => this.unOrRedo(+1));\n\t}\n\n\tprivate getOptions(selectElement: HTMLSelectElement | SortableSelectElement) : Array<HTMLOptionElement> {\n\t\treturn Array.from(selectElement.getElementsByTagName('option'));\n\t}\n\n\tprivate initialize() {\n\t\tconst initialValues: string[] = [];\n\t\tfor (let option of this.getOptions(this.selectorElement)) {\n\t\t\tconst clone = option.cloneNode() as HTMLOptionElement;\n\t\t\tif (option.selected) {\n\t\t\t\toption.selected = false;\n\t\t\t\tthis.selectRightElement.add(option);\n\t\t\t\tinitialValues.push(option.value);\n\t\t\t} else {\n\t\t\t\tthis.selectLeftElement.add(option);\n\t\t\t}\n\t\t\tthis.selectorElement.add(clone);  // add clone without inner text\n\t\t}\n\t\tthis.historicalValues.push(initialValues);\n\t\tthis.setHistoryCursor(0);\n\t\tif (this.selectRightElement instanceof SortableSelectElement) {\n\t\t\tthis.selectRightElement.initialize(this.selectLeftElement);\n\t\t}\n\t}\n\n\tprivate addNoResultsOption(selectElement: HTMLSelectElement | SortableSelectElement, query: string) {\n\t\tconst option = new Option(this.renderNoResults({input: query}));\n\t\toption.disabled = true;\n\t\tselectElement.add(option);\n\t}\n\n\tprivate prepareOptions(selectElement: HTMLSelectElement | SortableSelectElement) : Array<HTMLOptionElement> {\n\t\tconst options = this.getOptions(selectElement);\n\t\toptions.filter(o => o.disabled).forEach(o => o.remove());\n\t\treturn options;\n\t}\n\n\tprivate addMoreOptions(items: Array<any>) {\n\t\tconst selectorOptions = this.getOptions(this.selectorElement);\n\t\tfor (let item of items) {\n\t\t\tif (selectorOptions.filter(o => o.value == item.id).length === 0) {\n\t\t\t\tconst option = new Option(item.label, item.id);\n\t\t\t\tthis.selectorElement.add(option.cloneNode() as HTMLOptionElement);\n\t\t\t\tthis.selectLeftElement.add(option);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async selectLeftScrolled() {\n\t\tif (!this.isIncomplete)\n\t\t\treturn;\n\t\tconst selectLeftScroll = this.selectLeftElement.scrollHeight - this.selectLeftElement.scrollTop;\n\t\tif (selectLeftScroll <= this.selectLeftElement.offsetHeight) {\n\t\t\t// triggers whenever the last <option>-element becomes visible inside its parent <select>\n\t\t\tawait this.remoteLookup();\n\t\t}\n\t}\n\n\tprivate async remoteLookup() {\n\t\tlet query: string;\n\t\tconst searchString = this.searchLeftInput?.value;\n\t\tif (searchString) {\n\t\t\tconst offset = this.getOptions(this.selectLeftElement).filter(o => !o.hidden).length;\n\t\t\tquery = `query=${searchString}&offset=${offset}`;\n\t\t} else {\n\t\t\tquery = `offset=${this.selectorElement.childElementCount}`;\n\t\t}\n\t\tif (this.lastRemoteQuery === query)\n\t\t\treturn;\n\t\tthis.lastRemoteQuery = query;\n\t\tawait this.loadOptions(query, (items: Array<any>) => {\n\t\t\tthis.addMoreOptions(items);\n\t\t});\n\t}\n\n\tprivate selectorChanged() {\n\t\tconst rightOptions = this.getOptions(this.selectRightElement);\n\t\tconst selectorOptions = this.getOptions(this.selectorElement);\n\t\tfor (let option of selectorOptions) {\n\t\t\toption.selected = rightOptions.filter(o => o.value === option.value).length === 1;\n\t\t}\n\t\tthis.setButtonsState();\n\t\tthis.containerElement?.classList.toggle('invalid', !this.selectorElement.checkValidity());\n\t\tthis.selectorElement.dispatchEvent(new Event('change'));\n\t}\n\n\tprivate setButtonsState() {\n\t\tlet disabled = this.getOptions(this.selectLeftElement).filter(o => !o.hidden).length === 0;\n\t\tthis.moveAllRightButton.disabled = disabled;\n\t\tthis.moveSelectedRightButton.disabled = disabled;\n\t\tdisabled = this.getOptions(this.selectRightElement).filter(o => !o.hidden).length === 0;\n\t\tthis.moveAllLeftButton.disabled = disabled;\n\t\tthis.moveSelectedLeftButton.disabled = disabled;\n\t}\n\n\tprivate clearSearchFields() {\n\t\tif (this.searchLeftInput) {\n\t\t\tthis.searchLeftInput.value = '';\n\t\t}\n\t\tif (this.searchRightInput) {\n\t\t\tthis.searchRightInput.value = '';\n\t\t}\n\t\tthis.prepareOptions(this.selectLeftElement).forEach(o => o.hidden = false);\n\t\tthis.prepareOptions(this.selectRightElement).forEach(o => o.hidden = false);\n\t}\n\n\tprivate optionsMoved() {\n\t\tconst rightOptions = this.getOptions(this.selectRightElement);\n\t\tthis.historicalValues.splice(this.historyCursor + 1);\n\t\tthis.historicalValues.push(rightOptions.map(o => o.value));\n\t\tthis.setHistoryCursor(this.historicalValues.length - 1);\n\t\tthis.selectorChanged();\n\t}\n\n\tprivate optionsSorted() {\n\t\tthis.getOptions(this.selectorElement).filter(o => o.selected).forEach(o => o.remove());\n\t\tthis.getOptions(this.selectRightElement).forEach(o => {\n\t\t\tconst clone = o.cloneNode() as HTMLOptionElement;\n\t\t\tclone.selected = true;\n\t\t\tthis.selectorElement.add(clone);\n\t\t});\n\t\tthis.optionsMoved();\n\t}\n\n\tprivate async moveOptionRight(target: EventTarget | null) {\n\t\tif (target instanceof HTMLOptionElement) {\n\t\t\tthis.selectRightElement.add(target);\n\t\t\tawait this.selectLeftScrolled();\n\t\t\tthis.optionsMoved();\n\t\t}\n\t}\n\n\tprivate async moveAllOptionsRight() {\n\t\tthis.getOptions(this.selectLeftElement).filter(o => !o.hidden).forEach(o => this.selectRightElement.add(o));\n\t\tthis.clearSearchFields();\n\t\tawait this.selectLeftScrolled();\n\t\tthis.optionsMoved();\n\t}\n\n\tprivate moveSelectedOptionsRight() {\n\t\tthis.getOptions(this.selectLeftElement).filter(o => o.selected).forEach(o => this.selectRightElement.add(o));\n\t\tthis.optionsMoved();\n\t}\n\n\tprivate moveSelectedOptionsLeft() {\n\t\tthis.getOptions(this.selectRightElement).filter(o => o.selected).forEach(o => this.selectLeftElement.add(o));\n\t\tthis.optionsMoved();\n\t}\n\n\tprivate moveAllOptionsLeft() {\n\t\tthis.getOptions(this.selectRightElement).filter(o => !o.hidden).forEach(o => this.selectLeftElement.add(o));\n\t\tthis.clearSearchFields();\n\t\tthis.optionsMoved();\n\t}\n\n\tprivate moveOptionLeft(target: EventTarget | null) {\n\t\tif (target instanceof HTMLOptionElement) {\n\t\t\tthis.selectLeftElement.add(target);\n\t\t\tthis.optionsMoved();\n\t\t}\n\t}\n\n\tprivate async leftLookup() {\n\t\tconst query = this.searchLeftInput?.value ?? '';\n\t\tlet numFoundOptions = this.lookup(this.prepareOptions(this.selectLeftElement), query);\n\t\t// first we lookup for matching options ...\n\t\tif (this.isIncomplete && numFoundOptions < this.selectLeftElement.size) {\n\t\t\t// if we find less options than the <select> element can depict,\n\t\t\t// query for additional matching options from the server.\n\t\t\tawait this.remoteLookup();\n\t\t\tnumFoundOptions = this.lookup(this.getOptions(this.selectLeftElement), query);\n\t\t}\n\t\tthis.setButtonsState();\n\t\tif (numFoundOptions === 0) {\n\t\t\tthis.addNoResultsOption(this.selectLeftElement, query);\n\t\t}\n\t}\n\n\tprivate rightLookup() {\n\t\tconst query = this.searchRightInput?.value ?? '';\n\t\tif (this.lookup(this.prepareOptions(this.selectRightElement), query) === 0) {\n\t\t\tthis.addNoResultsOption(this.selectRightElement, query);\n\t\t}\n\t}\n\n\tprivate lookup(options: Array<HTMLOptionElement>, query: string) : number {\n\t\tif (query) {\n\t\t\tquery = query.toLowerCase();\n\t\t\toptions.forEach(o => o.hidden = o.text.toLowerCase().indexOf(query) === -1);\n\t\t\treturn options.length - options.filter(o => o.hidden).length;\n\t\t}\n\t\toptions.forEach(o => o.hidden = false);\n\t\treturn options.length;\n\t}\n\n\tprivate unOrRedo(direction: number) {\n\t\tthis.clearSearchFields();\n\t\tconst nextCursor = this.historyCursor + direction;\n\t\tif (nextCursor < 0 || nextCursor >= this.historicalValues.length)\n\t\t\treturn;\n\t\tconst nextValues = this.historicalValues[nextCursor];\n\t\tthis.getOptions(this.selectRightElement).filter(o => nextValues.indexOf(o.value) === -1).forEach(o => this.selectLeftElement.add(o));\n\t\tthis.getOptions(this.selectLeftElement).filter(o => nextValues.indexOf(o.value) !== -1).forEach(o => this.selectRightElement.add(o));\n\t\tif (this.selectRightElement.tagName === 'DJANGO-SORTABLE-SELECT') {\n\t\t\tnextValues.forEach(val => {\n\t\t\t\tconst optionElem = this.selectRightElement.querySelector(`option[value=\"${val}\"]`);\n\t\t\t\tif (optionElem) {\n\t\t\t\t\tthis.selectRightElement.insertAdjacentElement('beforeend', optionElem);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.optionsSorted();\n\t\t}\n\t\tthis.setHistoryCursor(nextCursor);\n\t\tthis.selectorChanged();\n\t}\n\n\tprivate setHistoryCursor(historyCursor: number) {\n\t\tthis.historyCursor = historyCursor;\n\t\tif (this.undoButton) {\n\t\t\tthis.undoButton.disabled = historyCursor === 0;\n\t\t}\n\t\tif (this.redoButton) {\n\t\t\tthis.redoButton.disabled = historyCursor === this.historicalValues.length - 1;\n\t\t}\n\t}\n\n\tpublic formResetted(event: Event) {\n\t\tthis.clearSearchFields();\n\t\tconst initialValues = this.historicalValues[0];\n\t\tthis.historicalValues.splice(1);\n\t\tthis.setHistoryCursor(0);\n\t\tthis.getOptions(this.selectRightElement).filter(o => initialValues.indexOf(o.value) === -1).forEach(o => this.selectLeftElement.add(o));\n\t\tthis.getOptions(this.selectLeftElement).filter(o => initialValues.indexOf(o.value) !== -1).forEach(o => this.selectRightElement.add(o));\n\t\tthis.selectorChanged();\n\t}\n\n\tpublic formSubmitted(event: Event) {\n\t\tthis.clearSearchFields();\n\t\tthis.historicalValues.splice(0, this.historicalValues.length - 1);\n\t\tthis.setHistoryCursor(0);\n\t}\n\n\tpublic getValue() : string[] {\n\t\treturn this.getOptions(this.selectorElement).filter(o => o.selected).map(o => o.value);\n\t}\n}\n\nconst DS = Symbol('DualSelectorElement');\n\nexport class DualSelectorElement extends HTMLSelectElement {\n\tprivate [DS]?: DualSelector;  // hides internal implementation\n\n\tconnectedCallback() {\n\t\tthis[DS] = new DualSelector(this, 'django-dual-selector');\n\t}\n\n\tpublic get value() : any {\n\t\treturn this[DS]?.getValue();\n\t}\n}\n", "import { DjangoFormsetElement } from \"./django-formset/DjangoFormset\";\nimport { DjangoSelectizeElement } from \"./django-formset/DjangoSelectize\";\nimport { DualSelectorElement } from \"./django-formset/DualSelector\";\nimport { SortableSelectElement } from \"./django-formset/SortableSelect\";\nimport { StyleHelpers } from './django-formset/helpers';\n\nwindow.addEventListener('load', (event) => {\n\tconst pseudoStylesElement = StyleHelpers.convertPseudoClasses();\n\twindow.customElements.define('django-selectize', DjangoSelectizeElement, {extends: 'select'});\n\twindow.customElements.define('django-sortable-select', SortableSelectElement);\n\twindow.customElements.define('django-dual-selector', DualSelectorElement, {extends: 'select'});\n\twindow.customElements.define('django-formset', DjangoFormsetElement);\n\tpseudoStylesElement.remove();\n});\n"],
  "mappings": "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",
  "names": []
}
