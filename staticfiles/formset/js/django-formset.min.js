(()=>{var e=Object.create,t=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,r=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(e,o,i)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i,c=(e,t)=>{for(var o in t||(t={}))s.call(t,o)&&a(e,o,t[o]);if(n)for(var o of n(t))l.call(t,o)&&a(e,o,t[o]);return e},d=(e,t)=>function(){return t||(0,e[Object.keys(e)[0]])((t={exports:{}}).exports,t),t.exports},u=n=>{return((e,n,r)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let l of i(n))s.call(e,l)||"default"===l||t(e,l,{get:()=>n[l],enumerable:!(r=o(n,l))||r.enumerable});return e})((l=t(null!=n?e(r(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0}),t(l,"__esModule",{value:!0})),n);var l},h=d({"node_modules/lodash.get/index.js"(e,t){var o="__lodash_hash_undefined__",i="[object Function]",n="[object GeneratorFunction]",r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,l=/^\./,a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,d=/^\[object .+?Constructor\]$/,u="object"==typeof global&&global&&global.Object===Object&&global,h="object"==typeof self&&self&&self.Object===Object&&self,p=u||h||Function("return this")();var f,g=Array.prototype,m=Function.prototype,v=Object.prototype,b=p["__core-js_shared__"],y=(f=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",w=m.toString,j=v.hasOwnProperty,E=v.toString,x=RegExp("^"+w.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=p.Symbol,S=g.splice,O=P(p,"Map"),C=P(Object,"create"),k=_?_.prototype:void 0,A=k?k.toString:void 0;function L(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var i=e[t];this.set(i[0],i[1])}}function I(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var i=e[t];this.set(i[0],i[1])}}function T(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var i=e[t];this.set(i[0],i[1])}}function D(e,t){for(var o,i,n=e.length;n--;)if((o=e[n][0])===(i=t)||o!=o&&i!=i)return n;return-1}function F(e,t){var o;t=function(e,t){if(V(e))return!1;var o=typeof e;if("number"==o||"symbol"==o||"boolean"==o||null==e||q(e))return!0;return s.test(e)||!r.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:V(o=t)?o:M(o);for(var i=0,n=t.length;null!=e&&i<n;)e=e[N(t[i++])];return i&&i==n?e:void 0}function $(e){if(!H(e)||(t=e,y&&y in t))return!1;var t,o=function(e){var t=H(e)?E.call(e):"";return t==i||t==n}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?x:d;return o.test(function(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function R(e,t){var o,i,n=e.__data__;return("string"==(i=typeof(o=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==o:null===o)?n["string"==typeof t?"string":"hash"]:n.map}function P(e,t){var o=function(e,t){return null==e?void 0:e[t]}(e,t);return $(o)?o:void 0}L.prototype.clear=function(){this.__data__=C?C(null):{}},L.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},L.prototype.get=function(e){var t=this.__data__;if(C){var i=t[e];return i===o?void 0:i}return j.call(t,e)?t[e]:void 0},L.prototype.has=function(e){var t=this.__data__;return C?void 0!==t[e]:j.call(t,e)},L.prototype.set=function(e,t){return this.__data__[e]=C&&void 0===t?o:t,this},I.prototype.clear=function(){this.__data__=[]},I.prototype.delete=function(e){var t=this.__data__,o=D(t,e);return!(o<0)&&(o==t.length-1?t.pop():S.call(t,o,1),!0)},I.prototype.get=function(e){var t=this.__data__,o=D(t,e);return o<0?void 0:t[o][1]},I.prototype.has=function(e){return D(this.__data__,e)>-1},I.prototype.set=function(e,t){var o=this.__data__,i=D(o,e);return i<0?o.push([e,t]):o[i][1]=t,this},T.prototype.clear=function(){this.__data__={hash:new L,map:new(O||I),string:new L}},T.prototype.delete=function(e){return R(this,e).delete(e)},T.prototype.get=function(e){return R(this,e).get(e)},T.prototype.has=function(e){return R(this,e).has(e)},T.prototype.set=function(e,t){return R(this,e).set(e,t),this};var M=B((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(q(e))return A?A.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var o=[];return l.test(e)&&o.push(""),e.replace(a,(function(e,t,i,n){o.push(i?n.replace(c,"$1"):t||e)})),o}));function N(e){if("string"==typeof e||q(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function B(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var o=function(){var i=arguments,n=t?t.apply(this,i):i[0],r=o.cache;if(r.has(n))return r.get(n);var s=e.apply(this,i);return o.cache=r.set(n,s),s};return o.cache=new(B.Cache||T),o}B.Cache=T;var V=Array.isArray;function H(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function q(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==E.call(e)}t.exports=function(e,t,o){var i=null==e?void 0:F(e,t);return void 0===i?o:i}}}),p=d({"node_modules/lodash.set/index.js"(e,t){var o="__lodash_hash_undefined__",i="[object Function]",n="[object GeneratorFunction]",r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,l=/^\./,a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,d=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,h="object"==typeof global&&global&&global.Object===Object&&global,p="object"==typeof self&&self&&self.Object===Object&&self,f=h||p||Function("return this")();var g,m=Array.prototype,v=Function.prototype,b=Object.prototype,y=f["__core-js_shared__"],w=(g=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",j=v.toString,E=b.hasOwnProperty,x=b.toString,_=RegExp("^"+j.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=f.Symbol,O=m.splice,C=N(f,"Map"),k=N(Object,"create"),A=S?S.prototype:void 0,L=A?A.toString:void 0;function I(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var i=e[t];this.set(i[0],i[1])}}function T(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var i=e[t];this.set(i[0],i[1])}}function D(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var i=e[t];this.set(i[0],i[1])}}function F(e,t,o){var i=e[t];E.call(e,t)&&z(i,o)&&(void 0!==o||t in e)||(e[t]=o)}function $(e,t){for(var o=e.length;o--;)if(z(e[o][0],t))return o;return-1}function R(e){if(!X(e)||(t=e,w&&w in t))return!1;var t,o=function(e){var t=X(e)?x.call(e):"";return t==i||t==n}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?_:d;return o.test(function(e){if(null!=e){try{return j.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function P(e,t,o,i){if(!X(e))return e;t=function(e,t){if(G(e))return!1;var o=typeof e;if("number"==o||"symbol"==o||"boolean"==o||null==e||U(e))return!0;return s.test(e)||!r.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return G(e)?e:V(e)}(t);for(var n=-1,l=t.length,a=l-1,c=e;null!=c&&++n<l;){var d=H(t[n]),u=o;if(n!=a){var h=c[d];void 0===(u=i?i(h,d,c):void 0)&&(u=X(h)?h:B(t[n+1])?[]:{})}F(c,d,u),c=c[d]}return e}function M(e,t){var o,i,n=e.__data__;return("string"==(i=typeof(o=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==o:null===o)?n["string"==typeof t?"string":"hash"]:n.map}function N(e,t){var o=function(e,t){return null==e?void 0:e[t]}(e,t);return R(o)?o:void 0}function B(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}I.prototype.clear=function(){this.__data__=k?k(null):{}},I.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},I.prototype.get=function(e){var t=this.__data__;if(k){var i=t[e];return i===o?void 0:i}return E.call(t,e)?t[e]:void 0},I.prototype.has=function(e){var t=this.__data__;return k?void 0!==t[e]:E.call(t,e)},I.prototype.set=function(e,t){return this.__data__[e]=k&&void 0===t?o:t,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(e){var t=this.__data__,o=$(t,e);return!(o<0)&&(o==t.length-1?t.pop():O.call(t,o,1),!0)},T.prototype.get=function(e){var t=this.__data__,o=$(t,e);return o<0?void 0:t[o][1]},T.prototype.has=function(e){return $(this.__data__,e)>-1},T.prototype.set=function(e,t){var o=this.__data__,i=$(o,e);return i<0?o.push([e,t]):o[i][1]=t,this},D.prototype.clear=function(){this.__data__={hash:new I,map:new(C||T),string:new I}},D.prototype.delete=function(e){return M(this,e).delete(e)},D.prototype.get=function(e){return M(this,e).get(e)},D.prototype.has=function(e){return M(this,e).has(e)},D.prototype.set=function(e,t){return M(this,e).set(e,t),this};var V=q((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(U(e))return L?L.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var o=[];return l.test(e)&&o.push(""),e.replace(a,(function(e,t,i,n){o.push(i?n.replace(c,"$1"):t||e)})),o}));function H(e){if("string"==typeof e||U(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function q(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var o=function(){var i=arguments,n=t?t.apply(this,i):i[0],r=o.cache;if(r.has(n))return r.get(n);var s=e.apply(this,i);return o.cache=r.set(n,s),s};return o.cache=new(q.Cache||D),o}function z(e,t){return e===t||e!=e&&t!=t}q.Cache=D;var G=Array.isArray;function X(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function U(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==x.call(e)}t.exports=function(e,t,o){return null==e?e:P(e,t,o)}}}),f=d({"node_modules/lodash._reinterpolate/index.js"(e,t){t.exports=/<%=([\s\S]+?)%>/g}}),g=d({"node_modules/lodash.templatesettings/index.js"(e,t){var o=f(),i="[object Symbol]",n=/[&<>"']/g,r=RegExp(n.source),s="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,a=s||l||Function("return this")();var c,d=(c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(e){return null==c?void 0:c[e]}),u=Object.prototype,h=u.hasOwnProperty,p=u.toString,g=a.Symbol,m=g?g.toStringTag:void 0,v=g?g.prototype:void 0,b=v?v.toString:void 0,y={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:o,variable:"",imports:{_:{escape:function(e){return(e=x(e))&&r.test(e)?e.replace(n,d):e}}}};function w(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":m&&m in Object(e)?function(e){var t=h.call(e,m),o=e[m];try{e[m]=void 0;var i=!0}catch(e){}var n=p.call(e);i&&(t?e[m]=o:delete e[m]);return n}(e):function(e){return p.call(e)}(e)}function j(e){if("string"==typeof e)return e;if(E(e))return function(e,t){for(var o=-1,i=null==e?0:e.length,n=Array(i);++o<i;)n[o]=t(e[o],o,e);return n}(e,j)+"";if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&w(e)==i}(e))return b?b.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var E=Array.isArray;function x(e){return null==e?"":j(e)}t.exports=y}}),m=d({"node_modules/lodash.template/index.js"(e,t){var o=f(),i=g(),n=9007199254740991,r="[object Arguments]",s="[object Error]",l="[object Function]",a="[object Object]",c="[object Symbol]",d=/\b__p \+= '';/g,u=/\b(__p \+=) '' \+/g,h=/(__e\(.*?\)|\b__t\)) \+\n'';/g,p=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,m=/^\[object .+?Constructor\]$/,v=/^(?:0|[1-9]\d*)$/,b=/($^)/,y=/['\n\r\u2028\u2029\\]/g,w={};w["[object Float32Array]"]=w["[object Float64Array]"]=w["[object Int8Array]"]=w["[object Int16Array]"]=w["[object Int32Array]"]=w["[object Uint8Array]"]=w["[object Uint8ClampedArray]"]=w["[object Uint16Array]"]=w["[object Uint32Array]"]=!0,w[r]=w["[object Array]"]=w["[object ArrayBuffer]"]=w["[object Boolean]"]=w["[object DataView]"]=w["[object Date]"]=w[s]=w[l]=w["[object Map]"]=w["[object Number]"]=w[a]=w["[object RegExp]"]=w["[object Set]"]=w["[object String]"]=w["[object WeakMap]"]=!1;var j={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},E="object"==typeof global&&global&&global.Object===Object&&global,x="object"==typeof self&&self&&self.Object===Object&&self,_=E||x||Function("return this")(),S="object"==typeof e&&e&&!e.nodeType&&e,O=S&&"object"==typeof t&&t&&!t.nodeType&&t,C=O&&O.exports===S,k=C&&E.process,A=function(){try{var e=O&&O.require&&O.require("util").types;return e||k&&k.binding&&k.binding("util")}catch(e){}}(),L=A&&A.isTypedArray;function I(e,t,o){switch(o.length){case 0:return e.call(t);case 1:return e.call(t,o[0]);case 2:return e.call(t,o[0],o[1]);case 3:return e.call(t,o[0],o[1],o[2])}return e.apply(t,o)}function T(e,t){for(var o=-1,i=null==e?0:e.length,n=Array(i);++o<i;)n[o]=t(e[o],o,e);return n}function D(e){return"\\"+j[e]}function F(e,t){return function(o){return e(t(o))}}var $,R=Function.prototype,P=Object.prototype,M=_["__core-js_shared__"],N=R.toString,B=P.hasOwnProperty,V=($=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"",H=P.toString,q=N.call(Object),z=RegExp("^"+N.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=C?_.Buffer:void 0,X=_.Symbol,U=F(Object.getPrototypeOf,Object),Y=P.propertyIsEnumerable,K=X?X.toStringTag:void 0,W=function(){try{var e=function(e){return!(!ke(e)||function(e){return!!V&&V in e}(e))&&(Oe(e)?z:m).test(function(e){if(null!=e){try{return N.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(t=function(e,t){return null==e?void 0:e[t]}(Object,"defineProperty"))?t:void 0;return e({},"",{}),e}catch(e){}var t}(),Q=G?G.isBuffer:void 0,J=F(Object.keys,Object),Z=Math.max,ee=Date.now,te=X?X.prototype:void 0,oe=te?te.toString:void 0;function ie(e,t){var o=Ee(e),i=!o&&je(e),n=!o&&!i&&_e(e),r=!o&&!i&&!n&&Le(e),s=o||i||n||r,l=s?function(e,t){for(var o=-1,i=Array(e);++o<e;)i[o]=t(o);return i}(e.length,String):[],a=l.length;for(var c in e)!t&&!B.call(e,c)||s&&("length"==c||n&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||pe(c,a))||l.push(c);return l}function ne(e,t,o){var i=e[t];B.call(e,t)&&we(i,o)&&(void 0!==o||t in e)||re(e,t,o)}function re(e,t,o){"__proto__"==t&&W?W(e,t,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[t]=o}function se(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":K&&K in Object(e)?function(e){var t=B.call(e,K),o=e[K];try{e[K]=void 0;var i=!0}catch(e){}var n=H.call(e);i&&(t?e[K]=o:delete e[K]);return n}(e):function(e){return H.call(e)}(e)}function le(e){return Ae(e)&&se(e)==r}function ae(e){if(!ke(e))return function(e){var t=[];if(null!=e)for(var o in Object(e))t.push(o);return t}(e);var t=ge(e),o=[];for(var i in e)("constructor"!=i||!t&&B.call(e,i))&&o.push(i);return o}function ce(e,t){return ye(function(e,t,o){return t=Z(void 0===t?e.length-1:t,0),function(){for(var i=arguments,n=-1,r=Z(i.length-t,0),s=Array(r);++n<r;)s[n]=i[t+n];n=-1;for(var l=Array(t+1);++n<t;)l[n]=i[n];return l[t]=o(s),I(e,this,l)}}(e,t,$e),e+"")}var de=W?function(e,t){return W(e,"toString",{configurable:!0,enumerable:!1,value:(o=t,function(){return o}),writable:!0});var o}:$e;function ue(e){if("string"==typeof e)return e;if(Ee(e))return T(e,ue)+"";if(function(e){return"symbol"==typeof e||Ae(e)&&se(e)==c}(e))return oe?oe.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function he(e,t,o,i){return void 0===e||we(e,P[o])&&!B.call(i,o)?t:e}function pe(e,t){var o=typeof e;return!!(t=null==t?n:t)&&("number"==o||"symbol"!=o&&v.test(e))&&e>-1&&e%1==0&&e<t}function fe(e,t,o){if(!ke(o))return!1;var i=typeof t;return!!("number"==i?xe(o)&&pe(t,o.length):"string"==i&&t in o)&&we(o[t],e)}function ge(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||P)}var me,ve,be,ye=(me=de,ve=0,be=0,function(){var e=ee(),t=16-(e-be);if(be=e,t>0){if(++ve>=800)return arguments[0]}else ve=0;return me.apply(void 0,arguments)});function we(e,t){return e===t||e!=e&&t!=t}var je=le(function(){return arguments}())?le:function(e){return Ae(e)&&B.call(e,"callee")&&!Y.call(e,"callee")},Ee=Array.isArray;function xe(e){return null!=e&&Ce(e.length)&&!Oe(e)}var _e=Q||function(){return!1};function Se(e){if(!Ae(e))return!1;var t=se(e);return t==s||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!function(e){if(!Ae(e)||se(e)!=a)return!1;var t=U(e);if(null===t)return!0;var o=B.call(t,"constructor")&&t.constructor;return"function"==typeof o&&o instanceof o&&N.call(o)==q}(e)}function Oe(e){if(!ke(e))return!1;var t=se(e);return t==l||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ce(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function ke(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ae(e){return null!=e&&"object"==typeof e}var Le=L?function(e){return function(t){return e(t)}}(L):function(e){return Ae(e)&&Ce(e.length)&&!!w[se(e)]};var Ie,Te=(Ie=function(e,t,o,i){!function(e,t,o,i){var n=!o;o||(o={});for(var r=-1,s=t.length;++r<s;){var l=t[r],a=i?i(o[l],e[l],l,o,e):void 0;void 0===a&&(a=e[l]),n?re(o,l,a):ne(o,l,a)}}(t,function(e){return xe(e)?ie(e,!0):ae(e)}(t),e,i)},ce((function(e,t){var o=-1,i=t.length,n=i>1?t[i-1]:void 0,r=i>2?t[2]:void 0;for(n=Ie.length>3&&"function"==typeof n?(i--,n):void 0,r&&fe(t[0],t[1],r)&&(n=i<3?void 0:n,i=1),e=Object(e);++o<i;){var s=t[o];s&&Ie(e,s,o,n)}return e})));function De(e){return xe(e)?ie(e):function(e){if(!ge(e))return J(e);var t=[];for(var o in Object(e))B.call(e,o)&&"constructor"!=o&&t.push(o);return t}(e)}var Fe=ce((function(e,t){try{return I(e,void 0,t)}catch(e){return Se(e)?e:new Error(e)}}));function $e(e){return e}t.exports=function(e,t,n){var r,s=i.imports._.templateSettings||i;n&&fe(e,t,n)&&(t=void 0),e=null==(r=e)?"":ue(r),t=Te({},t,s,he);var l,a,c,f=Te({},t.imports,s.imports,he),g=De(f),m=(l=f,T(g,(function(e){return l[e]}))),v=0,w=t.interpolate||b,j="__p += '",E=RegExp((t.escape||b).source+"|"+w.source+"|"+(w===o?p:b).source+"|"+(t.evaluate||b).source+"|$","g"),x=B.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/[\r\n]/g," ")+"\n":"";e.replace(E,(function(t,o,i,n,r,s){return i||(i=n),j+=e.slice(v,s).replace(y,D),o&&(a=!0,j+="' +\n__e("+o+") +\n'"),r&&(c=!0,j+="';\n"+r+";\n__p += '"),i&&(j+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),v=s+t.length,t})),j+="';\n";var _=B.call(t,"variable")&&t.variable;_||(j="with (obj) {\n"+j+"\n}\n"),j=(c?j.replace(d,""):j).replace(u,"$1").replace(h,"$1;"),j="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+j+"return __p\n}";var S=Fe((function(){return Function(g,x+"return "+j).apply(void 0,m)}));if(S.source=j,Se(S))throw S;return S}}}),v=u(h()),b=u(p()),y=u(m());function w(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function j(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?w(Object(o),!0).forEach((function(t){x(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):w(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},_.apply(this,arguments)}function S(e,t){if(null==e)return{};var o,i,n=function(e,t){if(null==e)return{};var o,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)o=r[i],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)o=r[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function O(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return C(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}function k(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var A=k(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),L=k(/Edge/i),I=k(/firefox/i),T=k(/safari/i)&&!k(/chrome/i)&&!k(/android/i),D=k(/iP(ad|od|hone)/i),F=k(/chrome/i)&&k(/android/i),$={capture:!1,passive:!1};function R(e,t,o){e.addEventListener(t,o,!A&&$)}function P(e,t,o){e.removeEventListener(t,o,!A&&$)}function M(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function N(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function B(e,t,o,i){if(e){o=o||document;do{if(null!=t&&(">"===t[0]?e.parentNode===o&&M(e,t):M(e,t))||i&&e===o)return e;if(e===o)break}while(e=N(e))}return null}var V,H=/\s+/g;function q(e,t,o){if(e&&t)if(e.classList)e.classList[o?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(H," ").replace(" "+t+" "," ");e.className=(i+(o?" "+t:"")).replace(H," ")}}function z(e,t,o){var i=e&&e.style;if(i){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),void 0===t?o:o[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=o+("string"==typeof o?"":"px")}}function G(e,t){var o="";if("string"==typeof e)o=e;else do{var i=z(e,"transform");i&&"none"!==i&&(o=i+" "+o)}while(!t&&(e=e.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(o)}function X(e,t,o){if(e){var i=e.getElementsByTagName(t),n=0,r=i.length;if(o)for(;n<r;n++)o(i[n],n);return i}return[]}function U(){var e=document.scrollingElement;return e||document.documentElement}function Y(e,t,o,i,n){if(e.getBoundingClientRect||e===window){var r,s,l,a,c,d,u;if(e!==window&&e.parentNode&&e!==U()?(s=(r=e.getBoundingClientRect()).top,l=r.left,a=r.bottom,c=r.right,d=r.height,u=r.width):(s=0,l=0,a=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||o)&&e!==window&&(n=n||e.parentNode,!A))do{if(n&&n.getBoundingClientRect&&("none"!==z(n,"transform")||o&&"static"!==z(n,"position"))){var h=n.getBoundingClientRect();s-=h.top+parseInt(z(n,"border-top-width")),l-=h.left+parseInt(z(n,"border-left-width")),a=s+r.height,c=l+r.width;break}}while(n=n.parentNode);if(i&&e!==window){var p=G(n||e),f=p&&p.a,g=p&&p.d;p&&(a=(s/=g)+(d/=g),c=(l/=f)+(u/=f))}return{top:s,left:l,bottom:a,right:c,width:u,height:d}}}function K(e,t,o){for(var i=ee(e,!0),n=Y(e)[t];i;){var r=Y(i)[o];if(!("top"===o||"left"===o?n>=r:n<=r))return i;if(i===U())break;i=ee(i,!1)}return!1}function W(e,t,o,i){for(var n=0,r=0,s=e.children;r<s.length;){if("none"!==s[r].style.display&&s[r]!==st.ghost&&(i||s[r]!==st.dragged)&&B(s[r],o.draggable,e,!1)){if(n===t)return s[r];n++}r++}return null}function Q(e,t){for(var o=e.lastElementChild;o&&(o===st.ghost||"none"===z(o,"display")||t&&!M(o,t));)o=o.previousElementSibling;return o||null}function J(e,t){var o=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===st.clone||t&&!M(e,t)||o++;return o}function Z(e){var t=0,o=0,i=U();if(e)do{var n=G(e),r=n.a,s=n.d;t+=e.scrollLeft*r,o+=e.scrollTop*s}while(e!==i&&(e=e.parentNode));return[t,o]}function ee(e,t){if(!e||!e.getBoundingClientRect)return U();var o=e,i=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var n=z(o);if(o.clientWidth<o.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!o.getBoundingClientRect||o===document.body)return U();if(i||t)return o;i=!0}}}while(o=o.parentNode);return U()}function te(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function oe(e,t){return function(){if(!V){var o=arguments,i=this;1===o.length?e.call(i,o[0]):e.apply(i,o),V=setTimeout((function(){V=void 0}),t)}}}function ie(e,t,o){e.scrollLeft+=t,e.scrollTop+=o}function ne(e){var t=window.Polymer,o=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):o?o(e).clone(!0)[0]:e.cloneNode(!0)}function re(e,t){z(e,"position","absolute"),z(e,"top",t.top),z(e,"left",t.left),z(e,"width",t.width),z(e,"height",t.height)}function se(e){z(e,"position",""),z(e,"top",""),z(e,"left",""),z(e,"width",""),z(e,"height","")}var le="Sortable"+(new Date).getTime();function ae(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==z(e,"display")&&e!==st.ghost){t.push({target:e,rect:Y(e)});var o=j({},t[t.length-1].rect);if(e.thisAnimationDuration){var i=G(e,!0);i&&(o.top-=i.f,o.left-=i.e)}e.fromRect=o}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var o in e)if(e.hasOwnProperty(o))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[o][i])return Number(o);return-1}(t,{target:e}),1)},animateAll:function(o){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof o&&o());var n=!1,r=0;t.forEach((function(e){var t=0,o=e.target,s=o.fromRect,l=Y(o),a=o.prevFromRect,c=o.prevToRect,d=e.rect,u=G(o,!0);u&&(l.top-=u.f,l.left-=u.e),o.toRect=l,o.thisAnimationDuration&&te(a,l)&&!te(s,l)&&(d.top-l.top)/(d.left-l.left)==(s.top-l.top)/(s.left-l.left)&&(t=function(e,t,o,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-o.top,2)+Math.pow(t.left-o.left,2))*i.animation}(d,a,c,i.options)),te(l,s)||(o.prevFromRect=s,o.prevToRect=l,t||(t=i.options.animation),i.animate(o,d,l,t)),t&&(n=!0,r=Math.max(r,t),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),t),o.thisAnimationDuration=t)})),clearTimeout(e),n?e=setTimeout((function(){"function"==typeof o&&o()}),r):"function"==typeof o&&o(),t=[]},animate:function(e,t,o,i){if(i){z(e,"transition",""),z(e,"transform","");var n=G(this.el),r=n&&n.a,s=n&&n.d,l=(t.left-o.left)/(r||1),a=(t.top-o.top)/(s||1);e.animatingX=!!l,e.animatingY=!!a,z(e,"transform","translate3d("+l+"px,"+a+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),z(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),z(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){z(e,"transition",""),z(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),i)}}}}var ce=[],de={initializeByDefault:!0},ue={mount:function(e){for(var t in de)de.hasOwnProperty(t)&&!(t in e)&&(e[t]=de[t]);ce.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),ce.push(e)},pluginEvent:function(e,t,o){var i=this;this.eventCanceled=!1,o.cancel=function(){i.eventCanceled=!0};var n=e+"Global";ce.forEach((function(i){t[i.pluginName]&&(t[i.pluginName][n]&&t[i.pluginName][n](j({sortable:t},o)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](j({sortable:t},o)))}))},initializePlugins:function(e,t,o,i){for(var n in ce.forEach((function(i){var n=i.pluginName;if(e.options[n]||i.initializeByDefault){var r=new i(e,t,e.options);r.sortable=e,r.options=e.options,e[n]=r,_(o,r.defaults)}})),e.options)if(e.options.hasOwnProperty(n)){var r=this.modifyOption(e,n,e.options[n]);void 0!==r&&(e.options[n]=r)}},getEventProperties:function(e,t){var o={};return ce.forEach((function(i){"function"==typeof i.eventProperties&&_(o,i.eventProperties.call(t[i.pluginName],e))})),o},modifyOption:function(e,t,o){var i;return ce.forEach((function(n){e[n.pluginName]&&n.optionListeners&&"function"==typeof n.optionListeners[t]&&(i=n.optionListeners[t].call(e[n.pluginName],o))})),i}};function he(e){var t=e.sortable,o=e.rootEl,i=e.name,n=e.targetEl,r=e.cloneEl,s=e.toEl,l=e.fromEl,a=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,u=e.newDraggableIndex,h=e.originalEvent,p=e.putSortable,f=e.extraEventProperties;if(t=t||o&&o[le]){var g,m=t.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||A||L?(g=document.createEvent("Event")).initEvent(i,!0,!0):g=new CustomEvent(i,{bubbles:!0,cancelable:!0}),g.to=s||o,g.from=l||o,g.item=n||o,g.clone=r,g.oldIndex=a,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=u,g.originalEvent=h,g.pullMode=p?p.lastPutMode:void 0;var b=j(j({},f),ue.getEventProperties(i,t));for(var y in b)g[y]=b[y];o&&o.dispatchEvent(g),m[v]&&m[v].call(t,g)}}var pe,fe,ge,me,ve,be,ye,we,je,Ee,xe,_e,Se,Oe,Ce=["evt"],ke=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.evt,n=S(o,Ce);ue.pluginEvent.bind(st)(e,t,j({dragEl:pe,parentEl:fe,ghostEl:ge,rootEl:me,nextEl:ve,lastDownEl:be,cloneEl:ye,cloneHidden:we,dragStarted:Re,putSortable:Oe,activeSortable:st.active,originalEvent:i,oldIndex:je,oldDraggableIndex:xe,newIndex:Ee,newDraggableIndex:_e,hideGhostForTarget:ot,unhideGhostForTarget:it,cloneNowHidden:function(){we=!0},cloneNowShown:function(){we=!1},dispatchSortableEvent:function(e){Ae({sortable:t,name:e,originalEvent:i})}},n))};function Ae(e){he(j({putSortable:Oe,cloneEl:ye,targetEl:pe,rootEl:me,oldIndex:je,oldDraggableIndex:xe,newIndex:Ee,newDraggableIndex:_e},e))}var Le,Ie,Te,De,Fe,$e,Re,Pe,Me,Ne,Be,Ve=!1,He=!1,qe=[],ze=!1,Ge=!1,Xe=[],Ue=!1,Ye=[],Ke="undefined"!=typeof document,We=D,Qe=L||A?"cssFloat":"float",Je=Ke&&!F&&!D&&"draggable"in document.createElement("div"),Ze=function(){if(Ke){if(A)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),et=function(e,t){var o=z(e),i=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),n=W(e,0,t),r=W(e,1,t),s=n&&z(n),l=r&&z(r),a=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Y(n).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Y(r).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&s.float&&"none"!==s.float){var d="left"===s.float?"left":"right";return!r||"both"!==l.clear&&l.clear!==d?"horizontal":"vertical"}return n&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||a>=i&&"none"===o[Qe]||r&&"none"===o[Qe]&&a+c>i)?"vertical":"horizontal"},tt=function(e){function t(e,o){return function(i,n,r,s){var l=i.options.group.name&&n.options.group.name&&i.options.group.name===n.options.group.name;if(null==e&&(o||l))return!0;if(null==e||!1===e)return!1;if(o&&"clone"===e)return e;if("function"==typeof e)return t(e(i,n,r,s),o)(i,n,r,s);var a=(o?i:n).options.group.name;return!0===e||"string"==typeof e&&e===a||e.join&&e.indexOf(a)>-1}}var o={},i=e.group;i&&"object"==E(i)||(i={name:i}),o.name=i.name,o.checkPull=t(i.pull,!0),o.checkPut=t(i.put),o.revertClone=i.revertClone,e.group=o},ot=function(){!Ze&&ge&&z(ge,"display","none")},it=function(){!Ze&&ge&&z(ge,"display","")};Ke&&!F&&document.addEventListener("click",(function(e){if(He)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),He=!1,!1}),!0);var nt=function(e){if(pe){e=e.touches?e.touches[0]:e;var t=(n=e.clientX,r=e.clientY,qe.some((function(e){var t=e[le].options.emptyInsertThreshold;if(t&&!Q(e)){var o=Y(e),i=n>=o.left-t&&n<=o.right+t,l=r>=o.top-t&&r<=o.bottom+t;return i&&l?s=e:void 0}})),s);if(t){var o={};for(var i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[le]._onDragOver(o)}}var n,r,s},rt=function(e){pe&&pe.parentNode[le]._isOutsideThisEl(e.target)};function st(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=_({},t),e[le]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return et(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==st.supportPointer&&"PointerEvent"in window&&!T,emptyInsertThreshold:5};for(var i in ue.initializePlugins(this,e,o),o)!(i in t)&&(t[i]=o[i]);for(var n in tt(t),this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&Je,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?R(e,"pointerdown",this._onTapStart):(R(e,"mousedown",this._onTapStart),R(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(R(e,"dragover",this),R(e,"dragenter",this)),qe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),_(this,ae())}function lt(e,t,o,i,n,r,s,l){var a,c,d=e[le],u=d.options.onMove;return!window.CustomEvent||A||L?(a=document.createEvent("Event")).initEvent("move",!0,!0):a=new CustomEvent("move",{bubbles:!0,cancelable:!0}),a.to=t,a.from=e,a.dragged=o,a.draggedRect=i,a.related=n||t,a.relatedRect=r||Y(t),a.willInsertAfter=l,a.originalEvent=s,e.dispatchEvent(a),u&&(c=u.call(d,a,s)),c}function at(e){e.draggable=!1}function ct(){Ue=!1}function dt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,i=0;o--;)i+=t.charCodeAt(o);return i.toString(36)}function ut(e){return setTimeout(e,0)}function ht(e){return clearTimeout(e)}st.prototype={constructor:st,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Pe=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,pe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,o=this.el,i=this.options,n=i.preventOnFilter,r=e.type,s=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(s||e).target,a=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=i.filter;if(function(e){Ye.length=0;var t=e.getElementsByTagName("input"),o=t.length;for(;o--;){var i=t[o];i.checked&&Ye.push(i)}}(o),!pe&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||i.disabled)&&!a.isContentEditable&&(this.nativeDraggable||!T||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=B(l,i.draggable,o,!1))&&l.animated||be===l)){if(je=J(l),xe=J(l,i.draggable),"function"==typeof c){if(c.call(this,e,l,this))return Ae({sortable:t,rootEl:a,name:"filter",targetEl:l,toEl:o,fromEl:o}),ke("filter",t,{evt:e}),void(n&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(i){if(i=B(a,i.trim(),o,!1))return Ae({sortable:t,rootEl:i,name:"filter",targetEl:l,fromEl:o,toEl:o}),ke("filter",t,{evt:e}),!0}))))return void(n&&e.cancelable&&e.preventDefault());i.handle&&!B(a,i.handle,o,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,t,o){var i,n=this,r=n.el,s=n.options,l=r.ownerDocument;if(o&&!pe&&o.parentNode===r){var a=Y(o);if(me=r,fe=(pe=o).parentNode,ve=pe.nextSibling,be=o,Se=s.group,st.dragged=pe,Le={target:pe,clientX:(t||e).clientX,clientY:(t||e).clientY},Fe=Le.clientX-a.left,$e=Le.clientY-a.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,pe.style["will-change"]="all",i=function(){ke("delayEnded",n,{evt:e}),st.eventCanceled?n._onDrop():(n._disableDelayedDragEvents(),!I&&n.nativeDraggable&&(pe.draggable=!0),n._triggerDragStart(e,t),Ae({sortable:n,name:"choose",originalEvent:e}),q(pe,s.chosenClass,!0))},s.ignore.split(",").forEach((function(e){X(pe,e.trim(),at)})),R(l,"dragover",nt),R(l,"mousemove",nt),R(l,"touchmove",nt),R(l,"mouseup",n._onDrop),R(l,"touchend",n._onDrop),R(l,"touchcancel",n._onDrop),I&&this.nativeDraggable&&(this.options.touchStartThreshold=4,pe.draggable=!0),ke("delayStart",this,{evt:e}),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(L||A))i();else{if(st.eventCanceled)return void this._onDrop();R(l,"mouseup",n._disableDelayedDrag),R(l,"touchend",n._disableDelayedDrag),R(l,"touchcancel",n._disableDelayedDrag),R(l,"mousemove",n._delayedDragTouchMoveHandler),R(l,"touchmove",n._delayedDragTouchMoveHandler),s.supportPointer&&R(l,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(i,s.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){pe&&at(pe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;P(e,"mouseup",this._disableDelayedDrag),P(e,"touchend",this._disableDelayedDrag),P(e,"touchcancel",this._disableDelayedDrag),P(e,"mousemove",this._delayedDragTouchMoveHandler),P(e,"touchmove",this._delayedDragTouchMoveHandler),P(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?R(document,"pointermove",this._onTouchMove):R(document,t?"touchmove":"mousemove",this._onTouchMove):(R(pe,"dragend",this),R(me,"dragstart",this._onDragStart));try{document.selection?ut((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(Ve=!1,me&&pe){ke("dragStarted",this,{evt:t}),this.nativeDraggable&&R(document,"dragover",rt);var o=this.options;!e&&q(pe,o.dragClass,!1),q(pe,o.ghostClass,!0),st.active=this,e&&this._appendGhost(),Ae({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ie){this._lastX=Ie.clientX,this._lastY=Ie.clientY,ot();for(var e=document.elementFromPoint(Ie.clientX,Ie.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ie.clientX,Ie.clientY))!==t;)t=e;if(pe.parentNode[le]._isOutsideThisEl(e),t)do{if(t[le]){if(t[le]._onDragOver({clientX:Ie.clientX,clientY:Ie.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);it()}},_onTouchMove:function(e){if(Le){var t=this.options,o=t.fallbackTolerance,i=t.fallbackOffset,n=e.touches?e.touches[0]:e,r=ge&&G(ge,!0),s=ge&&r&&r.a,l=ge&&r&&r.d,a=We&&Be&&Z(Be),c=(n.clientX-Le.clientX+i.x)/(s||1)+(a?a[0]-Xe[0]:0)/(s||1),d=(n.clientY-Le.clientY+i.y)/(l||1)+(a?a[1]-Xe[1]:0)/(l||1);if(!st.active&&!Ve){if(o&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(ge){r?(r.e+=c-(Te||0),r.f+=d-(De||0)):r={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");z(ge,"webkitTransform",u),z(ge,"mozTransform",u),z(ge,"msTransform",u),z(ge,"transform",u),Te=c,De=d,Ie=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ge){var e=this.options.fallbackOnBody?document.body:me,t=Y(pe,!0,We,!0,e),o=this.options;if(We){for(Be=e;"static"===z(Be,"position")&&"none"===z(Be,"transform")&&Be!==document;)Be=Be.parentNode;Be!==document.body&&Be!==document.documentElement?(Be===document&&(Be=U()),t.top+=Be.scrollTop,t.left+=Be.scrollLeft):Be=U(),Xe=Z(Be)}q(ge=pe.cloneNode(!0),o.ghostClass,!1),q(ge,o.fallbackClass,!0),q(ge,o.dragClass,!0),z(ge,"transition",""),z(ge,"transform",""),z(ge,"box-sizing","border-box"),z(ge,"margin",0),z(ge,"top",t.top),z(ge,"left",t.left),z(ge,"width",t.width),z(ge,"height",t.height),z(ge,"opacity","0.8"),z(ge,"position",We?"absolute":"fixed"),z(ge,"zIndex","100000"),z(ge,"pointerEvents","none"),st.ghost=ge,e.appendChild(ge),z(ge,"transform-origin",Fe/parseInt(ge.style.width)*100+"% "+$e/parseInt(ge.style.height)*100+"%")}},_onDragStart:function(e,t){var o=this,i=e.dataTransfer,n=o.options;ke("dragStart",this,{evt:e}),st.eventCanceled?this._onDrop():(ke("setupClone",this),st.eventCanceled||((ye=ne(pe)).removeAttribute("id"),ye.draggable=!1,ye.style["will-change"]="",this._hideClone(),q(ye,this.options.chosenClass,!1),st.clone=ye),o.cloneId=ut((function(){ke("clone",o),st.eventCanceled||(o.options.removeCloneOnHide||me.insertBefore(ye,pe),o._hideClone(),Ae({sortable:o,name:"clone"}))})),!t&&q(pe,n.dragClass,!0),t?(He=!0,o._loopId=setInterval(o._emulateDragOver,50)):(P(document,"mouseup",o._onDrop),P(document,"touchend",o._onDrop),P(document,"touchcancel",o._onDrop),i&&(i.effectAllowed="move",n.setData&&n.setData.call(o,i,pe)),R(document,"drop",o),z(pe,"transform","translateZ(0)")),Ve=!0,o._dragStartId=ut(o._dragStarted.bind(o,t,e)),R(document,"selectstart",o),Re=!0,T&&z(document.body,"user-select","none"))},_onDragOver:function(e){var t,o,i,n,r=this.el,s=e.target,l=this.options,a=l.group,c=st.active,d=Se===a,u=l.sort,h=Oe||c,p=this,f=!1;if(!Ue){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=B(s,l.draggable,r,!0),L("dragOver"),st.eventCanceled)return f;if(pe.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||p._ignoreWhileAnimating===s)return T(!1);if(He=!1,c&&!l.disabled&&(d?u||(i=fe!==me):Oe===this||(this.lastPutMode=Se.checkPull(this,c,pe,e))&&a.checkPut(this,c,pe,e))){if(n="vertical"===this._getDirection(e,s),t=Y(pe),L("dragOverValid"),st.eventCanceled)return f;if(i)return fe=me,I(),this._hideClone(),L("revert"),st.eventCanceled||(ve?me.insertBefore(pe,ve):me.appendChild(pe)),T(!0);var g=Q(r,l.draggable);if(!g||function(e,t,o){var i=Y(Q(o.el,o.options.draggable)),n=10;return t?e.clientX>i.right+n||e.clientX<=i.right&&e.clientY>i.bottom&&e.clientX>=i.left:e.clientX>i.right&&e.clientY>i.top||e.clientX<=i.right&&e.clientY>i.bottom+n}(e,n,this)&&!g.animated){if(g===pe)return T(!1);if(g&&r===e.target&&(s=g),s&&(o=Y(s)),!1!==lt(me,r,pe,t,s,o,e,!!s))return I(),g&&g.nextSibling?r.insertBefore(pe,g.nextSibling):r.appendChild(pe),fe=r,D(),T(!0)}else if(g&&function(e,t,o){var i=Y(W(o.el,0,o.options,!0)),n=10;return t?e.clientX<i.left-n||e.clientY<i.top&&e.clientX<i.right:e.clientY<i.top-n||e.clientY<i.bottom&&e.clientX<i.left}(e,n,this)){var m=W(r,0,l,!0);if(m===pe)return T(!1);if(o=Y(s=m),!1!==lt(me,r,pe,t,s,o,e,!1))return I(),r.insertBefore(pe,m),fe=r,D(),T(!0)}else if(s.parentNode===r){o=Y(s);var v,b,y,w=pe.parentNode!==r,E=!function(e,t,o){var i=o?e.left:e.top,n=o?e.right:e.bottom,r=o?e.width:e.height,s=o?t.left:t.top,l=o?t.right:t.bottom,a=o?t.width:t.height;return i===s||n===l||i+r/2===s+a/2}(pe.animated&&pe.toRect||t,s.animated&&s.toRect||o,n),x=n?"top":"left",_=K(s,"top","top")||K(pe,"top","top"),S=_?_.scrollTop:void 0;if(Pe!==s&&(b=o[x],ze=!1,Ge=!E&&l.invertSwap||w),v=function(e,t,o,i,n,r,s,l){var a=i?e.clientY:e.clientX,c=i?o.height:o.width,d=i?o.top:o.left,u=i?o.bottom:o.right,h=!1;if(!s)if(l&&Ne<c*n){if(!ze&&(1===Me?a>d+c*r/2:a<u-c*r/2)&&(ze=!0),ze)h=!0;else if(1===Me?a<d+Ne:a>u-Ne)return-Me}else if(a>d+c*(1-n)/2&&a<u-c*(1-n)/2)return function(e){return J(pe)<J(e)?1:-1}(t);if((h=h||s)&&(a<d+c*r/2||a>u-c*r/2))return a>d+c/2?1:-1;return 0}(e,s,o,n,E?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Ge,Pe===s),0!==v){var O=J(pe);do{O-=v,y=fe.children[O]}while(y&&("none"===z(y,"display")||y===ge))}if(0===v||y===s)return T(!1);Pe=s,Me=v;var C=s.nextElementSibling,k=!1,A=lt(me,r,pe,t,s,o,e,k=1===v);if(!1!==A)return 1!==A&&-1!==A||(k=1===A),Ue=!0,setTimeout(ct,30),I(),k&&!C?r.appendChild(pe):s.parentNode.insertBefore(pe,k?C:s),_&&ie(_,0,S-_.scrollTop),fe=pe.parentNode,void 0===b||Ge||(Ne=Math.abs(b-Y(s)[x])),D(),T(!0)}if(r.contains(pe))return T(!1)}return!1}function L(l,a){ke(l,p,j({evt:e,isOwner:d,axis:n?"vertical":"horizontal",revert:i,dragRect:t,targetRect:o,canSort:u,fromSortable:h,target:s,completed:T,onMove:function(o,i){return lt(me,r,pe,t,o,Y(o),e,i)},changed:D},a))}function I(){L("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function T(t){return L("dragOverCompleted",{insertion:t}),t&&(d?c._hideClone():c._showClone(p),p!==h&&(q(pe,Oe?Oe.options.ghostClass:c.options.ghostClass,!1),q(pe,l.ghostClass,!0)),Oe!==p&&p!==st.active?Oe=p:p===st.active&&Oe&&(Oe=null),h===p&&(p._ignoreWhileAnimating=s),p.animateAll((function(){L("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(s===pe&&!pe.animated||s===r&&!s.animated)&&(Pe=null),l.dragoverBubble||e.rootEl||s===document||(pe.parentNode[le]._isOutsideThisEl(e.target),!t&&nt(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function D(){Ee=J(pe),_e=J(pe,l.draggable),Ae({sortable:p,name:"change",toEl:r,newIndex:Ee,newDraggableIndex:_e,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){P(document,"mousemove",this._onTouchMove),P(document,"touchmove",this._onTouchMove),P(document,"pointermove",this._onTouchMove),P(document,"dragover",nt),P(document,"mousemove",nt),P(document,"touchmove",nt)},_offUpEvents:function(){var e=this.el.ownerDocument;P(e,"mouseup",this._onDrop),P(e,"touchend",this._onDrop),P(e,"pointerup",this._onDrop),P(e,"touchcancel",this._onDrop),P(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;Ee=J(pe),_e=J(pe,o.draggable),ke("drop",this,{evt:e}),fe=pe&&pe.parentNode,Ee=J(pe),_e=J(pe,o.draggable),st.eventCanceled||(Ve=!1,Ge=!1,ze=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ht(this.cloneId),ht(this._dragStartId),this.nativeDraggable&&(P(document,"drop",this),P(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),T&&z(document.body,"user-select",""),z(pe,"transform",""),e&&(Re&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),ge&&ge.parentNode&&ge.parentNode.removeChild(ge),(me===fe||Oe&&"clone"!==Oe.lastPutMode)&&ye&&ye.parentNode&&ye.parentNode.removeChild(ye),pe&&(this.nativeDraggable&&P(pe,"dragend",this),at(pe),pe.style["will-change"]="",Re&&!Ve&&q(pe,Oe?Oe.options.ghostClass:this.options.ghostClass,!1),q(pe,this.options.chosenClass,!1),Ae({sortable:this,name:"unchoose",toEl:fe,newIndex:null,newDraggableIndex:null,originalEvent:e}),me!==fe?(Ee>=0&&(Ae({rootEl:fe,name:"add",toEl:fe,fromEl:me,originalEvent:e}),Ae({sortable:this,name:"remove",toEl:fe,originalEvent:e}),Ae({rootEl:fe,name:"sort",toEl:fe,fromEl:me,originalEvent:e}),Ae({sortable:this,name:"sort",toEl:fe,originalEvent:e})),Oe&&Oe.save()):Ee!==je&&Ee>=0&&(Ae({sortable:this,name:"update",toEl:fe,originalEvent:e}),Ae({sortable:this,name:"sort",toEl:fe,originalEvent:e})),st.active&&(null!=Ee&&-1!==Ee||(Ee=je,_e=xe),Ae({sortable:this,name:"end",toEl:fe,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){ke("nulling",this),me=pe=fe=ge=ve=ye=be=we=Le=Ie=Re=Ee=_e=je=xe=Pe=Me=Oe=Se=st.dragged=st.ghost=st.clone=st.active=null,Ye.forEach((function(e){e.checked=!0})),Ye.length=Te=De=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":pe&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],o=this.el.children,i=0,n=o.length,r=this.options;i<n;i++)B(e=o[i],r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||dt(e));return t},sort:function(e,t){var o={},i=this.el;this.toArray().forEach((function(e,t){var n=i.children[t];B(n,this.options.draggable,i,!1)&&(o[e]=n)}),this),t&&this.captureAnimationState(),e.forEach((function(e){o[e]&&(i.removeChild(o[e]),i.appendChild(o[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return B(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(void 0===t)return o[e];var i=ue.modifyOption(this,e,t);o[e]=void 0!==i?i:t,"group"===e&&tt(o)},destroy:function(){ke("destroy",this);var e=this.el;e[le]=null,P(e,"mousedown",this._onTapStart),P(e,"touchstart",this._onTapStart),P(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(P(e,"dragover",this),P(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),qe.splice(qe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!we){if(ke("hideClone",this),st.eventCanceled)return;z(ye,"display","none"),this.options.removeCloneOnHide&&ye.parentNode&&ye.parentNode.removeChild(ye),we=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(we){if(ke("showClone",this),st.eventCanceled)return;pe.parentNode!=me||this.options.group.revertClone?ve?me.insertBefore(ye,ve):me.appendChild(ye):me.insertBefore(ye,pe),this.options.group.revertClone&&this.animate(pe,ye),z(ye,"display",""),we=!1}}else this._hideClone()}},Ke&&R(document,"touchmove",(function(e){(st.active||Ve)&&e.cancelable&&e.preventDefault()})),st.utils={on:R,off:P,css:z,find:X,is:function(e,t){return!!B(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},throttle:oe,closest:B,toggleClass:q,clone:ne,index:J,nextTick:ut,cancelNextTick:ht,detectDirection:et,getChild:W},st.get=function(e){return e[le]},st.mount=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(st.utils=j(j({},st.utils),e.utils)),ue.mount(e)}))},st.create=function(e,t){return new st(e,t)},st.version="1.15.0";var pt,ft,gt,mt,vt,bt,yt=[],wt=!1;function jt(){yt.forEach((function(e){clearInterval(e.pid)})),yt=[]}function Et(){clearInterval(bt)}var xt=oe((function(e,t,o,i){if(t.scroll){var n,r=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,a=t.scrollSpeed,c=U(),d=!1;ft!==o&&(ft=o,jt(),pt=t.scroll,n=t.scrollFn,!0===pt&&(pt=ee(o,!0)));var u=0,h=pt;do{var p=h,f=Y(p),g=f.top,m=f.bottom,v=f.left,b=f.right,y=f.width,w=f.height,j=void 0,E=void 0,x=p.scrollWidth,_=p.scrollHeight,S=z(p),O=p.scrollLeft,C=p.scrollTop;p===c?(j=y<x&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),E=w<_&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(j=y<x&&("auto"===S.overflowX||"scroll"===S.overflowX),E=w<_&&("auto"===S.overflowY||"scroll"===S.overflowY));var k=j&&(Math.abs(b-r)<=l&&O+y<x)-(Math.abs(v-r)<=l&&!!O),A=E&&(Math.abs(m-s)<=l&&C+w<_)-(Math.abs(g-s)<=l&&!!C);if(!yt[u])for(var L=0;L<=u;L++)yt[L]||(yt[L]={});yt[u].vx==k&&yt[u].vy==A&&yt[u].el===p||(yt[u].el=p,yt[u].vx=k,yt[u].vy=A,clearInterval(yt[u].pid),0==k&&0==A||(d=!0,yt[u].pid=setInterval(function(){i&&0===this.layer&&st.active._onTouchMove(vt);var t=yt[this.layer].vy?yt[this.layer].vy*a:0,o=yt[this.layer].vx?yt[this.layer].vx*a:0;"function"==typeof n&&"continue"!==n.call(st.dragged.parentNode[le],o,t,e,vt,yt[this.layer].el)||ie(yt[this.layer].el,o,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&h!==c&&(h=ee(h,!1)));wt=d}}),30),_t=function(e){var t=e.originalEvent,o=e.putSortable,i=e.dragEl,n=e.activeSortable,r=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var a=o||n;s();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);l(),a&&!a.el.contains(d)&&(r("spill"),this.onSpill({dragEl:i,putSortable:o}))}};function St(){}function Ot(){}St.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var i=W(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),o&&o.animateAll()},drop:_t},_(St,{pluginName:"revertOnSpill"}),Ot.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:_t},_(Ot,{pluginName:"removeOnSpill"});var Ct,kt,At,Lt,It,Tt=[],Dt=[],Ft=!1,$t=!1,Rt=!1;function Pt(e,t){Dt.forEach((function(o,i){var n=t.children[o.sortableIndex+(e?Number(i):0)];n?t.insertBefore(o,n):t.appendChild(o)}))}function Mt(){Tt.forEach((function(e){e!==At&&e.parentNode&&e.parentNode.removeChild(e)}))}st.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?R(document,"dragover",this._handleAutoScroll):this.options.supportPointer?R(document,"pointermove",this._handleFallbackAutoScroll):t.touches?R(document,"touchmove",this._handleFallbackAutoScroll):R(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?P(document,"dragover",this._handleAutoScroll):(P(document,"pointermove",this._handleFallbackAutoScroll),P(document,"touchmove",this._handleFallbackAutoScroll),P(document,"mousemove",this._handleFallbackAutoScroll)),Et(),jt(),clearTimeout(V),V=void 0},nulling:function(){vt=ft=pt=wt=bt=gt=mt=null,yt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var o=this,i=(e.touches?e.touches[0]:e).clientX,n=(e.touches?e.touches[0]:e).clientY,r=document.elementFromPoint(i,n);if(vt=e,t||this.options.forceAutoScrollFallback||L||A||T){xt(e,this.options,r,t);var s=ee(r,!0);!wt||bt&&i===gt&&n===mt||(bt&&Et(),bt=setInterval((function(){var r=ee(document.elementFromPoint(i,n),!0);r!==s&&(s=r,jt()),xt(e,o.options,r,t)}),10),gt=i,mt=n)}else{if(!this.options.bubbleScroll||ee(r,!0)===U())return void jt();xt(e,this.options,ee(r,!1),!1)}}},_(e,{pluginName:"scroll",initializeByDefault:!0})}),st.mount(Ot,St);var Nt=st,Bt=u(m()),Vt=class{constructor(e,t){if(this.progressBar=null,this.fileDrop=e=>{this.swallowEvent(e),e.dataTransfer&&(this.field.touch(),this.inputElement.files=e.dataTransfer.files,this.uploadFiles(this.inputElement.files).then((()=>{this.field.inputted(),this.field.validate()})))},this.fileRemove=()=>{for(this.inputElement.value="",this.uploadedFiles=this.initialData.length>0?[{}]:[];this.dropbox.firstChild;)this.dropbox.removeChild(this.dropbox.firstChild);this.dropbox.appendChild(this.emptyDropboxItem),this.field.touch(),this.field.inputted(),this.field.validate()},this.swallowEvent=e=>{e.stopPropagation(),e.preventDefault()},this.field=e,this.inputElement=t,this.dropbox=this.field.element.querySelector("figure.dj-dropbox"),!this.dropbox)throw new Error('Element <input type="file"> requires sibling element <figure class="dj-dropbox"></figure>');if(this.chooseFileButton=this.field.element.querySelector("button.dj-choose-file"),!this.chooseFileButton)throw new Error('Element <input type="file"> requires sibling element <button class="dj-choose-file"></button>');if(this.progressBar=this.field.element.querySelector("progress"),this.progressBar&&(this.progressBar.style.visibility="hidden"),this.emptyDropboxItem=this.dropbox.querySelector("div.dj-empty-item"),!this.emptyDropboxItem)throw new Error('Element <input type="file"> requires sibling element <figure><div class="dj-empty-item"></div></figure>');const o=this.field.element.querySelector(".dj-dropbox-items");if(!o)throw new Error('Element <input type="file"> requires sibling element <template class="dj-dropbox-items"></template>');this.dropboxItemTemplate=(0,Bt.default)(o.innerHTML),this.observer=new MutationObserver((e=>this.attributesChanged(e))),this.observer.observe(this.inputElement,{attributes:!0}),this.chooseFileButton.disabled=t.disabled;const i=document.getElementById(`initial_${t.id}`);i?.textContent?(this.uploadedFiles=this.initialData=[JSON.parse(i.textContent)],this.renderDropbox()):this.uploadedFiles=this.initialData=[],this.dropbox.addEventListener("dragenter",this.swallowEvent),this.dropbox.addEventListener("dragover",this.swallowEvent),this.dropbox.addEventListener("drop",this.fileDrop),this.chooseFileButton.addEventListener("click",(()=>t.click())),t.addEventListener("change",(()=>this.uploadFiles(this.inputElement.files).then((()=>{this.field.inputted(),this.field.validate()})).catch((()=>{this.field.reportFailedUpload()})).finally((()=>this.field.touch()))))}async uploadFiles(e){return e&&0!==e.length?new Promise(((t,o)=>{const i=e.item(0);i?this.uploadFile(i,this.dropbox.clientHeight).then((e=>{this.uploadedFiles=[e],this.renderDropbox(),this.field.inputted(),t()})).catch((()=>{o()})):o()})):Promise.reject()}async uploadFile(e,t){let o=this;function i(e){const t=e.lengthComputable?e.loaded/e.total:0;o.progressBar&&(o.progressBar.style.visibility="visible",o.progressBar.value=.95*t)}const n=new FormData;return n.append("temp_file",e),n.append("image_height",t.toString()),new Promise(((e,t)=>{const r=new XMLHttpRequest;o.progressBar&&(r.addEventListener("loadstart",i),r.upload.addEventListener("progress",i,!1)),r.addEventListener("loadend",(function(){o.progressBar&&(o.progressBar.value=1,window.setTimeout((()=>o.progressBar.style.visibility="hidden"),333)),200===r.status?e(r.response):t(r.response)})),r.open("POST",this.field.form.formset.endpoint,!0);const s=this.field.form.formset.CSRFToken;s&&r.setRequestHeader("X-CSRFToken",s),r.responseType="json",r.send(n)}))}renderDropbox(){let e=[];for(const t of this.uploadedFiles)e.push(this.dropboxItemTemplate(t));e.length>0?this.dropbox.innerHTML=e.join(""):this.dropbox.replaceChildren(this.emptyDropboxItem);const t=this.dropbox.querySelector(".dj-delete-file");t&&t.addEventListener("click",this.fileRemove,{once:!0})}attributesChanged(e){for(const t of e)"attributes"===t.type&&"disabled"===t.attributeName&&this.chooseFileButton.disabled!=this.inputElement.disabled&&(this.chooseFileButton.disabled=this.inputElement.disabled)}inProgress(){return!!this.inputElement.files&&this.inputElement.files.length>this.uploadedFiles.length}resetToInitial(){this.uploadedFiles=this.initialData,this.renderDropbox()}};function Ht(e,t,o){return o=o||" ",e.length>t?e:(t-=e.length,e+(o+=o.repeat(t)).slice(0,t))}var qt=class extends Error{static buildMessage(e,t){function o(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+o(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+o(e)))}function n(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+o(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+o(e)))}function r(e){switch(e.type){case"literal":return'"'+i(e.text)+'"';case"class":const t=e.parts.map((e=>Array.isArray(e)?n(e[0])+"-"+n(e[1]):n(e)));return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function(e){const t=e.map(r);let o,i;if(t.sort(),t.length>0){for(o=1,i=1;o<t.length;o++)t[o-1]!==t[o]&&(t[i]=t[o],i++);t.length=i}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+(((s=t)?'"'+i(s)+'"':"end of input")+" found.");var s}constructor(e,t,o,i){super(),this.message=e,this.expected=t,this.found=o,this.location=i,this.name="SyntaxError","function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(this,qt.prototype):this.__proto__=qt.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,qt)}format(e){let t="Error: "+this.message;if(this.location){let o,i=null;for(o=0;o<e.length;o++)if(e[o].source===this.location.source){i=e[o].text.split(/\r\n|\n|\r/g);break}let n=this.location.start,r=this.location.source+":"+n.line+":"+n.column;if(i){let e=this.location.end,o=Ht("",n.line.toString().length," "),s=i[n.line-1],l=n.line===e.line?e.column:s.length+1;t+="\n --\x3e "+r+"\n"+o+" |\n"+n.line+" | "+s+"\n"+o+" | "+Ht("",n.column-1," ")+Ht("",l-n.column,"^")}else t+="\n at "+r}return t}};var zt=function(e,t){const o={},i=(t=void 0!==t?t:{}).grammarSource,n={Actions:5,Expression:0};let r=5;const s=[function(e,t){return t.reduce((function(e,t){return e+t[1]+t[3]}),e)},function(){return"false"},"===",g("===",!1),"==",g("==",!1),"!==",g("!==",!1),"!=",g("!=",!1),"<=",g("<=",!1),">=",g(">=",!1),"<",g("<",!1),">",g(">",!1),"+",g("+",!1),"-",g("-",!1),"*",g("*",!1),"/",g("/",!1),"&&",g("&&",!1),"&",g("&",!1),"||",g("||",!1),"|",g("|",!1),"!",g("!",!1),"(",g("(",!1),")",g(")",!1),function(e){return"("+e+")"},function(e){return"'"+e+"'"},function(e){return"this.getDataValue(["+e.split(".").map((e=>"'"+e+"'")).join(",")+"])"},"!~",g("!~",!1),function(e,t){return{successChain:e,rejectChain:t}},function(e){return{successChain:e,rejectChain:[]}},"->",g("->",!1),function(e,t){return[e].concat(t)},function(e){return[e]},function(e,t){return{funcname:e,args:t}},"()",g("()",!1),function(e){return{funcname:e,args:[]}},",",g(",",!1),function(e){return[e]},/^[ \t\n\r]/,m([" ","\t","\n","\r"],!1,!1),"[",g("[",!1),"{",g("{",!1),"]",g("]",!1),"}",g("}",!1),":",g(":",!1),function(e,t){return t},function(e,t){var o={};return[e].concat(t).forEach((function(e){o[e.name]=e.value})),o},function(e){return null!==e?e:{}},function(e,t){return{name:e,value:t}},/^[$A-Za-z_]/,m(["$",["A","Z"],["a","z"],"_"],!1,!1),/^[$0-9A-Za-z_]/,m(["$",["0","9"],["A","Z"],["a","z"],"_"],!1,!1),function(e,t){return t},function(e,t){return[e].concat(t)},function(e){return null!==e?e:[]},v("number"),function(){return parseFloat(e.substring(c,a))},".",g(".",!1),/^[1-9]/,m([["1","9"]],!1,!1),/^[eE]/,m(["e","E"],!1,!1),"0",g("0",!1),v("string"),'"',g('"',!1),function(e){return e},"'",g("'",!1),/^[^\0-\x1F"\\]/,m([["\0",""],'"',"\\"],!0,!1),'\\"',g('\\"',!1),function(){return'"'},/^[^\0-\x1F'\\]/,m([["\0",""],"'","\\"],!0,!1),"\\'",g("\\'",!1),function(){return"'"},"\\\\",g("\\\\",!1),"\\b",g("\\b",!1),"\\f",g("\\f",!1),"\\n",g("\\n",!1),"\\r",g("\\r",!1),"\\t",g("\\t",!1),"\\u",g("\\u",!1),function(e){return String.fromCharCode(parseInt(e,16))},v("boolean"),function(){return!0},function(){return!1},function(){return null},"false",g("false",!1),"true",g("true",!1),"null",g("null",!1),function(e,t){return t.reduce((function(e,t){return e+"."+t[1]}),e)},"...",g("...",!1),"..",g("..",!1),function(e,t){return e+t},function(e,t){return e+t},/^[$a-zA-Z_]/,m(["$",["a","z"],["A","Z"],"_"],!1,!1),/^[$a-zA-Z0-9_]/,m(["$",["a","z"],["A","Z"],["0","9"],"_"],!1,!1),function(e){return e instanceof Array?e.join(""):e},/^[0-9]/,m([["0","9"]],!1,!1),/^[0-9a-f]/i,m([["0","9"],["a","f"]],!1,!0)],l=[E("%;*/#;#/$;*/$$%;*/>#;!/5$;*/,$; /#$+$)($'#(#'#(\"'#&'#0H*%;*/>#;!/5$;*/,$; /#$+$)($'#(#'#(\"'#&'#&/2$;*/)$8%: %\"#!)(%'#($'#(#'#(\"'#&'#.. &%;*/& 8!:!! )"),E('2"""6"7#. &2$""6$7%. &2&""6&7\'. &2(""6(7). &2*""6*7+. &2,""6,7-. &2.""6.7/. &20""6071.} &22""6273.q &24""6475.e &26""6677.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A'),E('2B""6B7C'),E("%2D\"\"6D7E/R#;*/I$; /@$;*/7$2F\"\"6F7G/($8%:H%!\")(%'#($'#(#'#(\"'#&'#.A &;6.; &;D.5 &;$./ &%;@/' 8!:I!! )"),E("%;H/' 8!:J!! )"),E("%;&/\\#;*/S$2K\"\"6K7L/D$;*/;$;&/2$;*/)$8&:M&\"%!)(&'#(%'#($'#(#'#(\"'#&'#./ &%;&/' 8!:N!! )"),E("%;'/\\#;*/S$2O\"\"6O7P/D$;*/;$;&/2$;*/)$8&:Q&\"%!)(&'#(%'#($'#(#'#(\"'#&'#./ &%;'/' 8!:R!! )"),E('%;*/i#%;4/"!&,)/Y$2D""6D7E/J$;(/A$2F""6F7G/2$;*/)$8&:S&"$")(&\'#(%\'#($\'#(#\'#("\'#&\'#.a &%%;4/"!&,)/7#2T""6T7U/($8":V"!!)("\'#&\'#.6 &%%;4/"!&,)/\' 8!:V!! )'),E("%;)/S#;*/J$2W\"\"6W7X/;$;*/2$;(/)$8%:Q%\"$ )(%'#($'#(#'#(\"'#&'#./ &%;)/' 8!:Y!! )"),E(";6./ &;@.) &;2.# &;5"),E('$4Z""5!7[0)*4Z""5!7[&'),E("%;*/;#2\\\"\"6\\7]/,$;*/#$+#)(#'#(\"'#&'#"),E("%;*/;#2^\"\"6^7_/,$;*/#$+#)(#'#(\"'#&'#"),E("%;*/;#2`\"\"6`7a/,$;*/#$+#)(#'#(\"'#&'#"),E("%;*/;#2b\"\"6b7c/,$;*/#$+#)(#'#(\"'#&'#"),E("%;*/;#2d\"\"6d7e/,$;*/#$+#)(#'#(\"'#&'#"),E("%;*/;#2W\"\"6W7X/,$;*/#$+#)(#'#(\"'#&'#"),E(";D.5 &;2./ &;5.) &;6.# &;@"),E('%;,/#%;3/k#$%;0/2#;3/)$8":f""$ )("\'#&\'#0<*%;0/2#;3/)$8":f""$ )("\'#&\'#&/)$8":g""! )("\'#&\'#." &"/1$;./($8#:h#!!)(#\'#("\'#&\'#'),E('%;@/;#;//2$;1/)$8#:i#"" )(#\'#("\'#&\'#.L &%%;4/"!&,)/;#;//2$;1/)$8#:i#"" )(#\'#("\'#&\'#'),E('%4j""5!7k/?#$4l""5!7m0)*4l""5!7m&/#$+")("\'#&\'#'),E('%;+/#%;1/k#$%;0/2#;1/)$8":n""$ )("\'#&\'#0<*%;0/2#;1/)$8":n""$ )("\'#&\'#&/)$8":o""! )("\'#&\'#." &"/1$;-/($8#:p#!!)(#\'#("\'#&\'#'),E('<%;=." &"/L#;</C$;;." &"/5$;:." &"/\'$8$:r$ )($\'#(#\'#("\'#&\'#=." 7q'),E('2s""6s7t'),E('4u""5!7v'),E('4w""5!7x'),E("%;9/M#;=.# &;>.\" &\"/9$$;M/&#0#*;M&&&#/#$+#)(#'#(\"'#&'#"),E("%;7/9#$;M/&#0#*;M&&&#/#$+\")(\"'#&'#"),E(";?.= &%;8/3#$;M0#*;M&/#$+\")(\"'#&'#"),E('24""6475'),E('22""6273'),E('2y""6y7z'),E('<%2|""6|7}/N#%$;A0#*;A&/"!&,)/7$2|""6|7}/($8#:~#!!)(#\'#("\'#&\'#.^ &%2""67/N#%$;B0#*;B&/"!&,)/7$2""67/($8#:~#!!)(#\'#("\'#&\'#=." 7{'),E('4""5!7.: &%2""67/& 8!:! ).# &;C'),E('4""5!7.: &%2""67/& 8!:! ).# &;C'),E('2""67. &2""67. &2""67. &2""67. &2""67.y &2""67.m &%2""67/]#%%;N/>#;N/5$;N/,$;N/#$+$)($\'#(#\'#("\'#&\'#/"!&,)/($8":"! )("\'#&\'#'),E('<%;F/& 8!:! ).? &%;E/& 8!:! ).. &%;G/& 8!:! )=." 7'),E('2""67'),E('2""67'),E('2""67'),E('%;I/#$%2s""6s7t/?#;J.0 &$;M/&#0#*;M&&&#/#$+")("\'#&\'#0O*%2s""6s7t/?#;J.0 &$;M/&#0#*;M&&&#/#$+")("\'#&\'#&/)$8":""! )("\'#&\'#'),E('%2""67.5 &2""67.) &2s""6s7t/2#;J/)$8":""! )("\'#&\'#.# &;J'),E('%;K/2#;L/)$8":""! )("\'#&\'#'),E('4""5!7'),E('%$4""5!70)*4""5!7&/\' 8!:!! )'),E('4""5!7'),E('4""5!7')];let a=0,c=0;const d=[{line:1,column:1}];let u,h=0,p=[],f=0;if(void 0!==t.startRule){if(!(t.startRule in n))throw new Error("Can't start parsing from rule \""+t.startRule+'".');r=n[t.startRule]}function g(e,t){return{type:"literal",text:e,ignoreCase:t}}function m(e,t,o){return{type:"class",parts:e,inverted:t,ignoreCase:o}}function v(e){return{type:"other",description:e}}function b(t){let o,i=d[t];if(i)return i;for(o=t-1;!d[o];)o--;for(i=d[o],i={line:i.line,column:i.column};o<t;)10===e.charCodeAt(o)?(i.line++,i.column=1):i.column++,o++;return d[t]=i,i}function y(e,t){const o=b(e),n=b(t);return{source:i,start:{offset:e,line:o.line,column:o.column},end:{offset:t,line:n.line,column:n.column}}}function w(e){a<h||(a>h&&(h=a,p=[]),p.push(e))}function j(e,t,o){return new qt(qt.buildMessage(e,t),e,t,o)}function E(e){return e.split("").map((e=>e.charCodeAt(0)-32))}if(u=function t(i){const n=l[i];let r=0;const d=[];let u=n.length;const h=[],p=[];let g;for(;;){for(;r<u;)switch(n[r]){case 0:p.push(s[n[r+1]]),r+=2;break;case 1:p.push(void 0),r++;break;case 2:p.push(null),r++;break;case 3:p.push(o),r++;break;case 4:p.push([]),r++;break;case 5:p.push(a),r++;break;case 6:p.pop(),r++;break;case 7:a=p.pop(),r++;break;case 8:p.length-=n[r+1],r+=2;break;case 9:p.splice(-2,1),r++;break;case 10:p[p.length-2].push(p.pop()),r++;break;case 11:p.push(p.splice(p.length-n[r+1],n[r+1])),r+=2;break;case 12:p.push(e.substring(p.pop(),a)),r++;break;case 13:h.push(u),d.push(r+3+n[r+1]+n[r+2]),p[p.length-1]?(u=r+3+n[r+1],r+=3):(u=r+3+n[r+1]+n[r+2],r+=3+n[r+1]);break;case 14:h.push(u),d.push(r+3+n[r+1]+n[r+2]),p[p.length-1]===o?(u=r+3+n[r+1],r+=3):(u=r+3+n[r+1]+n[r+2],r+=3+n[r+1]);break;case 15:h.push(u),d.push(r+3+n[r+1]+n[r+2]),p[p.length-1]!==o?(u=r+3+n[r+1],r+=3):(u=r+3+n[r+1]+n[r+2],r+=3+n[r+1]);break;case 16:p[p.length-1]!==o?(h.push(u),d.push(r),u=r+2+n[r+1],r+=2):r+=2+n[r+1];break;case 17:h.push(u),d.push(r+3+n[r+1]+n[r+2]),e.length>a?(u=r+3+n[r+1],r+=3):(u=r+3+n[r+1]+n[r+2],r+=3+n[r+1]);break;case 18:h.push(u),d.push(r+4+n[r+2]+n[r+3]),e.substr(a,s[n[r+1]].length)===s[n[r+1]]?(u=r+4+n[r+2],r+=4):(u=r+4+n[r+2]+n[r+3],r+=4+n[r+2]);break;case 19:h.push(u),d.push(r+4+n[r+2]+n[r+3]),e.substr(a,s[n[r+1]].length).toLowerCase()===s[n[r+1]]?(u=r+4+n[r+2],r+=4):(u=r+4+n[r+2]+n[r+3],r+=4+n[r+2]);break;case 20:h.push(u),d.push(r+4+n[r+2]+n[r+3]),s[n[r+1]].test(e.charAt(a))?(u=r+4+n[r+2],r+=4):(u=r+4+n[r+2]+n[r+3],r+=4+n[r+2]);break;case 21:p.push(e.substr(a,n[r+1])),a+=n[r+1],r+=2;break;case 22:p.push(s[n[r+1]]),a+=s[n[r+1]].length,r+=2;break;case 23:p.push(o),0===f&&w(s[n[r+1]]),r+=2;break;case 24:c=p[p.length-1-n[r+1]],r+=2;break;case 25:c=a,r++;break;case 26:g=n.slice(r+4,r+4+n[r+3]).map((function(e){return p[p.length-1-e]})),p.splice(p.length-n[r+2],n[r+2],s[n[r+1]].apply(null,g)),r+=4+n[r+3];break;case 27:p.push(t(n[r+1])),r+=2;break;case 28:f++,r++;break;case 29:f--,r++;break;default:throw new Error("Invalid opcode: "+n[r]+".")}if(!(h.length>0))break;u=h.pop(),r=d.pop()}return p[0]}(r),u!==o&&a===e.length)return u;throw u!==o&&a<e.length&&w({type:"end"}),j(p,h<e.length?e.charAt(h):null,h<e.length?y(h,h+1):y(h,h))},Gt="_marked_for_removal_",Xt=document.createElement("style");Xt.innerText=':root{--django-formset-color-invalid: rgb(255, 3, 0);--django-formset-shadow-invalid: rgb(255, 3, 0, 0.25);--django-formset-color-valid: rgb(0, 122, 0)}:root{--django-formset-color-invalid: rgb(255, 3, 0);--django-formset-shadow-invalid: rgb(255, 3, 0, 0.25);--django-formset-color-valid: rgb(0, 122, 0)}select::placeholder{color:gray}select.ts-hidden-accessible{display:none}django-formset .dj-errorlist{list-style:none;margin-top:0;margin-bottom:0;margin-left:0;padding-left:0;color:var(--django-formset-color-invalid)}django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted) input[type=email]:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted) input[type=text]:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted) input[type=number]:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted) input[type=date]:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted) select:not(.dj-exempt-feedback):invalid:not(:focus),django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted) textarea:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="rgb(255, 3, 0)"><path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/></svg>\')}django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted) input[type=email]:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted) input[type=text]:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted) input[type=number]:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted) input[type=date]:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted) select:not(.dj-exempt-feedback):invalid:focus,django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted) textarea:not(.dj-exempt-feedback):invalid:focus{background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="rgb(255, 165, 0)"><path fill-rule="evenodd" d="M7.938 2.016a.146.146 0 0 0-.054.057L1.027 13.74a.176.176 0 0 0-.002.183c.016.03.037.05.054.06.015.01.034.017.066.017h13.713a.12.12 0 0 0 .066-.017.163.163 0 0 0 .055-.06.176.176 0 0 0-.003-.183L8.12 2.073a.146.146 0 0 0-.054-.057A.13.13 0 0 0 8.002 2a.13.13 0 0 0-.064.016zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/><path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/></svg>\')}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted) input[type=email]:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted) input[type=text]:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted) input[type=number]:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted) input[type=date]:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted) select:not(.dj-exempt-feedback):invalid,django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted) textarea:not(.dj-exempt-feedback):invalid{background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="rgb(255, 165, 0)"><path fill-rule="evenodd" d="M7.938 2.016a.146.146 0 0 0-.054.057L1.027 13.74a.176.176 0 0 0-.002.183c.016.03.037.05.054.06.015.01.034.017.066.017h13.713a.12.12 0 0 0 .066-.017.163.163 0 0 0 .055-.06.176.176 0 0 0-.003-.183L8.12 2.073a.146.146 0 0 0-.054-.057A.13.13 0 0 0 8.002 2a.13.13 0 0 0-.064.016zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/><path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/></svg>\')}django-formset.dj-feedback-success django-field-group.dj-dirty input[type=email]:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success django-field-group.dj-dirty input[type=text]:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success django-field-group.dj-dirty input[type=number]:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success django-field-group.dj-dirty input[type=date]:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success django-field-group.dj-dirty select:not(.dj-exempt-feedback):valid:not(:focus),django-formset.dj-feedback-success django-field-group.dj-dirty textarea:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success django-field-group.dj-dirty input[type=email]:not(.dj-exempt-feedback):valid,django-formset.dj-feedback-success django-field-group.dj-dirty input[type=text]:not(.dj-exempt-feedback):valid,django-formset.dj-feedback-success django-field-group.dj-dirty input[type=number]:not(.dj-exempt-feedback):valid,django-formset.dj-feedback-success django-field-group.dj-dirty input[type=date]:not(.dj-exempt-feedback):valid{background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="rgb(0, 122, 0)"><path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/></svg>\') !important}django-formset django-field-group{display:block}django-formset django-field-group[hidden]{display:none}django-formset django-field-group.dj-required>label,django-formset django-field-group.dj-required-any>label{font-weight:bolder}django-formset django-field-group input{background-repeat:no-repeat !important;background-position:center right !important;background-origin:content-box !important}django-formset django-field-group select,django-formset django-field-group textarea{background-image:none !important}django-formset django-field-group select.dj-concealed,django-formset django-field-group textarea.dj-concealed{display:block !important;height:1px !important;min-height:initial !important;max-height:initial !important;padding:0 !important;margin:-1px 0 0 0 !important;border:none !important;opacity:0 !important}django-formset django-field-group.dj-submitted input[type=email]:not(.dj-exempt-feedback):invalid,django-formset django-field-group.dj-submitted input[type=text]:not(.dj-exempt-feedback):invalid,django-formset django-field-group.dj-submitted input[type=number]:not(.dj-exempt-feedback):invalid,django-formset django-field-group.dj-submitted input[type=date]:not(.dj-exempt-feedback):invalid,django-formset django-field-group.dj-submitted select:not(.dj-exempt-feedback):invalid,django-formset django-field-group.dj-submitted textarea:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="rgb(255, 3, 0)"><path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/></svg>\')}django-formset django-field-group.dj-submitted input[type=email]:not(.dj-exempt-feedback):invalid:focus,django-formset django-field-group.dj-submitted input[type=text]:not(.dj-exempt-feedback):invalid:focus,django-formset django-field-group.dj-submitted input[type=number]:not(.dj-exempt-feedback):invalid:focus,django-formset django-field-group.dj-submitted input[type=date]:not(.dj-exempt-feedback):invalid:focus,django-formset django-field-group.dj-submitted select:not(.dj-exempt-feedback):invalid:focus,django-formset django-field-group.dj-submitted textarea:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset django-field-group .dj-help-text{font-style:oblique}django-formset django-field-group .dj-form-optgroup{margin-bottom:.5rem}django-formset django-field-group .dj-form-optgroup>em{margin-left:.75rem}django-formset django-field-group .dj-form-inlined{display:inline-block}django-formset django-field-group input[type=file]{width:0 !important;height:0 !important}django-formset django-field-group.dj-touched input[type=date]::-webkit-calendar-picker-indicator{opacity:0}django-formset django-field-group .dj-control-panel{display:flex}django-formset django-field-group .dj-control-panel>div{height:fit-content;margin-left:.5rem}django-formset django-field-group .dj-control-panel>div progress{width:100%;margin-top:.25rem}django-formset django-field-group figure.dj-dropbox{all:unset;display:inline-flex;align-items:center;justify-content:space-between;background-color:#f5f5f5;margin:0 0 .25rem .25rem;padding:0;list-style:none;height:8rem;min-width:8rem;outline:gray thin dotted}django-formset django-field-group figure.dj-dropbox>div.dj-empty-item{flex-grow:1;text-align:center;height:auto}django-formset django-field-group figure.dj-dropbox>div.dj-empty-item p{padding-left:.5rem;padding-right:.5rem}django-formset django-field-group figure.dj-dropbox>img{all:unset;flex-grow:1;display:block;height:inherit}django-formset django-field-group figure.dj-dropbox>figcaption{all:unset;padding:.25rem .5rem;background-color:#fff;overflow-x:hidden}django-formset django-field-group figure.dj-dropbox>figcaption dl{font-size:small;margin:0 0 .25rem 0}django-formset django-field-group figure.dj-dropbox>figcaption dl dd{margin:0}django-formset django-field-group figure.dj-dropbox>figcaption .dj-delete-file,django-formset django-field-group figure.dj-dropbox>figcaption .dj-download-file{font-weight:bold;display:inline-block;cursor:pointer;text-decoration:none}django-formset django-field-group figure.dj-dropbox>figcaption .dj-delete-file:hover,django-formset django-field-group figure.dj-dropbox>figcaption .dj-download-file:hover{text-decoration:underline}django-formset django-field-group figure.dj-dropbox>figcaption .dj-download-file{margin-left:1rem;float:right}django-formset django-field-group .dj-dual-selector{display:flex}django-formset django-field-group .dj-dual-selector .left-column,django-formset django-field-group .dj-dual-selector .right-column,django-formset django-field-group .dj-dual-selector .control-column,django-formset django-field-group .dj-dual-selector .control-panel{display:flex;flex-direction:column}django-formset django-field-group .dj-dual-selector .control-column{justify-content:center;align-items:center}django-formset django-field-group .dj-dual-selector .control-panel{padding:1rem .5rem}django-formset django-field-group .dj-dual-selector select,django-formset django-field-group .dj-dual-selector django-sortable-select{width:10rem}django-formset django-field-group .dj-dual-selector button svg{vertical-align:middle}django-formset django-field-group .dj-dual-selector.invalid .right-column input{border-color:var(--django-formset-color-invalid)}django-formset django-field-group .dj-dual-selector.invalid .right-column select,django-formset django-field-group .dj-dual-selector.invalid .right-column django-sortable-select{border-left-color:var(--django-formset-color-invalid);border-right-color:var(--django-formset-color-invalid);border-bottom-color:var(--django-formset-color-invalid)}django-formset django-field-group .dj-dual-selector.invalid .right-column select:focus,django-formset django-field-group .dj-dual-selector.invalid .right-column django-sortable-select.focus{border-top-color:var(--django-formset-color-invalid);box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}.dj-button-decorator{vertical-align:inherit;line-height:initial}.dj-button-decorator svg{vertical-align:initial}.dj-button-decorator svg .path{stroke-dasharray:1000;stroke-dashoffset:0}.dj-button-decorator svg .path.circle{-webkit-animation:dash .9s ease-in-out;animation:dash .9s ease-in-out}.dj-button-decorator svg .path.line{stroke-dashoffset:1000;-webkit-animation:dash .9s .35s ease-in-out forwards;animation:dash .9s .35s ease-in-out forwards}.dj-button-decorator svg .path.check{stroke-dashoffset:-100;-webkit-animation:dash-check .9s .35s ease-in-out forwards;animation:dash-check .9s .35s ease-in-out forwards}@-webkit-keyframes dash{0%{stroke-dashoffset:1000}100%{stroke-dashoffset:0}}@keyframes dash{0%{stroke-dashoffset:1000}100%{stroke-dashoffset:0}}@-webkit-keyframes dash-check{0%{stroke-dashoffset:-100}100%{stroke-dashoffset:900}}@keyframes dash-check{0%{stroke-dashoffset:-100}100%{stroke-dashoffset:900}}@keyframes rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}.dj-button-decorator .dj-icon{display:inline-block;width:1em;height:1em}.dj-button-decorator .dj-spinner{animation:rotate 1.5s infinite linear}',document.head.appendChild(Xt);var Ut=class extends Map{constructor(e){super();const t=e.element.querySelector("django-error-messages");if(!t)throw new Error(`<django-field-group> for '${e.name}' requires one <django-error-messages> tag.`);for(const e of t.getAttributeNames()){const o=e.replace(/([_][a-z])/g,(e=>e.toUpperCase().replace("_",""))),i=t.getAttribute(e);i&&this.set(o,i)}}},Yt=class{constructor(e,t){this.form=e,this.element=t,this.errorPlaceholder=t.querySelector(".dj-errorlist > .dj-placeholder"),this.errorMessages=new Ut(this);const o=t.classList.contains("dj-required-any"),i=Array.from(t.getElementsByTagName("INPUT")).filter((e=>e.name&&"hidden"!==e.type));for(const e of i)switch(e.type){case"checkbox":case"radio":e.addEventListener("input",(()=>{this.touch(),this.inputted()})),e.addEventListener("change",(()=>{o?this.validateCheckboxSelectMultiple():this.validate()}));break;case"file":this.fileUploader=new Vt(this,e);break;default:e.addEventListener("focus",(()=>this.touch())),e.addEventListener("input",(()=>this.inputted())),e.addEventListener("blur",(()=>this.validate()))}this.fieldElements=Array(0).concat(i);const n=Array.from(t.getElementsByTagName("SELECT")).filter((e=>e.name)).at(0);n&&(n.addEventListener("focus",(()=>this.touch())),n.addEventListener("change",(()=>{this.setDirty(),this.clearCustomError(),this.validate()})),this.fieldElements.push(n));const r=t.getElementsByTagName("TEXTAREA").item(0);r instanceof HTMLTextAreaElement&&(r.addEventListener("focus",(()=>this.touch())),r.addEventListener("input",(()=>this.inputted())),r.addEventListener("blur",(()=>this.validate())),this.fieldElements.push(r)),this.name=this.assertUniqueName(),this.initialDisabled=this.fieldElements.map((e=>e.disabled)),o?this.validateCheckboxSelectMultiple():this.validateBoundField(),this.pristineValue=new class{constructor(e){this.value=e}equals(e){return"string"==typeof this.value?this.value===e:this.value.length===e.length&&this.value.every(((t,o)=>t===e[o]))}}(this.aggregateValue()),this.updateVisibility=this.evalVisibility("show-if",!0)??this.evalVisibility("hide-if",!1)??function(){},this.updateDisabled=this.evalDisable(),this.untouch(),this.setPristine()}aggregateValue(){if(1===this.fieldElements.length){const e=this.fieldElements[0];if("checkbox"===e.type)return e.checked?e.value:"";if("select-multiple"===e.type){const t=[],o=e;for(const e in o.options)o.options[e].selected&&t.push(o.options[e].value);return t}if("file"===e.type){if(!this.fileUploader)throw new Error("fileUploader expected");return this.fileUploader.uploadedFiles}return e.value}{const e=[];for(let t of this.fieldElements)if("checkbox"===t.type)t.checked&&e.push(t.value);else if("radio"===t.type&&t.checked)return t.value;return e}}updateOperability(){this.updateVisibility(),this.updateDisabled()}assertUniqueName(){let e="__undefined__";for(const t of this.fieldElements)if("__undefined__"===e)e=t.name;else if(e!==t.name)throw new Error(`Name '${e}' mismatch on multiple input fields on '${t.name}'`);return e}evalVisibility(e,t){const o=this.fieldElements[0]?.getAttribute(e);if("string"!=typeof o)return null;try{const e=new Function("return "+zt(o,{startRule:"Expression"}));return()=>{const o=t!=Boolean(e.call(this));this.element.hasAttribute("hidden")!==o&&(this.fieldElements.forEach(((e,t)=>e.disabled=o||this.initialDisabled[t])),this.element.toggleAttribute("hidden",o))}}catch(e){throw new Error(`Error while parsing <... show-if/hide-if="${o}">: ${e}.`)}}evalDisable(){const e=this.fieldElements[0]?.getAttribute("disable-if");if("string"!=typeof e)return()=>{};try{const t=new Function("return "+zt(e,{startRule:"Expression"}));return()=>{const e=t.call(this);this.fieldElements.forEach(((t,o)=>t.disabled=e||this.initialDisabled[o]))}}catch(t){throw new Error(`Error while parsing <... disable-if="${e}">: ${t}.`)}}getDataValue(e){return this.form.getDataValue(e)}inputted(){this.pristineValue.equals(this.aggregateValue())?this.setPristine():this.setDirty(),this.clearCustomError()}clearCustomError(){this.form.clearCustomErrors(),this.errorPlaceholder&&(this.errorPlaceholder.innerHTML="");for(const e of this.fieldElements)e.validity.customError&&e.setCustomValidity("")}resetToInitial(){this.fileUploader&&this.fileUploader.resetToInitial(),this.untouch(),this.setPristine(),this.clearCustomError()}disableAllFields(){this.fieldElements.forEach((e=>e.disabled=!0))}reenableAllFields(){this.fieldElements.forEach(((e,t)=>e.disabled=this.initialDisabled[t]))}touch(){this.element.classList.remove("dj-untouched"),this.element.classList.remove("dj-validated"),this.element.classList.add("dj-touched")}untouch(){this.element.classList.remove("dj-touched"),this.element.classList.add("dj-untouched")}setDirty(){this.element.classList.remove("dj-submitted"),this.element.classList.remove("dj-pristine"),this.element.classList.add("dj-dirty")}setPristine(){this.element.classList.remove("dj-dirty"),this.element.classList.add("dj-pristine")}setSubmitted(){this.element.classList.add("dj-submitted")}validate(){let e=null;for(e of this.fieldElements)if(!e.validity.valid)break;if(e&&!e.validity.valid){for(const[t,o]of this.errorMessages)if(e.validity[t]){this.form.formset.showFeedbackMessages&&this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=o),e=null;break}this.form.formset.showFeedbackMessages&&e instanceof HTMLInputElement&&this.validateInput(e)}this.form.validate()}validateCheckboxSelectMultiple(){let e=!1;for(const t of this.fieldElements){if("checkbox"!==t.type)throw new Error("Expected input element of type 'checkbox'.");t.checked?e=!0:t.setCustomValidity(this.errorMessages.get("customError")??"")}if(e)for(const e of this.fieldElements)e.setCustomValidity("");else void 0!==this.pristineValue&&this.errorPlaceholder&&this.form.formset.showFeedbackMessages&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("customError")??"");return this.form.validate(),e}validateInput(e){if("text"===e.type&&e.value){if(e.minLength>0&&e.value.length<e.minLength)return this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("tooShort")??""),!1;if(e.maxLength>0&&e.value.length>e.maxLength)return this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("tooLong")??""),!1}return"file"!==e.type||!this.fileUploader||!this.fileUploader.inProgress()||(this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("typeMismatch")??""),!1)}validateBoundField(){if(1!==this.fieldElements.length||!(this.fieldElements[0]instanceof HTMLInputElement))return;const e=this.fieldElements[0];if(e.value&&"text"===e.type){if(e.minLength>0&&e.value.length<e.minLength)return e.setCustomValidity(this.errorMessages.get("tooShort")??"");if(e.maxLength>0&&e.value.length>e.maxLength)return e.setCustomValidity(this.errorMessages.get("tooLong")??"")}}setValidationError(){let e;for(e of this.fieldElements)if(!e.validity.valid)break;for(const[t,o]of this.errorMessages)if(e&&e.validity[t])return this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=o,e.setCustomValidity(o)),!1;return!(e instanceof HTMLInputElement)||this.validateInput(e)}reportCustomError(e){this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=e),this.fieldElements[0].setCustomValidity(e)}reportFailedUpload(){this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("badInput")??"File upload failed")}},Kt=class{constructor(e,t){this.func=e,this.args=t}},Wt=class{constructor(e,t){this.successActions=Array(0),this.rejectActions=Array(0),this.formset=e,this.element=t,this.initialClass=t.getAttribute("class")??"",this.isAutoDisabled=!!JSON.parse((t.getAttribute("auto-disable")??"false").toLowerCase()),this.decoratorElement=t.querySelector(".dj-button-decorator"),this.originalDecorator=this.decoratorElement?.cloneNode(!0),this.spinnerElement=document.createElement("i"),this.spinnerElement.classList.add("dj-icon","dj-spinner"),this.spinnerElement.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11.997 11.999" version="1.1">\n  <path d="m 9.0361772,8.0640108 2.5274408,3.0120872 a 0.25,0.25 0 0 1 -0.190663,0.410623 l -3.0715852,0.01093 A 0.25,0.25 0 0 1 8.0545393,11.203495 L 8.5986838,8.1804732 A 0.25,0.25 0 0 1 9.0361772,8.0640108 Z M 0.43342482,0.92309736 2.9608657,3.9351841 A 0.25,0.25 0 0 0 3.3983591,3.8187217 L 3.9425036,0.79569959 A 0.25,0.25 0 0 0 3.6956732,0.50153852 L 0.62408782,0.5124739 a 0.25,0.25 0 0 0 -0.190663,0.41062346 z" fill="currentColor" />\n  <path fill-rule="evenodd" d="M 9.8287438,2.7856595 C 8.8311374,1.5967585 7.3973548,0.98793969 5.9568432,0.99961397 A 0.5,0.5 0 1 1 5.9484582,1.8078279e-4 6.002,6.002 0 0 1 10.56794,9.8894947 L 9.9142251,9.1104275 a 5.002,5.002 45 0 0 -0.085481,-6.324768 z m -7.745926,0.1031079 a 5.002,5.002 45 0 0 3.9573819,8.1108136 0.5,0.5 0 1 1 0.00839,0.999433 6.002,6.002 0 0 1 -4.6194819,-9.8893138 z" fill="currentColor" />\n</svg>\n',this.okayElement=document.createElement("i"),this.okayElement.classList.add("dj-icon","dj-okay"),this.okayElement.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-4 0 136.2 136.2" version="1.1">\n  <circle class="path circle" fill="none" stroke="currentColor" stroke-width="12" stroke-miterlimit="10" cx="64.1" cy="68.1" r="62.1"/>\n  <polyline class="path check" fill="none" stroke="currentColor" stroke-width="12" stroke-linecap="round" stroke-miterlimit="10" points="100.2,40.2 51.5,88.8 29.8,67.5 "/>\n</svg>\n',this.bummerElement=document.createElement("i"),this.bummerElement.classList.add("dj-icon","dj-bummer"),this.bummerElement.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 136.2 136.2" version="1.1">\n<circle class="path circle" fill="none" stroke="currentColor" stroke-width="12" stroke-miterlimit="10" cx="68.1" cy="68.1" r="62.1"/>\n  <line class="path line" fill="none" stroke="currentColor" stroke-width="12" stroke-linecap="round" stroke-miterlimit="10" x1="37.4" y1="40.9" x2="98.8" y2="95.3"/>\n  <line class="path line" fill="none" stroke="currentColor" stroke-width="12" stroke-linecap="round" stroke-miterlimit="10" x1="98.8" y1="41" x2="37.4" y2="95.2"/>\n</svg>\n',this.parseActionsQueue(t.getAttribute("click")),t.addEventListener("click",(()=>this.clicked()))}clicked(){let e;for(const[t,o]of this.successActions.entries())e=e?e.then(o.func.apply(this,o.args)):o.func.apply(this,o.args)();if(e){for(const[t,o]of this.rejectActions.entries())e=0===t?e.catch(o.func.apply(this,o.args)):e.then(o.func.apply(this,o.args));e.finally(this.restore.apply(this))}}autoDisable(e){this.isAutoDisabled&&(this.element.disabled=!e)}disable(){return e=>(this.element.disabled=!0,Promise.resolve(e))}enable(){return e=>(this.element.disabled=!1,Promise.resolve(e))}submit(e){return()=>new Promise(((t,o)=>{this.formset.submit(e).then((e=>e instanceof Response&&200===e.status?t(e):o(e)))}))}reset(){return e=>(this.formset.resetToInitial(),Promise.resolve(e))}reload(){return e=>(location.reload(),Promise.resolve(e))}proceed(e){return t=>("string"==typeof e&&e.length>0?location.href=e:t instanceof Response&&200===t.status&&t.json().then((e=>{e.success_url?location.href=e.success_url:console.warn("Neither a success-, nor a proceed-URL are given.")})),Promise.resolve(t))}delay(e){return t=>new Promise((o=>this.timeoutHandler=window.setTimeout((()=>{this.timeoutHandler=void 0,o(t)}),e)))}spinner(){return e=>(this.decoratorElement?.replaceChildren(this.spinnerElement),Promise.resolve(e))}okay(e){return this.decorate(this.okayElement,e)}bummer(e){return this.decorate(this.bummerElement,e)}addClass(e){return t=>(this.element.classList.add(e),Promise.resolve(t))}removeClass(e){return t=>(this.element.classList.remove(e),Promise.resolve(t))}toggleClass(e){return t=>(this.element.classList.toggle(e),Promise.resolve(t))}emit(e,t){return o=>{const i={bubbles:!0,cancelable:!0};return void 0!==t?(Object.assign(i,{detail:t}),this.element.dispatchEvent(new CustomEvent(e,i))):this.element.dispatchEvent(new Event(e,i)),Promise.resolve(o)}}intercept(){return e=>(console.info(e),Promise.resolve(e))}clearErrors(){return e=>(this.formset.clearErrors(),Promise.resolve(e))}scrollToError(){return e=>{const t=this.formset.findFirstErrorReport();return t&&t.scrollIntoView({behavior:"smooth"}),Promise.resolve(e)}}noop(){return e=>Promise.resolve(e)}restore(){return()=>{this.element.disabled=!1,this.element.setAttribute("class",this.initialClass),this.originalDecorator&&this.decoratorElement?.replaceChildren(...this.originalDecorator.cloneNode(!0).childNodes)}}decorate(e,t){return o=>(this.decoratorElement?.replaceChildren(e),"number"!=typeof t?Promise.resolve(o):new Promise((e=>this.timeoutHandler=window.setTimeout((()=>{this.timeoutHandler=void 0,e(o)}),t))))}parseActionsQueue(e){if(!e)return;let t=this;function o(e,o){for(let i of o){const o=t[i.funcname];if("function"!=typeof o)throw new Error(`Unknown function '${i.funcname}'.`);e.push(new Kt(o,i.args))}0===e.length&&e.push(new Kt(t.noop,[]))}try{const t=zt(e,{startRule:"Actions"});o(this.successActions,t.successChain),o(this.rejectActions,t.rejectChain)}catch(t){throw new Error(`Error while parsing <button click="${e}">: ${t}.`)}}abortAction(){this.timeoutHandler&&(clearTimeout(this.timeoutHandler),this.timeoutHandler=void 0)}},Qt=class{constructor(e,t){this.errorList=null,this.errorPlaceholder=null,this.fieldGroups=Array(0),this.hiddenInputFields=Array(0),this.markedForRemoval=!1,this.formset=e,this.element=t,this.path=this.name?.split(".")??[];const o=t.querySelector("fieldset");this.fieldset=o?new class{constructor(e,t){this.form=e,this.element=t,this.updateVisibility=this.evalVisibility("show-if",!0)??this.evalVisibility("hide-if",!1)??function(){},this.updateDisabled=this.evalDisable()}evalVisibility(e,t){const o=this.element.getAttribute(e);if("string"!=typeof o)return null;try{const e=new Function("return "+zt(o,{startRule:"Expression"}));return()=>{const o=t!=Boolean(e.call(this));this.element.hasAttribute("hidden")!==o&&this.element.toggleAttribute("hidden",o)}}catch(e){throw new Error(`Error while parsing <fieldset show-if/hide-if="${o}">: ${e}.`)}}evalDisable(){const e=this.element.getAttribute("disable-if");if("string"!=typeof e)return()=>{};try{const t=new Function("return "+zt(e,{startRule:"Expression"}));return()=>this.element.disabled=t.call(this)}catch(t){throw new Error(`Error while parsing <fieldset disable-if="${e}">: ${t}.`)}}getDataValue(e){return this.form.getDataValue(e)}updateOperability(){this.updateVisibility(),this.updateDisabled()}}(this,o):null;const i=t.querySelector(".dj-form-errors > .dj-errorlist > .dj-placeholder");i&&(this.errorList=i.parentElement,this.errorPlaceholder=this.errorList.removeChild(i))}aggregateValues(){const e=new Map;for(const t of this.fieldGroups)e.set(t.name,t.aggregateValue());for(const t of this.hiddenInputFields.filter((e=>"hidden"===e.type)))e.set(t.name,t.value);return e}get name(){return this.element.getAttribute("name")}get formId(){return this.element.getAttribute("id")}getAbsPath(){return["formset_data",...this.path]}getDataValue(e){if(""!==e[0])return this.formset.getDataValue(e);const t=[...this.path],o=e.filter((e=>""!==e)),i=e.length-o.length;return t.splice(t.length-i+1),t.push(...o),this.formset.getDataValue(t)}updateOperability(){this.fieldset?.updateOperability();for(const e of this.fieldGroups)e.updateOperability()}setSubmitted(){for(const e of this.fieldGroups)e.setSubmitted()}validate(){this.formset.validate()}isValid(){let e=!0;for(const t of this.fieldGroups)e=t.setValidationError()&&e;return e}checkValidity(){return this.element.checkValidity()}reportValidity(){this.element.reportValidity()}clearCustomErrors(){for(;this.errorList&&this.errorList.lastChild;)this.errorList.removeChild(this.errorList.lastChild)}resetToInitial(){this.element.reset();for(const e of this.fieldGroups)e.resetToInitial()}toggleForRemoval(e){this.markedForRemoval=e;for(const t of this.fieldGroups)e?(t.resetToInitial(),t.disableAllFields()):t.reenableAllFields()}reportCustomErrors(e){this.clearCustomErrors();const t=e.get("__all__");if(this.errorList&&t instanceof Array&&this.errorPlaceholder)for(const e of t){const t=this.errorPlaceholder.cloneNode();t.innerHTML=e,this.errorList.appendChild(t)}for(const t of this.fieldGroups){const o=e.get(t.name);o instanceof Array&&o.length>0&&t.reportCustomError(o[0])}}findFirstErrorReport(){if(this.errorList?.textContent)return this.element;for(const e of this.fieldGroups)if(e.errorPlaceholder?.textContent)return e.element;return null}},Jt=class{constructor(e,t,o,i){this.forms=Array(0),this.children=Array(0),this.markedForRemoval=!1,this.formset=e,this.element=t,this.parent=o,this.findFormCollections()}findFormCollections(){for(const e of Jt.getChildCollections(this.element))this.children.push(e.hasAttribute("sibling-position")?new Zt(this.formset,e,this):new Jt(this.formset,e,this));for(const e of this.children)e.updateRemoveButtonAttrs();this.formCollectionTemplate=eo.findFormCollectionTemplate(this.formset,this.element,this)}assignForms(e){this.forms=e.filter((e=>e.element.parentElement?.isEqualNode(this.element)));for(const t of this.children)t.assignForms(e)}updateRemoveButtonAttrs(){}disconnect(){this.forms.forEach((e=>this.formset.removeForm(e))),this.children.forEach((e=>e.disconnect())),this.formCollectionTemplate?.disconnect(),this.element.remove()}toggleForRemoval(e){this.markedForRemoval=e;for(const t of this.forms)t.toggleForRemoval(e);for(const t of this.children)t.toggleForRemoval(e);this.formCollectionTemplate&&(this.formCollectionTemplate.markedForRemoval=e,this.formCollectionTemplate.updateAddButtonAttrs()),this.element.classList.toggle("dj-marked-for-removal",this.markedForRemoval)}resetToInitial(){if(this.toggleForRemoval(!1),Jt.resetCollectionsToInitial(this.children),this.formCollectionTemplate){const e=this.formCollectionTemplate.prefix,t="0"===e?0:e.split(".").length;this.children.forEach(((e,o)=>e.repositionForms(t,o))),this.formCollectionTemplate.updateAddButtonAttrs()}return!1}repositionSiblings(){}repositionForms(e,t){this.forms.forEach((o=>{o.path[e]=String(t),o.element.setAttribute("name",o.path.join("."))})),this.children.forEach((o=>o.repositionForms(e,t)))}static getChildCollections(e){const t=e.querySelector("django-form-collection")?.parentElement;return t?t.querySelectorAll(":scope > django-form-collection"):[]}static resetCollectionsToInitial(e){const t=Array(0);for(const o of e)o.resetToInitial()&&t.push(o);t.forEach((t=>e.splice(e.indexOf(t),1))),e.sort(((e,t)=>e instanceof Zt&&t instanceof Zt?e.initialPosition-t.initialPosition:0));let o=null;for(const t of e)t instanceof Zt&&(0===t.initialPosition?t.element.parentElement?.insertAdjacentElement("afterbegin",t.element):o?.insertAdjacentElement("afterend",t.element),o=t.element);e.forEach((e=>e.repositionSiblings()))}},Zt=class extends Jt{constructor(e,t,o,i){super(e,t,o),this.minSiblings=0,this.maxSiblings=null,this.justAdded=!1,this.removeCollection=()=>{const e=this.parent?.children??this.formset.formCollections;this.justAdded?(this.disconnect(),e.splice(e.indexOf(this),1),this.repositionSiblings()):(this.toggleForRemoval(!this.markedForRemoval),this.removeButton.disabled=!this.markedForRemoval),e.forEach((e=>e.updateRemoveButtonAttrs()));(this.parent?.formCollectionTemplate??this.formset.formCollectionTemplate).updateAddButtonAttrs()},this.justAdded=i??!1;const n=t.getAttribute("sibling-position");if(!n)throw new Error("Missing argument 'sibling-position' in <django-form-collection>");this.position=this.initialPosition=parseInt(n);const r=t.getAttribute("min-siblings");if(!r)throw new Error("Missing argument 'min-siblings' in <django-form-collection>");this.minSiblings=parseInt(r);const s=t.getAttribute("max-siblings");s&&(this.maxSiblings=parseInt(s));const l=t.querySelector(":scope > button.remove-collection");if(!l)throw new Error('<django-form-collection> with siblings requires child element <button class="remove-collection">');this.removeButton=l,this.removeButton.addEventListener("click",this.removeCollection)}disconnect(){this.removeButton.removeEventListener("click",this.removeCollection),super.disconnect()}repositionSiblings(){(this.parent?.children??this.formset.formCollections).forEach(((e,t)=>{e instanceof Zt&&(e.position=t,e.element.setAttribute("sibling-position",String(t)))}))}updateRemoveButtonAttrs(){if(!this.removeButton)return;const e=(this.parent?.children??this.formset.formCollections).filter((e=>!e.markedForRemoval)).length;this.markedForRemoval?this.maxSiblings?this.removeButton.disabled=e>=this.maxSiblings:this.removeButton.disabled=!1:this.removeButton.disabled=e<=this.minSiblings}resetToInitial(){return this.justAdded?(this.disconnect(),!0):(super.resetToInitial(),!1)}},eo=class{constructor(e,t,o){this.maxSiblings=null,this.baseContext=new Map,this.markedForRemoval=!1,this.resortSiblings=e=>{const t=e.oldDraggableIndex??NaN,o=e.newDraggableIndex??NaN;if(!isFinite(t)||!isFinite(o)||t===o)return;const i=this.parent?.children??this.formset.formCollections;if(i.at(t)instanceof Zt){const e=i.splice(t,1);i.splice(o,0,...e),e.at(0).repositionSiblings();const n="0"===this.prefix?0:this.prefix.split(".").length;i.forEach(((e,t)=>e.repositionForms(n,t))),this.formset.validate()}},this.appendFormCollectionSibling=()=>{const e=Object.fromEntries(this.baseContext);e.position=(this.getHighestPosition()+1).toString(),e.position_1="${position}";for(let t=1;t<10;++t)e[`position_${t+1}`]=`\${position_${t}}`;const t=this.renderEmptyCollection(e);this.element.insertAdjacentHTML("beforebegin",t);const o=this.element.previousElementSibling;if(!(o instanceof HTMLElement))throw new Error("Unable to insert empty <django-form-collection> element.");const i=this.parent?.children??this.formset.formCollections;i.push(new Zt(this.formset,o,this.parent,!0)),this.formset.findForms(o),this.formset.assignFieldsToForms(o),this.formset.assignFormsToCollections(),this.formset.validate(),i.forEach((e=>e.updateRemoveButtonAttrs())),this.updateAddButtonAttrs()},this.formset=e,this.element=t,this.parent=o;const i=t.innerHTML.matchAll(/\$\{([^} ]+)\}/g);for(const e of i)this.baseContext.set(e[1],e[0]);const n=t.getAttribute("prefix");if(!n)throw new Error('<template class="empty-collection" ...> requires attribute "prefix"');this.prefix=n,e.pushTemplatePrefix(this.prefix),this.renderEmptyCollection=(0,y.default)(t.innerHTML),t.nextElementSibling?.matches("button.add-collection")&&(this.addButton=t.nextElementSibling,this.addButton.addEventListener("click",this.appendFormCollectionSibling));const r=this.element.content.querySelector("django-form-collection")?.getAttribute("max-siblings");r&&(this.maxSiblings=parseInt(r)),t.hasAttribute("sortable")&&new Nt(t.parentElement,{animation:150,handle:"django-form-collection[sibling-position]:not(.dj-marked-for-removal) > .collection-drag-handle",draggable:"django-form-collection[sibling-position]",selectedClass:"selected",ghostClass:"dj-ghost-collection",onEnd:this.resortSiblings})}getHighestPosition(){let e=-1;const t=this.parent?this.parent.children:this.formset.formCollections;for(const o of t.filter((e=>e instanceof Zt)))e=Math.max(e,o.position);return e}disconnect(){this.formset.popTemplatePrefix(this.prefix),this.addButton?.removeEventListener("click",this.appendFormCollectionSibling)}updateAddButtonAttrs(){if(!this.addButton)return;if(this.markedForRemoval)return void(this.addButton.disabled=!0);const e=(this.parent?.children??this.formset.formCollections).filter((e=>!e.markedForRemoval)).length;this.addButton.disabled=null!==this.maxSiblings&&e>=this.maxSiblings}static findFormCollectionTemplate(e,t,o){const i=t.querySelector(":scope > .collection-siblings > template.empty-collection");if(i){const t=new eo(e,i,o);return t.updateAddButtonAttrs(),t}}},to=Symbol("DjangoFormset"),oo=class extends HTMLElement{constructor(){super(),this[to]=new class{constructor(e){this.buttons=Array(0),this.forms=Array(0),this.formCollections=Array(0),this.collectionErrorsList=new Map,this.abortController=new AbortController,this.emptyCollectionPrefixes=Array(0),this.data={},this.element=e,this.showFeedbackMessages=this.parseWithholdFeedback(),this.CSRFToken=this.element.getAttribute("csrf-token")}connectedCallback(){this.findButtons(),this.findForms(),this.findFormCollections(),this.findCollectionErrorsList(),this.assignFieldsToForms(),this.assignFormsToCollections(),window.setTimeout((()=>this.validate()),0)}get endpoint(){return this.element.getAttribute("endpoint")??""}get forceSubmission(){return this.element.hasAttribute("force-submission")}parseWithholdFeedback(){let e=!0;const t=this.element.getAttribute("withhold-feedback")?.split(" ")??[],o=new Set(["dj-feedback-errors","dj-feedback-warnings","dj-feedback-success"]);for(const i of t)switch(i.toLowerCase()){case"messages":e=!1;break;case"errors":o.delete("dj-feedback-errors");break;case"warnings":o.delete("dj-feedback-warnings");break;case"success":o.delete("dj-feedback-success");break;default:throw new Error(`Unknown value in <django-formset withhold-feedback="${i}">.`)}return o.forEach((e=>this.element.classList.add(e))),e}pushTemplatePrefix(e){this.emptyCollectionPrefixes.push(e)}popTemplatePrefix(e){const t=this.emptyCollectionPrefixes.indexOf(e);t>=0&&this.emptyCollectionPrefixes.splice(t,1)}assignFieldsToForms(e){e=e??this.element;for(const t of e.querySelectorAll("INPUT, SELECT, TEXTAREA")){const e=t.getAttribute("form");let o;if(e){const t=this.forms.filter((t=>t.formId&&t.formId===e));if(t.length>1)throw new Error(`More than one form has id="${e}"`);if(1!==t.length)continue;o=t[0]}else{const e=t.closest("form");if(!e)continue;const i=this.forms.filter((t=>t.element===e));if(1!==i.length)continue;o=i[0]}const i=t.closest("django-field-group");if(i)0===o.fieldGroups.filter((e=>e.element===i)).length&&o.fieldGroups.push(new Yt(o,i));else if("INPUT"===t.nodeName&&"hidden"===t.type){const e=t;o.hiddenInputFields.includes(e)||o.hiddenInputFields.push(e)}}}findForms(e){e=e??this.element;for(const t of e.getElementsByTagName("FORM")){const e=new Qt(this,t);this.forms.push(e)}this.checkForUniqueness()}checkForUniqueness(){const e=Array(0);if(this.forms.length>1)for(const t of this.forms){if(!t.name)throw new Error("Multiple <form>-elements in a <django-formset> require a unique name each.");if(t.name in e)throw new Error(`Detected more than one <form name="${t.name}"> in <django-formset>.`);e.push(t.name)}}findFormCollections(){for(const e of Jt.getChildCollections(this.element))this.formCollections.push(e.hasAttribute("sibling-position")?new Zt(this,e):new Jt(this,e));this.formCollections.forEach((e=>e.updateRemoveButtonAttrs())),this.formCollectionTemplate=eo.findFormCollectionTemplate(this,this.element)}findCollectionErrorsList(){for(const e of this.element.getElementsByClassName("dj-collection-errors")){const t=e.getAttribute("prefix")??"",o=e.querySelector("ul.dj-errorlist");this.collectionErrorsList.set(t,o)}}findButtons(){this.buttons.length=0;for(const e of this.element.getElementsByTagName("BUTTON"))e.hasAttribute("click")&&this.buttons.push(new Wt(this,e))}assignFormsToCollections(){for(const e of this.formCollections)e.assignForms(this.forms)}removeForm(e){this.forms.splice(this.forms.indexOf(e),1)}aggregateValues(){this.data={};for(const e of this.forms)(0,b.default)(this.data,e.getAbsPath(),Object.fromEntries(e.aggregateValues()));for(const e of this.forms)e.markedForRemoval||e.updateOperability()}validate(){let e=!0;for(const t of this.forms)e=(t.markedForRemoval||t.checkValidity())&&e;for(const t of this.buttons)t.autoDisable(e);return this.aggregateValues(),e}buildBody(e){let t;function o(e,i){if(1!==i.length)if(isNaN(parseInt(i[1]))){const t=e[i[0]]??{};o(t,i.slice(1));const n=parseInt(i[0]);isNaN(n)?e[i[0]]=t:e[n]=c(c({},e[n]),t)}else{if(Array.isArray(e))throw new Error("Invalid form structure: Contains nested arrays.");const t=e[i[0]]??[];if(!Array.isArray(t))throw new Error("Invalid form structure: Inner array is missing.");o(t,i.slice(1)),e[i[0]]=t}else Array.isArray(e)?e.indexOf(t)<0&&e.push(t):e[i[0]]=t}const i={};for(const e of this.emptyCollectionPrefixes){const n=["formset_data",...e.split(".")];t=(0,v.default)(i,n)??[],o(i,n)}for(const n of this.forms){if(!n.name)return Object.assign({},this.data,{_extra:e});const r=n.getAbsPath();t=(0,v.default)(this.data,r),n.markedForRemoval&&(t[Gt]=Gt),o(i,r)}return Object.assign({},i,{_extra:e})}async submit(e){let t=!0;if(this.setSubmitted(),!this.forceSubmission)for(const e of this.forms)t=(e.markedForRemoval||e.isValid())&&t;if(t){if(!this.endpoint)throw new Error("<django-formset> requires attribute 'endpoint=\"server endpoint\"' for submission");const t=new Headers;t.append("Accept","application/json"),t.append("Content-Type","application/json"),this.CSRFToken&&t.append("X-CSRFToken",this.CSRFToken);const o=await fetch(this.endpoint,{method:"POST",headers:t,body:JSON.stringify(this.buildBody(e)),signal:this.abortController.signal});switch(o.status){case 200:this.clearErrors();for(const e of this.forms)e.element.dispatchEvent(new Event("submitted"));return o;case 422:this.clearErrors();const e=await o.json();return this.reportErrors(e),o;default:console.warn(`Unknown response status: ${o.status}`)}}else{this.clearErrors();for(const e of this.forms)e.reportValidity()}}reportErrors(e){for(const t of this.forms){const o=t.name?(0,v.default)(e,t.name.split("."),null):e;o?(t.reportCustomErrors(new Map(Object.entries(o))),t.reportValidity()):t.clearCustomErrors()}for(const[t,o]of this.collectionErrorsList){let i=t?t.split("."):[];i=[...i,"0","_collection_errors_"];for(const t of(0,v.default)(e,i,[])){const e=document.createElement("li");e.classList.add("dj-placeholder"),e.innerText=t,o.appendChild(e)}}}resetToInitial(){Jt.resetCollectionsToInitial(this.formCollections),this.formCollectionTemplate?.updateAddButtonAttrs(),this.forms.forEach((e=>e.resetToInitial()))}abort(){for(const e of this.buttons)e.abortAction();this.abortController.abort()}setSubmitted(){for(const e of this.forms)e.setSubmitted()}getDataValue(e){const t=["formset_data",...e];return(0,v.default)(this.data,t,null)}findFirstErrorReport(){for(const e of this.forms){const t=e.findFirstErrorReport();if(t)return t}return null}clearErrors(){for(const e of this.forms)e.clearCustomErrors();for(const e of this.collectionErrorsList.values())for(;e.firstElementChild;)e.removeChild(e.firstElementChild)}}(this)}static get observedAttributes(){return["endpoint","withhold-messages","force-submission"]}connectedCallback(){this[to].connectedCallback()}async submit(e){return this[to].submit(e)}async abort(){return this[to].abort()}async reset(){return this[to].resetToInitial()}};function io(e,t){e.split(/\s+/).forEach((e=>{t(e)}))}var no,ro=class{constructor(){this._events={}}on(e,t){io(e,(e=>{this._events[e]=this._events[e]||[],this._events[e].push(t)}))}off(e,t){var o=arguments.length;0!==o?io(e,(e=>{if(1===o)return delete this._events[e];e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)})):this._events={}}trigger(e,...t){var o=this;io(e,(e=>{if(e in o._events!=!1)for(let i of o._events[e])i.apply(o,t)}))}};var so,lo="[-]",ao=new RegExp(lo,"gu"),co={"":"ae","":"a","":"o"},uo=new RegExp(Object.keys(co).join("|"),"gu"),ho=[[0,65535]],po=e=>e.normalize("NFKD").replace(ao,"").toLowerCase().replace(uo,(function(e){return co[e]||e})),fo=(e,t="|")=>{if(1===e.length&&null!=e[0])return e[0];var o=1;return e.forEach((e=>{o=Math.max(o,e.length)})),1==o?"["+e.join("")+"]":"(?:"+e.join(t)+")"},go=e=>{const t=e.map((e=>jo(e)));return fo(t)},mo=e=>{if(1===e.length)return[[e]];var t=[];return mo(e.substring(1)).forEach((function(o){var i=o.slice(0);i[0]=e.charAt(0)+i[0],t.push(i),(i=o.slice(0)).unshift(e.charAt(0)),t.push(i)})),t},vo=e=>{void 0===so&&(so=(e=>{var t={};e.forEach((e=>{for(let o=e[0];o<=e[1];o++){let e=String.fromCharCode(o),i=po(e);if(i==e.toLowerCase())continue;if(i.length>3)continue;const n=t[i]||[i],r=new RegExp(go(n),"iu");e.match(r)||(n.push(e),t[i]=n)}})),Object.keys(t).forEach((e=>{(t[e]||[]).length<2&&delete t[e]}));let o=Object.keys(t).sort(((e,t)=>t.length-e.length));no=new RegExp("("+go(o)+"[-]*)","gu");var i={};return o.sort(((e,t)=>e.length-t.length)).forEach((e=>{var o=mo(e).map((e=>(e=e.map((e=>t.hasOwnProperty(e)?go(t[e]):e)),fo(e,""))));i[e]=fo(o)})),i})(ho));return e.normalize("NFKD").toLowerCase().split(no).map((e=>{const t=po(e);return""==t?"":so.hasOwnProperty(t)?so[t]:e})).join("")},bo=(e,t)=>{if(e)return e[t]},yo=(e,t)=>{if(e){for(var o,i=t.split(".");(o=i.shift())&&(e=e[o]););return e}},wo=(e,t,o)=>{var i,n;return e?-1===(n=(e+="").search(t.regex))?0:(i=t.string.length/e.length,0===n&&(i+=.5),i*o):0},jo=e=>(e+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),Eo=(e,t)=>{var o=e[t];if("function"==typeof o)return o;o&&!Array.isArray(o)&&(e[t]=[o])},xo=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var o in e)e.hasOwnProperty(o)&&t(e[o],o)},_o=(e,t)=>"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=po(e+"").toLowerCase())>(t=po(t+"").toLowerCase())?1:t>e?-1:0,So=class{constructor(e,t){this.items=e,this.settings=t||{diacritics:!0}}tokenize(e,t,o){if(!e||!e.length)return[];const i=[],n=e.split(/\s+/);var r;return o&&(r=new RegExp("^("+Object.keys(o).map(jo).join("|")+"):(.*)$")),n.forEach((e=>{let o,n=null,s=null;r&&(o=e.match(r))&&(n=o[1],e=o[2]),e.length>0&&(s=this.settings.diacritics?vo(e):jo(e),t&&(s="\\b"+s)),i.push({string:e,regex:s?new RegExp(s,"iu"):null,field:n})})),i}getScoreFunction(e,t){var o=this.prepareSearch(e,t);return this._getScoreFunction(o)}_getScoreFunction(e){const t=e.tokens,o=t.length;if(!o)return function(){return 0};const i=e.options.fields,n=e.weights,r=i.length,s=e.getAttrFn;if(!r)return function(){return 1};const l=1===r?function(e,t){const o=i[0].field;return wo(s(t,o),e,n[o])}:function(e,t){var o=0;if(e.field){const i=s(t,e.field);!e.regex&&i?o+=1/r:o+=wo(i,e,1)}else xo(n,((i,n)=>{o+=wo(s(t,n),e,i)}));return o/r};return 1===o?function(e){return l(t[0],e)}:"and"===e.options.conjunction?function(e){for(var i,n=0,r=0;n<o;n++){if((i=l(t[n],e))<=0)return 0;r+=i}return r/o}:function(e){var i=0;return xo(t,(t=>{i+=l(t,e)})),i/o}}getSortFunction(e,t){var o=this.prepareSearch(e,t);return this._getSortFunction(o)}_getSortFunction(e){var t,o,i;const n=this,r=e.options,s=!e.query&&r.sort_empty?r.sort_empty:r.sort,l=[],a=[];if("function"==typeof s)return s.bind(this);const c=function(t,o){return"$score"===t?o.score:e.getAttrFn(n.items[o.id],t)};if(s)for(t=0,o=s.length;t<o;t++)(e.query||"$score"!==s[t].field)&&l.push(s[t]);if(e.query){for(i=!0,t=0,o=l.length;t<o;t++)if("$score"===l[t].field){i=!1;break}i&&l.unshift({field:"$score",direction:"desc"})}else for(t=0,o=l.length;t<o;t++)if("$score"===l[t].field){l.splice(t,1);break}const d=l.length;return d?function(e,t){var o,i,n;for(o=0;o<d;o++){n=l[o].field;let r=a[o];if(null==r&&(r="desc"===l[o].direction?-1:1),i=r*_o(c(n,e),c(n,t)))return i}return 0}:null}prepareSearch(e,t){const o={};var i=Object.assign({},t);if(Eo(i,"sort"),Eo(i,"sort_empty"),i.fields){Eo(i,"fields");const e=[];i.fields.forEach((t=>{"string"==typeof t&&(t={field:t,weight:1}),e.push(t),o[t.field]="weight"in t?t.weight:1})),i.fields=e}return{options:i,query:e.toLowerCase().trim(),tokens:this.tokenize(e,i.respect_word_boundaries,o),total:0,items:[],weights:o,getAttrFn:i.nesting?yo:bo}}search(e,t){var o,i,n=this;i=this.prepareSearch(e,t),t=i.options,e=i.query;const r=t.score||n._getScoreFunction(i);e.length?xo(n.items,((e,n)=>{o=r(e),(!1===t.filter||o>0)&&i.items.push({score:o,id:n})})):xo(n.items,((e,t)=>{i.items.push({score:1,id:t})}));const s=n._getSortFunction(i);return s&&i.items.sort(s),i.total=i.items.length,"number"==typeof t.limit&&(i.items=i.items.slice(0,t.limit)),i}},Oo=e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(Co(e)){let t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}return document.querySelector(e)},Co=e=>"string"==typeof e&&e.indexOf("<")>-1,ko=(e,t)=>{var o=document.createEvent("HTMLEvents");o.initEvent(t,!0,!1),e.dispatchEvent(o)},Ao=(e,t)=>{Object.assign(e.style,t)},Lo=(e,...t)=>{var o=To(t);(e=Do(e)).map((e=>{o.map((t=>{e.classList.add(t)}))}))},Io=(e,...t)=>{var o=To(t);(e=Do(e)).map((e=>{o.map((t=>{e.classList.remove(t)}))}))},To=e=>{var t=[];return xo(e,(e=>{"string"==typeof e&&(e=e.trim().split(/[\11\12\14\15\40]/)),Array.isArray(e)&&(t=t.concat(e))})),t.filter(Boolean)},Do=e=>(Array.isArray(e)||(e=[e]),e),Fo=(e,t,o)=>{if(!o||o.contains(e))for(;e&&e.matches;){if(e.matches(t))return e;e=e.parentNode}},$o=(e,t=0)=>t>0?e[e.length-1]:e[0],Ro=(e,t)=>{if(!e)return-1;t=t||e.nodeName;for(var o=0;e=e.previousElementSibling;)e.matches(t)&&o++;return o},Po=(e,t)=>{xo(t,((t,o)=>{null==t?e.removeAttribute(o):e.setAttribute(o,""+t)}))},Mo=(e,t)=>{e.parentNode&&e.parentNode.replaceChild(t,e)},No=(e,t)=>{if(null===t)return;if("string"==typeof t){if(!t.length)return;t=new RegExp(t,"i")}const o=e=>3===e.nodeType?(e=>{var o=e.data.match(t);if(o&&e.data.length>0){var i=document.createElement("span");i.className="highlight";var n=e.splitText(o.index);n.splitText(o[0].length);var r=n.cloneNode(!0);return i.appendChild(r),Mo(n,i),1}return 0})(e):((e=>{if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&("highlight"!==e.className||"SPAN"!==e.tagName))for(var t=0;t<e.childNodes.length;++t)t+=o(e.childNodes[t])})(e),0);o(e)},Bo="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey",Vo={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(e){return e.length>0},render:{}},Ho=e=>null==e?null:qo(e),qo=e=>"boolean"==typeof e?e?"1":"0":e+"",zo=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Go=(e,t)=>{var o;return function(i,n){var r=this;o&&(r.loading=Math.max(r.loading-1,0),clearTimeout(o)),o=setTimeout((function(){o=null,r.loadedSearches[i]=!0,e.call(r,i,n)}),t)}},Xo=(e,t,o)=>{var i,n=e.trigger,r={};for(i of(e.trigger=function(){var o=arguments[0];if(-1===t.indexOf(o))return n.apply(e,arguments);r[o]=arguments},o.apply(e,[]),e.trigger=n,t))i in r&&n.apply(e,r[i])},Uo=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},Yo=(e,t,o,i)=>{e.addEventListener(t,o,i)},Ko=(e,t)=>!!t&&(!!t[e]&&1===(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0)),Wo=(e,t)=>{const o=e.getAttribute("id");return o||(e.setAttribute("id",t),t)},Qo=e=>e.replace(/[\\"']/g,"\\$&"),Jo=(e,t)=>{t&&e.append(t)};function Zo(e,t){var o=Object.assign({},Vo,t),i=o.dataAttr,n=o.labelField,r=o.valueField,s=o.disabledField,l=o.optgroupField,a=o.optgroupLabelField,c=o.optgroupValueField,d=e.tagName.toLowerCase(),u=e.getAttribute("placeholder")||e.getAttribute("data-placeholder");if(!u&&!o.allowEmptyOption){let t=e.querySelector('option[value=""]');t&&(u=t.textContent)}var h,p,f,g,m,v,b={placeholder:u,options:[],optgroups:[],items:[],maxItems:null};return"select"===d?(p=b.options,f={},g=1,m=e=>{var t=Object.assign({},e.dataset),o=i&&t[i];return"string"==typeof o&&o.length&&(t=Object.assign(t,JSON.parse(o))),t},v=(e,t)=>{var i=Ho(e.value);if(null!=i&&(i||o.allowEmptyOption)){if(f.hasOwnProperty(i)){if(t){var a=f[i][l];a?Array.isArray(a)?a.push(t):f[i][l]=[a,t]:f[i][l]=t}}else{var c=m(e);c[n]=c[n]||e.textContent,c[r]=c[r]||i,c[s]=c[s]||e.disabled,c[l]=c[l]||t,c.$option=e,f[i]=c,p.push(c)}e.selected&&b.items.push(i)}},b.maxItems=e.hasAttribute("multiple")?null:1,xo(e.children,(e=>{var t,o,i;"optgroup"===(h=e.tagName.toLowerCase())?((i=m(t=e))[a]=i[a]||t.getAttribute("label")||"",i[c]=i[c]||g++,i[s]=i[s]||t.disabled,b.optgroups.push(i),o=i[c],xo(t.children,(e=>{v(e,o)}))):"option"===h&&v(e)}))):(()=>{const t=e.getAttribute(i);if(t)b.options=JSON.parse(t),xo(b.options,(e=>{b.items.push(e[r])}));else{var s=e.value.trim()||"";if(!o.allowEmptyOption&&!s.length)return;const t=s.split(o.delimiter);xo(t,(e=>{const t={};t[n]=e,t[r]=e,b.options.push(t)})),b.items=t}})(),Object.assign({},Vo,b,t)}var ei=0,ti=class extends(function(e){return e.plugins={},class extends e{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,o){e.plugins[t]={name:t,fn:o}}initializePlugins(e){var t,o;const i=this,n=[];if(Array.isArray(e))e.forEach((e=>{"string"==typeof e?n.push(e):(i.plugins.settings[e.name]=e.options,n.push(e.name))}));else if(e)for(t in e)e.hasOwnProperty(t)&&(i.plugins.settings[t]=e[t],n.push(t));for(;o=n.shift();)i.require(o)}loadPlugin(t){var o=this,i=o.plugins,n=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=n.fn.apply(o,[o.plugins.settings[t]||{}]),i.names.push(t)}require(e){var t=this,o=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(o.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return o.loaded[e]}}}(ro)){constructor(e,t){var o;super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],ei++;var i=Oo(e);if(i.tomselect)throw new Error("Tom Select already initialized on this element");i.tomselect=this,o=(window.getComputedStyle&&window.getComputedStyle(i,null)).getPropertyValue("direction");const n=Zo(i,t);this.settings=n,this.input=i,this.tabIndex=i.tabIndex||0,this.is_select_tag="select"===i.tagName.toLowerCase(),this.rtl=/rtl/i.test(o),this.inputId=Wo(i,"tomselect-"+ei),this.isRequired=i.required,this.sifter=new So(this.options,{diacritics:n.diacritics}),n.mode=n.mode||(1===n.maxItems?"single":"multi"),"boolean"!=typeof n.hideSelected&&(n.hideSelected="multi"===n.mode),"boolean"!=typeof n.hidePlaceholder&&(n.hidePlaceholder="multi"!==n.mode);var r=n.createFilter;"function"!=typeof r&&("string"==typeof r&&(r=new RegExp(r)),r instanceof RegExp?n.createFilter=e=>r.test(e):n.createFilter=e=>this.settings.duplicates||!this.options[e]),this.initializePlugins(n.plugins),this.setupCallbacks(),this.setupTemplates();const s=Oo("<div>"),l=Oo("<div>"),a=this._render("dropdown"),c=Oo('<div role="listbox" tabindex="-1">'),d=this.input.getAttribute("class")||"",u=n.mode;var h;if(Lo(s,n.wrapperClass,d,u),Lo(l,n.controlClass),Jo(s,l),Lo(a,n.dropdownClass,u),n.copyClassesToDropdown&&Lo(a,d),Lo(c,n.dropdownContentClass),Jo(a,c),Oo(n.dropdownParent||s).appendChild(a),Co(n.controlInput)){h=Oo(n.controlInput);xo(["autocorrect","autocapitalize","autocomplete"],(e=>{i.getAttribute(e)&&Po(h,{[e]:i.getAttribute(e)})})),h.tabIndex=-1,l.appendChild(h),this.focus_node=h}else n.controlInput?(h=Oo(n.controlInput),this.focus_node=h):(h=Oo("<input/>"),this.focus_node=l);this.wrapper=s,this.dropdown=a,this.dropdown_content=c,this.control=l,this.control_input=h,this.setup()}setup(){const e=this,t=e.settings,o=e.control_input,i=e.dropdown,n=e.dropdown_content,r=e.wrapper,s=e.control,l=e.input,a=e.focus_node,c={passive:!0},d=e.inputId+"-ts-dropdown";Po(n,{id:d}),Po(a,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":d});const u=Wo(a,e.inputId+"-ts-control"),h="label[for='"+(e=>e.replace(/['"\\]/g,"\\$&"))(e.inputId)+"']",p=document.querySelector(h),f=e.focus.bind(e);if(p){Yo(p,"click",f),Po(p,{for:u});const t=Wo(p,e.inputId+"-ts-label");Po(a,{"aria-labelledby":t}),Po(n,{"aria-labelledby":t})}if(r.style.width=l.style.width,e.plugins.names.length){const t="plugin-"+e.plugins.names.join(" plugin-");Lo([r,i],t)}(null===t.maxItems||t.maxItems>1)&&e.is_select_tag&&Po(l,{multiple:"multiple"}),t.placeholder&&Po(o,{placeholder:t.placeholder}),!t.splitOn&&t.delimiter&&(t.splitOn=new RegExp("\\s*"+jo(t.delimiter)+"+\\s*")),t.load&&t.loadThrottle&&(t.load=Go(t.load,t.loadThrottle)),e.control_input.type=l.type,Yo(i,"mouseenter",(t=>{var o=Fo(t.target,"[data-selectable]",i);o&&e.onOptionHover(t,o)}),{capture:!0}),Yo(i,"click",(t=>{const o=Fo(t.target,"[data-selectable]");o&&(e.onOptionSelect(t,o),Uo(t,!0))})),Yo(s,"click",(t=>{var i=Fo(t.target,"[data-ts-item]",s);i&&e.onItemSelect(t,i)?Uo(t,!0):""==o.value&&(e.onClick(),Uo(t,!0))})),Yo(a,"keydown",(t=>e.onKeyDown(t))),Yo(o,"keypress",(t=>e.onKeyPress(t))),Yo(o,"input",(t=>e.onInput(t))),Yo(a,"resize",(()=>e.positionDropdown()),c),Yo(a,"blur",(t=>e.onBlur(t))),Yo(a,"focus",(t=>e.onFocus(t))),Yo(o,"paste",(t=>e.onPaste(t)));const g=t=>{const n=t.composedPath()[0];if(!r.contains(n)&&!i.contains(n))return e.isFocused&&e.blur(),void e.inputState();n==o&&e.isOpen?t.stopPropagation():Uo(t,!0)},m=()=>{e.isOpen&&e.positionDropdown()},v=()=>{e.ignoreHover=!1};Yo(document,"mousedown",g),Yo(window,"scroll",m,c),Yo(window,"resize",m,c),Yo(window,"mousemove",v,c),this._destroy=()=>{document.removeEventListener("mousedown",g),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",m),window.removeEventListener("resize",m),p&&p.removeEventListener("click",f)},this.revertSettings={innerHTML:l.innerHTML,tabIndex:l.tabIndex},l.tabIndex=-1,l.insertAdjacentElement("afterend",e.wrapper),e.sync(!1),t.items=[],delete t.optgroups,delete t.options,Yo(l,"invalid",(t=>{e.isValid&&(e.isValid=!1,e.isInvalid=!0,e.refreshState())})),e.updateOriginalInput(),e.refreshItems(),e.close(!1),e.inputState(),e.isSetup=!0,l.disabled?e.disable():e.enable(),e.on("change",this.onChange),Lo(l,"tomselected","ts-hidden-accessible"),e.trigger("initialize"),!0===t.preload&&e.preload()}setupOptions(e=[],t=[]){this.addOptions(e),xo(t,(e=>{this.registerOptionGroup(e)}))}setupTemplates(){var e=this,t=e.settings.labelField,o=e.settings.optgroupLabelField,i={optgroup:e=>{let t=document.createElement("div");return t.className="optgroup",t.appendChild(e.options),t},optgroup_header:(e,t)=>'<div class="optgroup-header">'+t(e[o])+"</div>",option:(e,o)=>"<div>"+o(e[t])+"</div>",item:(e,o)=>"<div>"+o(e[t])+"</div>",option_create:(e,t)=>'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};e.settings.render=Object.assign({},i,e.settings.render)}setupCallbacks(){var e,t,o={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in o)(t=this.settings[o[e]])&&this.on(e,t)}sync(e=!0){const t=this,o=e?Zo(t.input,{delimiter:t.settings.delimiter}):t.settings;t.setupOptions(o.options,o.optgroups),t.setValue(o.items||[],!0),t.lastQuery=null}onClick(){var e=this;if(e.activeItems.length>0)return e.clearActiveItems(),void e.focus();e.isFocused&&e.isOpen?e.blur():e.focus()}onMouseDown(){}onChange(){ko(this.input,"input"),ko(this.input,"change")}onPaste(e){var t=this;t.isInputHidden||t.isLocked?Uo(e):t.settings.splitOn&&setTimeout((()=>{var e=t.inputValue();if(e.match(t.settings.splitOn)){var o=e.trim().split(t.settings.splitOn);xo(o,(e=>{e=Ho(e),this.options[e]?t.addItem(e):t.createItem(e)}))}}),0)}onKeyPress(e){var t=this;if(!t.isLocked){var o=String.fromCharCode(e.keyCode||e.which);return t.settings.create&&"multi"===t.settings.mode&&o===t.settings.delimiter?(t.createItem(),void Uo(e)):void 0}Uo(e)}onKeyDown(e){var t=this;if(t.ignoreHover=!0,t.isLocked)9!==e.keyCode&&Uo(e);else{switch(e.keyCode){case 65:if(Ko(Bo,e)&&""==t.control_input.value)return Uo(e),void t.selectAll();break;case 27:return t.isOpen&&(Uo(e,!0),t.close()),void t.clearActiveItems();case 40:if(!t.isOpen&&t.hasOptions)t.open();else if(t.activeOption){let e=t.getAdjacent(t.activeOption,1);e&&t.setActiveOption(e)}return void Uo(e);case 38:if(t.activeOption){let e=t.getAdjacent(t.activeOption,-1);e&&t.setActiveOption(e)}return void Uo(e);case 13:return void(t.canSelect(t.activeOption)?(t.onOptionSelect(e,t.activeOption),Uo(e)):(t.settings.create&&t.createItem()||document.activeElement==t.control_input&&t.isOpen)&&Uo(e));case 37:return void t.advanceSelection(-1,e);case 39:return void t.advanceSelection(1,e);case 9:return void(t.settings.selectOnTab&&(t.canSelect(t.activeOption)&&(t.onOptionSelect(e,t.activeOption),Uo(e)),t.settings.create&&t.createItem()&&Uo(e)));case 8:case 46:return void t.deleteSelection(e)}t.isInputHidden&&!Ko(Bo,e)&&Uo(e)}}onInput(e){var t=this;if(!t.isLocked){var o=t.inputValue();t.lastValue!==o&&(t.lastValue=o,t.settings.shouldLoad.call(t,o)&&t.load(o),t.refreshOptions(),t.trigger("type",o))}}onOptionHover(e,t){this.ignoreHover||this.setActiveOption(t,!1)}onFocus(e){var t=this,o=t.isFocused;if(t.isDisabled)return t.blur(),void Uo(e);t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.preload(),o||t.trigger("focus"),t.activeItems.length||(t.showInput(),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())}onBlur(e){if(!1!==document.hasFocus()){var t=this;if(t.isFocused){t.isFocused=!1,t.ignoreFocus=!1;var o=()=>{t.close(),t.setActiveItem(),t.setCaret(t.items.length),t.trigger("blur")};t.settings.create&&t.settings.createOnBlur?t.createItem(null,!1,o):o()}}}onOptionSelect(e,t){var o,i=this;t.parentElement&&t.parentElement.matches("[data-disabled]")||(t.classList.contains("create")?i.createItem(null,!0,(()=>{i.settings.closeAfterSelect&&i.close()})):void 0!==(o=t.dataset.value)&&(i.lastQuery=null,i.addItem(o),i.settings.closeAfterSelect&&i.close(),!i.settings.hideSelected&&e.type&&/click/.test(e.type)&&i.setActiveOption(t)))}canSelect(e){return!!(this.isOpen&&e&&this.dropdown_content.contains(e))}onItemSelect(e,t){var o=this;return!o.isLocked&&"multi"===o.settings.mode&&(Uo(e),o.setActiveItem(t,e),!0)}canLoad(e){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(e)}load(e){const t=this;if(!t.canLoad(e))return;Lo(t.wrapper,t.settings.loadingClass),t.loading++;const o=t.loadCallback.bind(t);t.settings.load.call(t,e,o)}loadCallback(e,t){const o=this;o.loading=Math.max(o.loading-1,0),o.lastQuery=null,o.clearActiveOption(),o.setupOptions(e,t),o.refreshOptions(o.isFocused&&!o.isInputHidden),o.loading||Io(o.wrapper,o.settings.loadingClass),o.trigger("load",e,t)}preload(){var e=this.wrapper.classList;e.contains("preloaded")||(e.add("preloaded"),this.load(""))}setTextboxValue(e=""){var t=this.control_input;t.value!==e&&(t.value=e,ko(t,"update"),this.lastValue=e)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(e,t){Xo(this,t?[]:["change"],(()=>{this.clear(t),this.addItems(e,t)}))}setMaxItems(e){0===e&&(e=null),this.settings.maxItems=e,this.refreshState()}setActiveItem(e,t){var o,i,n,r,s,l,a=this;if("single"!==a.settings.mode){if(!e)return a.clearActiveItems(),void(a.isFocused&&a.showInput());if("click"===(o=t&&t.type.toLowerCase())&&Ko("shiftKey",t)&&a.activeItems.length){for(l=a.getLastActive(),(n=Array.prototype.indexOf.call(a.control.children,l))>(r=Array.prototype.indexOf.call(a.control.children,e))&&(s=n,n=r,r=s),i=n;i<=r;i++)e=a.control.children[i],-1===a.activeItems.indexOf(e)&&a.setActiveItemClass(e);Uo(t)}else"click"===o&&Ko(Bo,t)||"keydown"===o&&Ko("shiftKey",t)?e.classList.contains("active")?a.removeActiveItem(e):a.setActiveItemClass(e):(a.clearActiveItems(),a.setActiveItemClass(e));a.hideInput(),a.isFocused||a.focus()}}setActiveItemClass(e){const t=this,o=t.control.querySelector(".last-active");o&&Io(o,"last-active"),Lo(e,"active last-active"),t.trigger("item_select",e),-1==t.activeItems.indexOf(e)&&t.activeItems.push(e)}removeActiveItem(e){var t=this.activeItems.indexOf(e);this.activeItems.splice(t,1),Io(e,"active")}clearActiveItems(){Io(this.activeItems,"active"),this.activeItems=[]}setActiveOption(e,t=!0){e!==this.activeOption&&(this.clearActiveOption(),e&&(this.activeOption=e,Po(this.focus_node,{"aria-activedescendant":e.getAttribute("id")}),Po(e,{"aria-selected":"true"}),Lo(e,"active"),t&&this.scrollToOption(e)))}scrollToOption(e,t){if(!e)return;const o=this.dropdown_content,i=o.clientHeight,n=o.scrollTop||0,r=e.offsetHeight,s=e.getBoundingClientRect().top-o.getBoundingClientRect().top+n;s+r>i+n?this.scroll(s-i+r,t):s<n&&this.scroll(s,t)}scroll(e,t){const o=this.dropdown_content;t&&(o.style.scrollBehavior=t),o.scrollTop=e,o.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(Io(this.activeOption,"active"),Po(this.activeOption,{"aria-selected":null})),this.activeOption=null,Po(this.focus_node,{"aria-activedescendant":null})}selectAll(){const e=this;if("single"===e.settings.mode)return;const t=e.controlChildren();t.length&&(e.hideInput(),e.close(),e.activeItems=t,xo(t,(t=>{e.setActiveItemClass(t)})))}inputState(){var e=this;e.control.contains(e.control_input)&&(Po(e.control_input,{placeholder:e.settings.placeholder}),e.activeItems.length>0||!e.isFocused&&e.settings.hidePlaceholder&&e.items.length>0?(e.setTextboxValue(),e.isInputHidden=!0):(e.settings.hidePlaceholder&&e.items.length>0&&Po(e.control_input,{placeholder:""}),e.isInputHidden=!1),e.wrapper.classList.toggle("input-hidden",e.isInputHidden))}hideInput(){this.inputState()}showInput(){this.inputState()}inputValue(){return this.control_input.value.trim()}focus(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.control_input.offsetWidth?e.control_input.focus():e.focus_node.focus(),setTimeout((()=>{e.ignoreFocus=!1,e.onFocus()}),0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())}getSearchOptions(){var e=this.settings,t=e.sortField;return"string"==typeof e.sortField&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}search(e){var t,o,i,n=this,r=this.getSearchOptions();if(n.settings.score&&"function"!=typeof(i=n.settings.score.call(n,e)))throw new Error('Tom Select "score" setting must be a function that returns a function');if(e!==n.lastQuery?(n.lastQuery=e,o=n.sifter.search(e,Object.assign(r,{score:i})),n.currentResults=o):o=Object.assign({},n.currentResults),n.settings.hideSelected)for(t=o.items.length-1;t>=0;t--){let e=Ho(o.items[t].id);e&&-1!==n.items.indexOf(e)&&o.items.splice(t,1)}return o}refreshOptions(e=!0){var t,o,i,n,r,s,l,a,c,d,u;const h={},p=[];var f,g=this,m=g.inputValue(),v=g.search(m),b=null,y=g.settings.shouldOpen||!1,w=g.dropdown_content;for(g.activeOption&&(c=g.activeOption.dataset.value,d=g.activeOption.closest("[data-group]")),n=v.items.length,"number"==typeof g.settings.maxOptions&&(n=Math.min(n,g.settings.maxOptions)),n>0&&(y=!0),t=0;t<n;t++){let e=v.items[t].id,n=g.options[e],l=g.getOption(e,!0);for(g.settings.hideSelected||l.classList.toggle("selected",g.items.includes(e)),r=n[g.settings.optgroupField]||"",o=0,i=(s=Array.isArray(r)?r:[r])&&s.length;o<i;o++)r=s[o],g.optgroups.hasOwnProperty(r)||(r=""),h.hasOwnProperty(r)||(h[r]=document.createDocumentFragment(),p.push(r)),o>0&&(l=l.cloneNode(!0),Po(l,{id:n.$id+"-clone-"+o,"aria-selected":null}),l.classList.add("ts-cloned"),Io(l,"active")),b||c!=e||(d?d.dataset.group===r&&(b=l):b=l),h[r].appendChild(l)}this.settings.lockOptgroupOrder&&p.sort(((e,t)=>(g.optgroups[e]&&g.optgroups[e].$order||0)-(g.optgroups[t]&&g.optgroups[t].$order||0))),l=document.createDocumentFragment(),xo(p,(e=>{if(g.optgroups.hasOwnProperty(e)&&h[e].children.length){let t=document.createDocumentFragment(),o=g.render("optgroup_header",g.optgroups[e]);Jo(t,o),Jo(t,h[e]);let i=g.render("optgroup",{group:g.optgroups[e],options:t});Jo(l,i)}else Jo(l,h[e])})),w.innerHTML="",Jo(w,l),g.settings.highlight&&(f=w.querySelectorAll("span.highlight"),Array.prototype.forEach.call(f,(function(e){var t=e.parentNode;t.replaceChild(e.firstChild,e),t.normalize()})),v.query.length&&v.tokens.length&&xo(v.tokens,(e=>{No(w,e.regex)})));var j=e=>{let t=g.render(e,{input:m});return t&&(y=!0,w.insertBefore(t,w.firstChild)),t};if(g.loading?j("loading"):g.settings.shouldLoad.call(g,m)?0===v.items.length&&j("no_results"):j("not_loading"),(a=g.canCreate(m))&&(u=j("option_create")),g.hasOptions=v.items.length>0||a,y){if(v.items.length>0){if(!b&&"single"===g.settings.mode&&g.items.length&&(b=g.getOption(g.items[0])),!w.contains(b)){let e=0;u&&!g.settings.addPrecedence&&(e=1),b=g.selectable()[e]}}else u&&(b=u);e&&!g.isOpen&&(g.open(),g.scrollToOption(b,"auto")),g.setActiveOption(b)}else g.clearActiveOption(),e&&g.isOpen&&g.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(e,t=!1){const o=this;if(Array.isArray(e))return o.addOptions(e,t),!1;const i=Ho(e[o.settings.valueField]);return null!==i&&!o.options.hasOwnProperty(i)&&(e.$order=e.$order||++o.order,e.$id=o.inputId+"-opt-"+e.$order,o.options[i]=e,o.lastQuery=null,t&&(o.userOptions[i]=t,o.trigger("option_add",i,e)),i)}addOptions(e,t=!1){xo(e,(e=>{this.addOption(e,t)}))}registerOption(e){return this.addOption(e)}registerOptionGroup(e){var t=Ho(e[this.settings.optgroupValueField]);return null!==t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)}addOptionGroup(e,t){var o;t[this.settings.optgroupValueField]=e,(o=this.registerOptionGroup(t))&&this.trigger("optgroup_add",o,t)}removeOptionGroup(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.clearCache(),this.trigger("optgroup_remove",e))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(e,t){const o=this;var i,n;const r=Ho(e),s=Ho(t[o.settings.valueField]);if(null===r)return;if(!o.options.hasOwnProperty(r))return;if("string"!=typeof s)throw new Error("Value must be set in option data");const l=o.getOption(r),a=o.getItem(r);if(t.$order=t.$order||o.options[r].$order,delete o.options[r],o.uncacheValue(s),o.options[s]=t,l){if(o.dropdown_content.contains(l)){const e=o._render("option",t);Mo(l,e),o.activeOption===l&&o.setActiveOption(e)}l.remove()}a&&(-1!==(n=o.items.indexOf(r))&&o.items.splice(n,1,s),i=o._render("item",t),a.classList.contains("active")&&Lo(i,"active"),Mo(a,i)),o.lastQuery=null}removeOption(e,t){const o=this;e=qo(e),o.uncacheValue(e),delete o.userOptions[e],delete o.options[e],o.lastQuery=null,o.trigger("option_remove",e),o.removeItem(e,t)}clearOptions(e){const t=(e||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const o={};xo(this.options,((e,i)=>{t(e,i)&&(o[i]=this.options[i])})),this.options=this.sifter.items=o,this.lastQuery=null,this.trigger("option_clear")}clearFilter(e,t){return this.items.indexOf(t)>=0}getOption(e,t=!1){const o=Ho(e);if(null!==o&&this.options.hasOwnProperty(o)){const e=this.options[o];if(e.$div)return e.$div;if(t)return this._render("option",e)}return null}getAdjacent(e,t,o="option"){var i;if(!e)return null;i="item"==o?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]");for(let o=0;o<i.length;o++)if(i[o]==e)return t>0?i[o+1]:i[o-1];return null}getItem(e){if("object"==typeof e)return e;var t=Ho(e);return null!==t?this.control.querySelector(`[data-value="${Qo(t)}"]`):null}addItems(e,t){var o=this,i=Array.isArray(e)?e:[e];for(let e=0,n=(i=i.filter((e=>-1===o.items.indexOf(e)))).length;e<n;e++)o.isPending=e<n-1,o.addItem(i[e],t)}addItem(e,t){Xo(this,t?[]:["change","dropdown_close"],(()=>{var o,i;const n=this,r=n.settings.mode,s=Ho(e);if((!s||-1===n.items.indexOf(s)||("single"===r&&n.close(),"single"!==r&&n.settings.duplicates))&&null!==s&&n.options.hasOwnProperty(s)&&("single"===r&&n.clear(t),"multi"!==r||!n.isFull())){if(o=n._render("item",n.options[s]),n.control.contains(o)&&(o=o.cloneNode(!0)),i=n.isFull(),n.items.splice(n.caretPos,0,s),n.insertAtCaret(o),n.isSetup){if(!n.isPending&&n.settings.hideSelected){let e=n.getOption(s),t=n.getAdjacent(e,1);t&&n.setActiveOption(t)}n.isPending||n.settings.closeAfterSelect||n.refreshOptions(n.isFocused&&"single"!==r),0!=n.settings.closeAfterSelect&&n.isFull()?n.close():n.isPending||n.positionDropdown(),n.trigger("item_add",s,o),n.isPending||n.updateOriginalInput({silent:t})}(!n.isPending||!i&&n.isFull())&&(n.inputState(),n.refreshState())}}))}removeItem(e=null,t){const o=this;if(!(e=o.getItem(e)))return;var i,n;const r=e.dataset.value;i=Ro(e),e.remove(),e.classList.contains("active")&&(n=o.activeItems.indexOf(e),o.activeItems.splice(n,1),Io(e,"active")),o.items.splice(i,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(r)&&o.removeOption(r,t),i<o.caretPos&&o.setCaret(o.caretPos-1),o.updateOriginalInput({silent:t}),o.refreshState(),o.positionDropdown(),o.trigger("item_remove",r,e)}createItem(e=null,t=!0,o=(()=>{})){var i,n=this,r=n.caretPos;if(e=e||n.inputValue(),!n.canCreate(e))return o(),!1;n.lock();var s=!1,l=e=>{if(n.unlock(),!e||"object"!=typeof e)return o();var t=Ho(e[n.settings.valueField]);if("string"!=typeof t)return o();n.setTextboxValue(),n.addOption(e,!0),n.setCaret(r),n.addItem(t),o(e),s=!0};return i="function"==typeof n.settings.create?n.settings.create.call(this,e,l):{[n.settings.labelField]:e,[n.settings.valueField]:e},s||l(i),!0}refreshItems(){var e=this;e.lastQuery=null,e.isSetup&&e.addItems(e.items),e.updateOriginalInput(),e.refreshState()}refreshState(){const e=this;e.refreshValidityState();const t=e.isFull(),o=e.isLocked;e.wrapper.classList.toggle("rtl",e.rtl);const i=e.wrapper.classList;var n;i.toggle("focus",e.isFocused),i.toggle("disabled",e.isDisabled),i.toggle("required",e.isRequired),i.toggle("invalid",!e.isValid),i.toggle("locked",o),i.toggle("full",t),i.toggle("input-active",e.isFocused&&!e.isInputHidden),i.toggle("dropdown-active",e.isOpen),i.toggle("has-options",(n=e.options,0===Object.keys(n).length)),i.toggle("has-items",e.items.length>0)}refreshValidityState(){var e=this;e.input.validity&&(e.isValid=e.input.validity.valid,e.isInvalid=!e.isValid)}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(e={}){const t=this;var o,i;const n=t.input.querySelector('option[value=""]');if(t.is_select_tag){let e=function(e,o,i){return e||(e=Oo('<option value="'+zo(o)+'">'+zo(i)+"</option>")),e!=n&&t.input.append(e),r.push(e),(e!=n||s>0)&&(e.selected=!0),e};const r=[],s=t.input.querySelectorAll("option:checked").length;t.input.querySelectorAll("option:checked").forEach((e=>{e.selected=!1})),0==t.items.length&&"single"==t.settings.mode?e(n,"",""):t.items.forEach((n=>{if(o=t.options[n],i=o[t.settings.labelField]||"",r.includes(o.$option)){const o=t.input.querySelector(`option[value="${Qo(n)}"]:not(:checked)`);e(o,n,i)}else o.$option=e(o.$option,n,i)}))}else t.input.value=t.getValue();t.isSetup&&(e.silent||t.trigger("change",t.getValue()))}open(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.isOpen=!0,Po(e.focus_node,{"aria-expanded":"true"}),e.refreshState(),Ao(e.dropdown,{visibility:"hidden",display:"block"}),e.positionDropdown(),Ao(e.dropdown,{visibility:"visible",display:"block"}),e.focus(),e.trigger("dropdown_open",e.dropdown))}close(e=!0){var t=this,o=t.isOpen;e&&(t.setTextboxValue(),"single"===t.settings.mode&&t.items.length&&t.hideInput()),t.isOpen=!1,Po(t.focus_node,{"aria-expanded":"false"}),Ao(t.dropdown,{display:"none"}),t.settings.hideSelected&&t.clearActiveOption(),t.refreshState(),o&&t.trigger("dropdown_close",t.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var e=this.control,t=e.getBoundingClientRect(),o=e.offsetHeight+t.top+window.scrollY,i=t.left+window.scrollX;Ao(this.dropdown,{width:t.width+"px",top:o+"px",left:i+"px"})}}clear(e){var t=this;if(t.items.length){var o=t.controlChildren();xo(o,(e=>{t.removeItem(e,!0)})),t.showInput(),e||t.updateOriginalInput(),t.trigger("clear")}}insertAtCaret(e){const t=this,o=t.caretPos,i=t.control;i.insertBefore(e,i.children[o]),t.setCaret(o+1)}deleteSelection(e){var t,o,i,n,r,s=this;t=e&&8===e.keyCode?-1:1,o={start:(r=s.control_input).selectionStart||0,length:(r.selectionEnd||0)-(r.selectionStart||0)};const l=[];if(s.activeItems.length)n=$o(s.activeItems,t),i=Ro(n),t>0&&i++,xo(s.activeItems,(e=>l.push(e)));else if((s.isFocused||"single"===s.settings.mode)&&s.items.length){const e=s.controlChildren();t<0&&0===o.start&&0===o.length?l.push(e[s.caretPos-1]):t>0&&o.start===s.inputValue().length&&l.push(e[s.caretPos])}if(!s.shouldDelete(l,e))return!1;for(Uo(e,!0),void 0!==i&&s.setCaret(i);l.length;)s.removeItem(l.pop());return s.showInput(),s.positionDropdown(),s.refreshOptions(!1),!0}shouldDelete(e,t){const o=e.map((e=>e.dataset.value));return!(!o.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete(o,t))}advanceSelection(e,t){var o,i,n=this;n.rtl&&(e*=-1),n.inputValue().length||(Ko(Bo,t)||Ko("shiftKey",t)?(i=(o=n.getLastActive(e))?o.classList.contains("active")?n.getAdjacent(o,e,"item"):o:e>0?n.control_input.nextElementSibling:n.control_input.previousElementSibling)&&(i.classList.contains("active")&&n.removeActiveItem(o),n.setActiveItemClass(i)):n.moveCaret(e))}moveCaret(e){}getLastActive(e){let t=this.control.querySelector(".last-active");if(t)return t;var o=this.control.querySelectorAll(".active");return o?$o(o,e):void 0}setCaret(e){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.isLocked=!0,this.refreshState()}unlock(){this.isLocked=!1,this.refreshState()}disable(){var e=this;e.input.disabled=!0,e.control_input.disabled=!0,e.focus_node.tabIndex=-1,e.isDisabled=!0,this.close(),e.lock()}enable(){var e=this;e.input.disabled=!1,e.control_input.disabled=!1,e.focus_node.tabIndex=e.tabIndex,e.isDisabled=!1,e.unlock()}destroy(){var e=this,t=e.revertSettings;e.trigger("destroy"),e.off(),e.wrapper.remove(),e.dropdown.remove(),e.input.innerHTML=t.innerHTML,e.input.tabIndex=t.tabIndex,Io(e.input,"tomselected","ts-hidden-accessible"),e._destroy(),delete e.input.tomselect}render(e,t){return"function"!=typeof this.settings.render[e]?null:this._render(e,t)}_render(e,t){var o,i,n="";const r=this;return"option"!==e&&"item"!=e||(n=qo(t[r.settings.valueField])),null==(i=r.settings.render[e].call(this,t,zo))||(i=Oo(i),"option"===e||"option_create"===e?t[r.settings.disabledField]?Po(i,{"aria-disabled":"true"}):Po(i,{"data-selectable":""}):"optgroup"===e&&(o=t.group[r.settings.optgroupValueField],Po(i,{"data-group":o}),t.group[r.settings.disabledField]&&Po(i,{"data-disabled":""})),"option"!==e&&"item"!==e||(Po(i,{"data-value":n}),"item"===e?(Lo(i,r.settings.itemClass),Po(i,{"data-ts-item":""})):(Lo(i,r.settings.optionClass),Po(i,{role:"option",id:t.$id}),r.options[n].$div=i))),i}clearCache(){xo(this.options,((e,t)=>{e.$div&&(e.$div.remove(),delete e.$div)}))}uncacheValue(e){const t=this.getOption(e);t&&t.remove()}canCreate(e){return this.settings.create&&e.length>0&&this.settings.createFilter.call(this,e)}hook(e,t,o){var i=this,n=i[t];i[t]=function(){var t,r;return"after"===e&&(t=n.apply(i,arguments)),r=o.apply(i,arguments),"instead"===e?r:("before"===e&&(t=n.apply(i,arguments)),t)}}};var oi,ii=class{constructor(e){this.touch=()=>{this.fieldGroup.classList.remove("dj-untouched"),this.fieldGroup.classList.remove("dj-validated"),this.fieldGroup.classList.add("dj-touched")};const t=e.closest("django-field-group"),o=e.closest("form"),i=e.closest("django-formset");if(!t||!o||!i)throw new Error("Attempt to initialize <django-selectize> outside <django-formset>");if(this.fieldGroup=t,this.isIncomplete=e.hasAttribute("incomplete"),this.isIncomplete){const t=o.getAttribute("name")??"__default__";this.endpoint=i.getAttribute("endpoint")??"",this.fieldName=`${t}.${e.getAttribute("name")}`}o.addEventListener("reset",(e=>this.formResetted(e))),o.addEventListener("submitted",(e=>this.formSubmitted(e)))}async loadOptions(e,t){const o=new Headers;o.append("Accept","application/json");const i=`${this.endpoint}?field=${this.fieldName}&${e}`,n=await fetch(i,{method:"GET",headers:o});if(200===n.status){const e=await n.json();"boolean"==typeof e.incomplete&&(this.isIncomplete=e.incomplete),t(e.items)}else console.error(`Failed to fetch from ${i} (status=${n.status})`)}},ni=u(m());!function(e){function t(e,o){if(e instanceof CSSImportRule){if(!e.styleSheet)return;for(let i of e.styleSheet.cssRules)t(i,o)}else if(e instanceof CSSStyleRule){if(!e.selectorText)return;const t=e.selectorText.replaceAll(":focus",".-focus-").replaceAll(":focus-visible",".-focus-visible-").replaceAll(":hover",".-hover-").replaceAll(":disabled",".-disabled-").replaceAll(":invalid",".-invalid-").replaceAll(":valid",".-valid-").replaceAll("::placeholder-shown",".-placeholder-shown").replaceAll(":placeholder-shown",".-placeholder-shown").replaceAll("::placeholder",".-placeholder-").replaceAll(":placeholder",".-placeholder-");t!==e.selectorText&&o.insertRule(`${t}{${e.style.cssText}}`)}}e.extractStyles=function(e,t){let o=Array();const i=window.getComputedStyle(e);for(let e of t)o.push(`${e}:${i.getPropertyValue(e)}`);return o.join("; ").concat("; ")},e.convertPseudoClasses=function(){const e=document.styleSheets.length,o=document.createElement("style");document.head.appendChild(o);for(let i=0;i<e;i++){const e=document.styleSheets[i];for(let i=0;i<e.cssRules.length;i++){const n=e.cssRules.item(i);n&&t(n,o.sheet)}}return o}}(oi||(oi={}));ti.define("remove_button",(function(e){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},e);var o=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+zo(t.title)+'">'+t.label+"</a>";o.hook("after","setupTemplates",(()=>{var e=o.settings.render.item;o.settings.render.item=(t,n)=>{var r=Oo(e.call(o,t,n)),s=Oo(i);return r.appendChild(s),Yo(s,"mousedown",(e=>{Uo(e,!0)})),Yo(s,"click",(e=>{Uo(e,!0),o.isLocked||o.shouldDelete([r],e)&&(o.removeItem(r),o.refreshOptions(!1),o.inputState())})),r}}))}}));var ri=class extends ii{constructor(e){super(e),this.numOptions=12,this.blurred=()=>{this.shadowRoot.querySelector(".ts-wrapper")?.classList.remove("dirty")},this.changed=()=>{this.tomSelect.setTextboxValue(""),this.tomSelect.dropdown_content.childElementCount<=1&&this.tomSelect.close()},this.inputted=e=>{const t=e;this.shadowRoot.querySelector(".ts-wrapper")?.classList.toggle("dirty",t.length>0)},this.attributesChanged=e=>{for(const t of e)"attributes"===t.type&&"disabled"===t.attributeName&&(this.tomInput.disabled?this.tomSelect.isDisabled||this.tomSelect.disable():this.tomSelect.isDisabled&&this.tomSelect.enable())},this.tomInput=e;const t={create:!1,valueField:"id",labelField:"label",maxItems:1,searchField:["label"],render:this.setupRender(e),onFocus:this.touch,onBlur:this.blurred,onChange:this.changed,onType:this.inputted};this.isIncomplete&&(t.load=(e,t)=>this.loadOptions(`query=${encodeURIComponent(e)}`,t));let o=!1;if(e.hasAttribute("multiple")){t.maxItems=parseInt(e.getAttribute("max_items")??"3");const i=e.parentElement?.querySelector("template.selectize-remove-item");i&&(t.plugins={remove_button:{title:i.innerHTML}});const n=`${e.getAttribute("id")}_initial`;t.items=JSON.parse(document.getElementById(n)?.textContent??"[]"),e.removeAttribute("multiple"),o=!0}const i=c({},window.getComputedStyle(e));o&&e.setAttribute("multiple","multiple"),this.numOptions=parseInt(e.getAttribute("options")??this.numOptions.toString()),this.tomSelect=new ti(e,t),this.observer=new MutationObserver(this.attributesChanged),this.observer.observe(this.tomInput,{attributes:!0}),this.initialValue=this.tomSelect.getValue(),this.shadowRoot=this.wrapInShadowRoot(),this.transferStyles(e,i),e.classList.add("dj-concealed"),this.validateInput(this.initialValue),this.tomSelect.on("change",(e=>this.validateInput(e)))}formResetted(e){this.tomSelect.setValue(this.initialValue)}formSubmitted(e){}wrapInShadowRoot(){const e=document.createElement("div");e.classList.add("shadow-wrapper");const t=e.attachShadow({mode:"open",delegatesFocus:!0}),o=document.createElement("style");t.appendChild(o).textContent=":root{--django-formset-color-invalid: rgb(255, 3, 0);--django-formset-shadow-invalid: rgb(255, 3, 0, 0.25);--django-formset-color-valid: rgb(0, 122, 0)}.ts-wrapper{position:relative}.ts-wrapper .ts-control{overflow:hidden;box-sizing:border-box;display:flex;flex-wrap:wrap;align-content:center}.ts-wrapper .ts-control>input{flex:1 1 auto;box-sizing:border-box;user-select:auto;box-shadow:none;border:none;padding:0;font-size:inherit;font-weight:inherit;font-style:inherit;font-family:inherit;caret-color:rgba(0,0,0,.15)}.ts-wrapper .ts-control>input::placeholder{opacity:1}.ts-wrapper .ts-control>input::-ms-clear{display:none}.ts-wrapper .ts-control>input:focus{outline:none !important}.ts-wrapper .ts-control>div{flex:0 1 auto;box-sizing:border-box}.ts-wrapper.multi .ts-control{padding:0 6px 3px 10px}.ts-wrapper.multi .ts-control>div{border:1px solid rgba(0,0,0,.15);border-radius:3px;margin:3px 3px 0 0}.ts-wrapper.multi .ts-control>div .remove{text-decoration:none;color:rgba(0,0,0,.15);border-left:1px solid rgba(0,0,0,.15);padding-left:2px;margin-left:2px}.ts-wrapper.multi .ts-control>div .remove:hover{color:inherit}.ts-wrapper.multi .ts-control>div.active{background-color:rgba(0,0,0,.05)}.ts-wrapper.multi.full .ts-control>input{visibility:hidden}.ts-wrapper.multi.has-items:not(.dirty) .ts-control>input::placeholder{opacity:0}.ts-wrapper.focus .ts-control{opacity:1}.ts-wrapper.disabled .ts-control{opacity:1}.ts-wrapper.input-hidden .ts-control>input{opacity:0;position:absolute;left:-10000px}.ts-wrapper:not(.multi).dirty.focus .ts-control .item{display:none}.ts-wrapper .ts-dropdown{position:absolute;top:100%;left:0;width:100%;z-index:10;background:#f4f4f4;backdrop-filter:blur(0.5rem);margin:.125rem 0 0 0;border-top:0 none;box-sizing:border-box}.ts-wrapper .ts-dropdown [data-selectable]{cursor:pointer;overflow:hidden}.ts-wrapper .ts-dropdown [data-selectable] .highlight{background:rgba(255,237,40,.4);border-radius:1px}.ts-wrapper .ts-dropdown .ts-dropdown-content{overflow-y:auto;overflow-x:hidden;overflow-scrolling:touch;scroll-behavior:smooth}:host-context(django-field-group.dj-touched) .ts-wrapper.has-items:not(.input-active) .ts-control{border-color:var(--django-formset-color-valid)}:host-context(django-field-group.dj-touched) .ts-wrapper.invalid:not(.input-active) .ts-control{border-color:var(--django-formset-color-invalid)}",this.tomInput.insertAdjacentElement("beforebegin",e);const i=this.tomInput.parentElement.removeChild(this.tomSelect.wrapper);return t.appendChild(i),t}validateInput(e){this.shadowRoot.querySelector(".ts-wrapper")?.classList.remove("dirty");const t=this.tomInput;if(this.tomSelect.isRequired&&t.setCustomValidity(e?"":"Value is missing."),t.multiple)for(let o=0;o<t.options.length;o++){const i=t.options.item(o);i&&(i.selected=e.indexOf(i.value)>=0)}else this.tomInput.value=e}transferStyles(e,t){this.shadowRoot.host.style.setProperty("display",t.display);const o=window.getComputedStyle(e).getPropertyValue("line-height"),i=e.querySelector("option"),n=this.shadowRoot.styleSheets.item(0);for(let r=0;n&&r<n.cssRules.length;r++){const s=n.cssRules.item(r);let l;switch(s.selectorText){case".ts-wrapper":l=oi.extractStyles(e,["font-family","font-size","font-strech","font-style","font-weight","letter-spacing","white-space"]),n.insertRule(`${s.selectorText}{${l}}`,++r);break;case".ts-wrapper .ts-control":l=oi.extractStyles(e,["background-color","border","border-radius","box-shadow","color","padding"]).concat(`width: ${t.width}; min-height: ${t.height};`),n.insertRule(`${s.selectorText}{${l}}`,++r);break;case".ts-wrapper .ts-control > input":case".ts-wrapper .ts-control > div":i&&(l=oi.extractStyles(i,["padding-left","padding-right"]),n.insertRule(`${s.selectorText}{${l}}`,++r));break;case".ts-wrapper .ts-control > input::placeholder":e.classList.add("-placeholder-"),l=oi.extractStyles(e,["background-color","color"]),e.classList.remove("-placeholder-"),n.insertRule(`${s.selectorText}{${l}}`,++r);break;case".ts-wrapper.focus .ts-control":e.style.transition="none",e.classList.add("-focus-"),l=oi.extractStyles(e,["background-color","border","box-shadow","color","outline","transition"]),e.classList.remove("-focus-"),n.insertRule(`${s.selectorText}{${l}}`,++r),e.style.transition="";break;case".ts-wrapper.disabled .ts-control":e.classList.add("-disabled-"),l=oi.extractStyles(e,["background-color","border","box-shadow","color","opacity","outline","transition"]),e.classList.remove("-disabled-"),n.insertRule(`${s.selectorText}{${l}}`,++r);break;case".ts-wrapper .ts-dropdown":l=oi.extractStyles(e,["border-right","border-bottom","border-left","color","padding-left"]).concat(parseFloat(o)>0?`line-height: calc(${o} * 1.2);`:"line-height: 1.2em;"),n.insertRule(`${s.selectorText}{${l}}`,++r);break;case".ts-wrapper .ts-dropdown .ts-dropdown-content":l=parseFloat(o)>0?`max-height: calc(${o} * 1.2 * ${this.numOptions});`:`max-height: ${1.2*this.numOptions}em;`,n.insertRule(`${s.selectorText}{${l}}`,++r)}}}setupRender(e){const t=e.parentElement?.querySelector("template.select-no-results");return t?{no_results:(e,o)=>(0,ni.default)(t.innerHTML)(e)}:{}}get value(){return this.tomSelect.getValue()}},si=Symbol("DjangoSelectize"),li=class extends HTMLSelectElement{connectedCallback(){this[si]=new ri(this)}async getValue(){return this[si]?.value}};Nt.mount(new function(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.avoidImplicitDeselect||(e.options.supportPointer?R(document,"pointerup",this._deselectMultiDrag):(R(document,"mouseup",this._deselectMultiDrag),R(document,"touchend",this._deselectMultiDrag))),R(document,"keydown",this._checkKeyDown),R(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(t,o){var i="";Tt.length&&kt===e?Tt.forEach((function(e,t){i+=(t?", ":"")+e.textContent})):i=o.textContent,t.setData("Text",i)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;At=t},delayEnded:function(){this.isMultiDrag=~Tt.indexOf(At)},setupClone:function(e){var t=e.sortable,o=e.cancel;if(this.isMultiDrag){for(var i=0;i<Tt.length;i++)Dt.push(ne(Tt[i])),Dt[i].sortableIndex=Tt[i].sortableIndex,Dt[i].draggable=!1,Dt[i].style["will-change"]="",q(Dt[i],this.options.selectedClass,!1),Tt[i]===At&&q(Dt[i],this.options.chosenClass,!1);t._hideClone(),o()}},clone:function(e){var t=e.sortable,o=e.rootEl,i=e.dispatchSortableEvent,n=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Tt.length&&kt===t&&(Pt(!0,o),i("clone"),n()))},showClone:function(e){var t=e.cloneNowShown,o=e.rootEl,i=e.cancel;this.isMultiDrag&&(Pt(!1,o),Dt.forEach((function(e){z(e,"display","")})),t(),It=!1,i())},hideClone:function(e){var t=this,o=(e.sortable,e.cloneNowHidden),i=e.cancel;this.isMultiDrag&&(Dt.forEach((function(e){z(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),o(),It=!0,i())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&kt&&kt.multiDrag._deselectMultiDrag(),Tt.forEach((function(e){e.sortableIndex=J(e)})),Tt=Tt.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),Rt=!0},dragStarted:function(e){var t=this,o=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(o.captureAnimationState(),this.options.animation)){Tt.forEach((function(e){e!==At&&z(e,"position","absolute")}));var i=Y(At,!1,!0,!0);Tt.forEach((function(e){e!==At&&re(e,i)})),$t=!0,Ft=!0}o.animateAll((function(){$t=!1,Ft=!1,t.options.animation&&Tt.forEach((function(e){se(e)})),t.options.sort&&Mt()}))}},dragOver:function(e){var t=e.target,o=e.completed,i=e.cancel;$t&&~Tt.indexOf(t)&&(o(!1),i())},revert:function(e){var t=e.fromSortable,o=e.rootEl,i=e.sortable,n=e.dragRect;Tt.length>1&&(Tt.forEach((function(e){i.addAnimationState({target:e,rect:$t?Y(e):n}),se(e),e.fromRect=n,t.removeAnimationState(e)})),$t=!1,function(e,t){Tt.forEach((function(o,i){var n=t.children[o.sortableIndex+(e?Number(i):0)];n?t.insertBefore(o,n):t.appendChild(o)}))}(!this.options.removeCloneOnHide,o))},dragOverCompleted:function(e){var t=e.sortable,o=e.isOwner,i=e.insertion,n=e.activeSortable,r=e.parentEl,s=e.putSortable,l=this.options;if(i){if(o&&n._hideClone(),Ft=!1,l.animation&&Tt.length>1&&($t||!o&&!n.options.sort&&!s)){var a=Y(At,!1,!0,!0);Tt.forEach((function(e){e!==At&&(re(e,a),r.appendChild(e))})),$t=!0}if(!o)if($t||Mt(),Tt.length>1){var c=It;n._showClone(t),n.options.animation&&!It&&c&&Dt.forEach((function(e){n.addAnimationState({target:e,rect:Lt}),e.fromRect=Lt,e.thisAnimationDuration=null}))}else n._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,o=e.isOwner,i=e.activeSortable;if(Tt.forEach((function(e){e.thisAnimationDuration=null})),i.options.animation&&!o&&i.multiDrag.isMultiDrag){Lt=_({},t);var n=G(At,!0);Lt.top-=n.f,Lt.left-=n.e}},dragOverAnimationComplete:function(){$t&&($t=!1,Mt())},drop:function(e){var t=e.originalEvent,o=e.rootEl,i=e.parentEl,n=e.sortable,r=e.dispatchSortableEvent,s=e.oldIndex,l=e.putSortable,a=l||this.sortable;if(t){var c=this.options,d=i.children;if(!Rt)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),q(At,c.selectedClass,!~Tt.indexOf(At)),~Tt.indexOf(At))Tt.splice(Tt.indexOf(At),1),Ct=null,he({sortable:n,rootEl:o,name:"deselect",targetEl:At,originalEvent:t});else{if(Tt.push(At),he({sortable:n,rootEl:o,name:"select",targetEl:At,originalEvent:t}),t.shiftKey&&Ct&&n.el.contains(Ct)){var u,h,p=J(Ct),f=J(At);if(~p&&~f&&p!==f)for(f>p?(h=p,u=f):(h=f,u=p+1);h<u;h++)~Tt.indexOf(d[h])||(q(d[h],c.selectedClass,!0),Tt.push(d[h]),he({sortable:n,rootEl:o,name:"select",targetEl:d[h],originalEvent:t}))}else Ct=At;kt=a}if(Rt&&this.isMultiDrag){if($t=!1,(i[le].options.sort||i!==o)&&Tt.length>1){var g=Y(At),m=J(At,":not(."+this.options.selectedClass+")");if(!Ft&&c.animation&&(At.thisAnimationDuration=null),a.captureAnimationState(),!Ft&&(c.animation&&(At.fromRect=g,Tt.forEach((function(e){if(e.thisAnimationDuration=null,e!==At){var t=$t?Y(e):g;e.fromRect=t,a.addAnimationState({target:e,rect:t})}}))),Mt(),Tt.forEach((function(e){d[m]?i.insertBefore(e,d[m]):i.appendChild(e),m++})),s===J(At))){var v=!1;Tt.forEach((function(e){e.sortableIndex===J(e)||(v=!0)})),v&&r("update")}Tt.forEach((function(e){se(e)})),a.animateAll()}kt=a}(o===i||l&&"clone"!==l.lastPutMode)&&Dt.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=Rt=!1,Dt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),P(document,"pointerup",this._deselectMultiDrag),P(document,"mouseup",this._deselectMultiDrag),P(document,"touchend",this._deselectMultiDrag),P(document,"keydown",this._checkKeyDown),P(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==Rt&&Rt||kt!==this.sortable||e&&B(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;Tt.length;){var t=Tt[0];q(t,this.options.selectedClass,!1),Tt.shift(),he({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvent:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},_(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[le];t&&t.options.multiDrag&&!~Tt.indexOf(e)&&(kt&&kt!==t&&(kt.multiDrag._deselectMultiDrag(),kt=t),q(e,t.options.selectedClass,!0),Tt.push(e))},deselect:function(e){var t=e.parentNode[le],o=Tt.indexOf(e);t&&t.options.multiDrag&&~o&&(q(e,t.options.selectedClass,!1),Tt.splice(o,1))}},eventProperties:function(){var e=this,t=[],o=[];return Tt.forEach((function(i){var n;t.push({multiDragElement:i,index:i.sortableIndex}),n=$t&&i!==At?-1:$t?J(i,":not(."+e.options.selectedClass+")"):J(i),o.push({multiDragElement:i,index:n})})),{items:O(Tt),clones:[].concat(Dt),oldIndicies:t,newIndicies:o}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})});var ai=class extends HTMLElement{constructor(){super(),this.lastSelected=null,this.declaredStyles=document.createElement("style"),this.declaredStyles.innerText="django-sortable-select{opacity:1}django-sortable-select.focus{opacity:1}django-sortable-select.focus>option.sortable-selected{opacity:1;cursor:grab}django-sortable-select.focus>option.sortable-chosen,django-sortable-select.focus>option.sortable-ghost{opacity:1;cursor:grabbing !important}django-sortable-select>option{line-height:normal;cursor:default}django-sortable-select>option.sortable-chosen,django-sortable-select>option.sortable-selected{opacity:1}",document.head.appendChild(this.declaredStyles),this.addEventListener("click",(e=>this.optionSelected(e))),window.addEventListener("click",(e=>this.elementFocus(e)))}initialize(e){this.transferStyles(e),Nt.create(this,{animation:150,fallbackOnBody:!0,multiDrag:!0,onEnd:e=>this.onEnd(e)})}onEnd(e){this.deselectAllOptions();const t=new Event("options-sorted",{bubbles:!0,cancelable:!0,composed:!1});this.dispatchEvent(t)}elementFocus(e){e.target instanceof HTMLElement&&this.contains(e.target)?this.classList.add("focus"):this.classList.remove("focus")}optionSelected(e){if(!(e.target instanceof HTMLOptionElement))return;const t=e.target;if(e instanceof PointerEvent&&e.metaKey)(t.selected=!t.selected)?Nt.utils.select(t):Nt.utils.deselect(t);else if(e instanceof PointerEvent&&e.shiftKey&&this.lastSelected){this.deselectAllOptions();let e=!1;for(let o of this.getElementsByTagName("option"))o===t||o===this.lastSelected?(o.selected=!0,e=!e):o.selected=e,o.selected&&Nt.utils.select(o)}else this.deselectAllOptions(),t.selected=!0,Nt.utils.select(t);this.lastSelected=t,e.preventDefault()}deselectAllOptions(){for(let e of this.getElementsByTagName("option"))e.selected=!1,Nt.utils.deselect(e)}transferStyles(e){const t=this.declaredStyles.sheet,o=e.querySelector("option");for(let i=0;t&&i<t.cssRules.length;i++){const n=t.cssRules.item(i);let r;switch(n.selectorText){case"django-sortable-select":r=oi.extractStyles(e,["display","width","height","border","box-shadow","outline","overflow","font-family","font-size","font-strech","font-style","font-weight","letter-spacing","white-space","line-height"]),t.insertRule(`${n.selectorText}{${r}}`,++i);break;case"django-sortable-select.focus":e.style.transition="none",e.focus(),r=oi.extractStyles(e,["border","box-shadow","outline"]),e.blur(),t.insertRule(`${n.selectorText}{${r}}`,++i),e.style.transition="";break;case"django-sortable-select > option.sortable-chosen, django-sortable-select > option.sortable-selected":o&&(o.selected=!0,r=oi.extractStyles(o,["color","background-color"]),t.insertRule(`${n.selectorText}{${r}}`,++i),o.selected=!1);break;case"django-sortable-select.focus > option.sortable-chosen, django-sortable-select.focus > option.sortable-selected":e.focus(),o&&(o.selected=!0,r=oi.extractStyles(o,["color","background-color"]),t.insertRule(`${n.selectorText}{${r}}`,++i),o.selected=!1),e.blur()}}}add(e){this.appendChild(e),Nt.utils.select(e)}},ci=u(m()),di=class extends ii{constructor(e,t){super(e),this.historicalValues=[],this.historyCursor=0,this.selectorElement=e,this.containerElement=this.fieldGroup.querySelector(".dj-dual-selector"),e.setAttribute("multiple","multiple");const o=this.fieldGroup.querySelectorAll('input[type="text"]');2===o.length&&(this.searchLeftInput=o[0],this.searchRightInput=o[1],this.searchLeftInput.addEventListener("input",(e=>this.leftLookup())),this.searchRightInput.addEventListener("input",(e=>this.rightLookup())));const i=this.fieldGroup.querySelectorAll(`select:not([is="${t}"])`);if(!(i.length>=1))throw new Error(`<select is="${t}"> requires two <select>-elements`);if(this.selectLeftElement=i.item(0),2===i.length)this.selectRightElement=i.item(1);else{const e=this.fieldGroup.querySelector("django-sortable-select");this.selectRightElement=e}this.moveAllRightButton=this.fieldGroup.querySelector("button.dj-move-all-right"),this.moveSelectedRightButton=this.fieldGroup.querySelector("button.dj-move-selected-right"),this.moveSelectedLeftButton=this.fieldGroup.querySelector("button.dj-move-selected-left"),this.moveAllLeftButton=this.fieldGroup.querySelector("button.dj-move-all-left"),this.undoButton=this.fieldGroup.querySelector("button.dj-undo-selected"),this.redoButton=this.fieldGroup.querySelector("button.dj-redo-selected"),this.selectorElement.classList.add("dj-concealed");const n=e.parentElement?.querySelector("template.select-no-results");this.renderNoResults=e=>n?(0,ci.default)(n.innerHTML)(e):"No results",this.installEventHandlers(),this.initialize(),this.setButtonsState()}installEventHandlers(){this.selectLeftElement.addEventListener("focus",this.touch),this.selectLeftElement.addEventListener("dblclick",(e=>this.moveOptionRight(e.target))),this.selectLeftElement.addEventListener("scroll",(e=>this.selectLeftScrolled())),this.selectRightElement.addEventListener("focus",this.touch),this.selectRightElement.addEventListener("dblclick",(e=>this.moveOptionLeft(e.target))),this.selectRightElement.addEventListener("options-sorted",(e=>this.optionsSorted())),this.moveAllRightButton?.addEventListener("click",(e=>this.moveAllOptionsRight())),this.moveSelectedRightButton?.addEventListener("click",(e=>this.moveSelectedOptionsRight())),this.moveSelectedLeftButton?.addEventListener("click",(e=>this.moveSelectedOptionsLeft())),this.moveAllLeftButton?.addEventListener("click",(e=>this.moveAllOptionsLeft())),this.undoButton?.addEventListener("click",(e=>this.unOrRedo(-1))),this.redoButton?.addEventListener("click",(e=>this.unOrRedo(1)))}getOptions(e){return Array.from(e.getElementsByTagName("option"))}initialize(){const e=[];for(let t of this.getOptions(this.selectorElement)){const o=t.cloneNode();t.selected?(t.selected=!1,this.selectRightElement.add(t),e.push(t.value)):this.selectLeftElement.add(t),this.selectorElement.add(o)}this.historicalValues.push(e),this.setHistoryCursor(0),this.selectRightElement instanceof ai&&this.selectRightElement.initialize(this.selectLeftElement)}addNoResultsOption(e,t){const o=new Option(this.renderNoResults({input:t}));o.disabled=!0,e.add(o)}prepareOptions(e){const t=this.getOptions(e);return t.filter((e=>e.disabled)).forEach((e=>e.remove())),t}addMoreOptions(e){const t=this.getOptions(this.selectorElement);for(let o of e)if(0===t.filter((e=>e.value==o.id)).length){const e=new Option(o.label,o.id);this.selectorElement.add(e.cloneNode()),this.selectLeftElement.add(e)}}async selectLeftScrolled(){if(!this.isIncomplete)return;this.selectLeftElement.scrollHeight-this.selectLeftElement.scrollTop<=this.selectLeftElement.offsetHeight&&await this.remoteLookup()}async remoteLookup(){let e;const t=this.searchLeftInput?.value;if(t){e=`query=${t}&offset=${this.getOptions(this.selectLeftElement).filter((e=>!e.hidden)).length}`}else e=`offset=${this.selectorElement.childElementCount}`;this.lastRemoteQuery!==e&&(this.lastRemoteQuery=e,await this.loadOptions(e,(e=>{this.addMoreOptions(e)})))}selectorChanged(){const e=this.getOptions(this.selectRightElement),t=this.getOptions(this.selectorElement);for(let o of t)o.selected=1===e.filter((e=>e.value===o.value)).length;this.setButtonsState(),this.containerElement?.classList.toggle("invalid",!this.selectorElement.checkValidity()),this.selectorElement.dispatchEvent(new Event("change"))}setButtonsState(){let e=0===this.getOptions(this.selectLeftElement).filter((e=>!e.hidden)).length;this.moveAllRightButton.disabled=e,this.moveSelectedRightButton.disabled=e,e=0===this.getOptions(this.selectRightElement).filter((e=>!e.hidden)).length,this.moveAllLeftButton.disabled=e,this.moveSelectedLeftButton.disabled=e}clearSearchFields(){this.searchLeftInput&&(this.searchLeftInput.value=""),this.searchRightInput&&(this.searchRightInput.value=""),this.prepareOptions(this.selectLeftElement).forEach((e=>e.hidden=!1)),this.prepareOptions(this.selectRightElement).forEach((e=>e.hidden=!1))}optionsMoved(){const e=this.getOptions(this.selectRightElement);this.historicalValues.splice(this.historyCursor+1),this.historicalValues.push(e.map((e=>e.value))),this.setHistoryCursor(this.historicalValues.length-1),this.selectorChanged()}optionsSorted(){this.getOptions(this.selectorElement).filter((e=>e.selected)).forEach((e=>e.remove())),this.getOptions(this.selectRightElement).forEach((e=>{const t=e.cloneNode();t.selected=!0,this.selectorElement.add(t)})),this.optionsMoved()}async moveOptionRight(e){e instanceof HTMLOptionElement&&(this.selectRightElement.add(e),await this.selectLeftScrolled(),this.optionsMoved())}async moveAllOptionsRight(){this.getOptions(this.selectLeftElement).filter((e=>!e.hidden)).forEach((e=>this.selectRightElement.add(e))),this.clearSearchFields(),await this.selectLeftScrolled(),this.optionsMoved()}moveSelectedOptionsRight(){this.getOptions(this.selectLeftElement).filter((e=>e.selected)).forEach((e=>this.selectRightElement.add(e))),this.optionsMoved()}moveSelectedOptionsLeft(){this.getOptions(this.selectRightElement).filter((e=>e.selected)).forEach((e=>this.selectLeftElement.add(e))),this.optionsMoved()}moveAllOptionsLeft(){this.getOptions(this.selectRightElement).filter((e=>!e.hidden)).forEach((e=>this.selectLeftElement.add(e))),this.clearSearchFields(),this.optionsMoved()}moveOptionLeft(e){e instanceof HTMLOptionElement&&(this.selectLeftElement.add(e),this.optionsMoved())}async leftLookup(){const e=this.searchLeftInput?.value??"";let t=this.lookup(this.prepareOptions(this.selectLeftElement),e);this.isIncomplete&&t<this.selectLeftElement.size&&(await this.remoteLookup(),t=this.lookup(this.getOptions(this.selectLeftElement),e)),this.setButtonsState(),0===t&&this.addNoResultsOption(this.selectLeftElement,e)}rightLookup(){const e=this.searchRightInput?.value??"";0===this.lookup(this.prepareOptions(this.selectRightElement),e)&&this.addNoResultsOption(this.selectRightElement,e)}lookup(e,t){return t?(t=t.toLowerCase(),e.forEach((e=>e.hidden=-1===e.text.toLowerCase().indexOf(t))),e.length-e.filter((e=>e.hidden)).length):(e.forEach((e=>e.hidden=!1)),e.length)}unOrRedo(e){this.clearSearchFields();const t=this.historyCursor+e;if(t<0||t>=this.historicalValues.length)return;const o=this.historicalValues[t];this.getOptions(this.selectRightElement).filter((e=>-1===o.indexOf(e.value))).forEach((e=>this.selectLeftElement.add(e))),this.getOptions(this.selectLeftElement).filter((e=>-1!==o.indexOf(e.value))).forEach((e=>this.selectRightElement.add(e))),"DJANGO-SORTABLE-SELECT"===this.selectRightElement.tagName&&(o.forEach((e=>{const t=this.selectRightElement.querySelector(`option[value="${e}"]`);t&&this.selectRightElement.insertAdjacentElement("beforeend",t)})),this.optionsSorted()),this.setHistoryCursor(t),this.selectorChanged()}setHistoryCursor(e){this.historyCursor=e,this.undoButton&&(this.undoButton.disabled=0===e),this.redoButton&&(this.redoButton.disabled=e===this.historicalValues.length-1)}formResetted(e){this.clearSearchFields();const t=this.historicalValues[0];this.historicalValues.splice(1),this.setHistoryCursor(0),this.getOptions(this.selectRightElement).filter((e=>-1===t.indexOf(e.value))).forEach((e=>this.selectLeftElement.add(e))),this.getOptions(this.selectLeftElement).filter((e=>-1!==t.indexOf(e.value))).forEach((e=>this.selectRightElement.add(e))),this.selectorChanged()}formSubmitted(e){this.clearSearchFields(),this.historicalValues.splice(0,this.historicalValues.length-1),this.setHistoryCursor(0)}getValue(){return this.getOptions(this.selectorElement).filter((e=>e.selected)).map((e=>e.value))}},ui=Symbol("DualSelectorElement"),hi=class extends HTMLSelectElement{connectedCallback(){this[ui]=new di(this,"django-dual-selector")}get value(){return this[ui]?.getValue()}};window.addEventListener("load",(e=>{const t=oi.convertPseudoClasses();window.customElements.define("django-selectize",li,{extends:"select"}),window.customElements.define("django-sortable-select",ai),window.customElements.define("django-dual-selector",hi,{extends:"select"}),window.customElements.define("django-formset",oo),t.remove()}))})();
/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */